(self.webpackChunknotepad=self.webpackChunknotepad||[]).push([[179],{776:(mo,Tr,xi)=>{"use strict";function be(t){return"function"==typeof t}function ir(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ha=ir(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function fa(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class dn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(be(i))try{i()}catch(s){e=s instanceof ha?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Nh(s)}catch(o){e=e??[],o instanceof ha?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ha(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Nh(e);else{if(e instanceof dn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fa(n,e)}remove(e){const{_finalizers:n}=this;n&&fa(n,e),e instanceof dn&&e._removeParent(this)}}dn.EMPTY=(()=>{const t=new dn;return t.closed=!0,t})();const xh=dn.EMPTY;function Te(t){return t instanceof dn||t&&"closed"in t&&be(t.remove)&&be(t.add)&&be(t.unsubscribe)}function Nh(t){be(t)?t():t.unsubscribe()}const Kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ze={setTimeout(t,e,...n){const{delegate:i}=ze;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=ze;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vl(t){ze.setTimeout(()=>{const{onUnhandledError:e}=Kr;if(!e)throw t;e(t)})}function pa(){}const P=ga("C",void 0,void 0);function ga(t,e,n){return{kind:t,value:e,error:n}}let Ni=null;function Qt(t){if(Kr.useDeprecatedSynchronousErrorHandling){const e=!Ni;if(e&&(Ni={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=Ni;if(Ni=null,n)throw i}}else t()}class _o extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Te(e)&&e.add(this)):this.destination=Ts}static create(e,n,i){return new Yr(e,n,i)}next(e){this.isStopped?nn(function Sr(t){return ga("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?nn(function sm(t){return ga("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?nn(P,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const bl=Function.prototype.bind;function Oi(t,e){return bl.call(t,e)}class yo{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){ki(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){ki(i)}else ki(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ki(n)}}}class Yr extends _o{constructor(e,n,i){let r;if(super(),be(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Kr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Oi(e.next,s),error:e.error&&Oi(e.error,s),complete:e.complete&&Oi(e.complete,s)}):r=e}this.destination=new yo(r)}}function ki(t){Kr.useDeprecatedSynchronousErrorHandling?function Ir(t){Kr.useDeprecatedSynchronousErrorHandling&&Ni&&(Ni.errorThrown=!0,Ni.error=t)}(t):vl(t)}function nn(t,e){const{onStoppedNotification:n}=Kr;n&&ze.setTimeout(()=>n(t,e))}const Ts={closed:!0,next:pa,error:function wl(t){throw t},complete:pa},_n="function"==typeof Symbol&&Symbol.observable||"@@observable";function Me(t){return t}function pu(t){return 0===t.length?Me:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let ut=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function El(t){return t&&t instanceof _o||function Cl(t){return t&&be(t.next)&&be(t.error)&&be(t.complete)}(t)&&Te(t)}(n)?n:new Yr(n,i,r);return Qt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=ma(i))((r,s)=>{const o=new Yr({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[_n](){return this}pipe(...n){return pu(n)(this)}toPromise(n){return new(n=ma(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function ma(t){var e;return null!==(e=t??Kr.Promise)&&void 0!==e?e:Promise}const bo=ir(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ge=(()=>{class t extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Ss(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new bo}next(n){Qt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Qt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Qt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?xh:(this.currentObservers=null,s.push(n),new dn(()=>{this.currentObservers=null,fa(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new ut;return n.source=this,n}}return t.create=(e,n)=>new Ss(e,n),t})();class Ss extends ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:xh}}class Ot extends ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function gu(t){return be(t?.lift)}function gt(t){return e=>{if(gu(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qe(t,e,n,i,r){return new Dl(t,e,n,i,r)}class Dl extends _o{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(t,e){return gt((n,i)=>{let r=0;n.subscribe(Qe(i,s=>{i.next(t.call(e,s,r++))}))})}function wo(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function In(t){return this instanceof In?(this.v=t,this):new In(t)}function Tl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function yn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const kh=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function _u(t){return be(t?.then)}function am(t){return be(t[_n])}function lm(t){return Symbol.asyncIterator&&be(t?.[Symbol.asyncIterator])}function Is(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const cm=function H0(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function um(t){return be(t?.[cm])}function yu(t){return function Ke(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(g){return new Promise(function(m,y){s.push([h,g,m,y])>1||a(h,g)})})}function a(h,g){try{!function l(h){h.value instanceof In?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(i[h](g))}catch(m){d(s[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield In(n.read());if(r)return yield In(void 0);yield yield In(i)}}finally{n.releaseLock()}})}function dm(t){return be(t?.getReader)}function rn(t){if(t instanceof ut)return t;if(null!=t){if(am(t))return function $0(t){return new ut(e=>{const n=t[_n]();if(be(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(kh(t))return function U0(t){return new ut(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(_u(t))return function j0(t){return new ut(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vl)})}(t);if(lm(t))return hm(t);if(um(t))return function z0(t){return new ut(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(dm(t))return function G0(t){return hm(yu(t))}(t)}throw Is(t)}function hm(t){return new ut(e=>{(function W0(t,e){var n,i,r,s;return function Bt(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Tl(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Jr(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function Vt(t,e,n=1/0){return be(e)?Vt((i,r)=>$e((s,o)=>e(i,s,r,o))(rn(t(i,r))),n):("number"==typeof e&&(n=e),gt((i,r)=>function q0(t,e,n,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},g=y=>c<i?m(y):l.push(y),m=y=>{s&&e.next(y),c++;let b=!1;rn(n(y,u++)).subscribe(Qe(e,C=>{r?.(C),s?g(C):e.next(C)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<i;){const C=l.shift();o?Jr(e,o,()=>m(C)):m(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(Qe(e,g,()=>{d=!0,h()})),()=>{a?.()}}(i,r,t,n)))}function Ar(t=1/0){return Vt(Me,t)}const di=new ut(t=>t.complete());function fm(t){return t&&be(t.schedule)}function Rh(t){return t[t.length-1]}function vu(t){return be(Rh(t))?t.pop():void 0}function ya(t){return fm(Rh(t))?t.pop():void 0}function pm(t,e=0){return gt((n,i)=>{n.subscribe(Qe(i,r=>Jr(i,t,()=>i.next(r),e),()=>Jr(i,t,()=>i.complete(),e),r=>Jr(i,t,()=>i.error(r),e)))})}function gm(t,e=0){return gt((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function ym(t,e){if(!t)throw new Error("Iterable cannot be null");return new ut(n=>{Jr(n,e,()=>{const i=t[Symbol.asyncIterator]();Jr(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function hn(t,e){return e?function Z0(t,e){if(null!=t){if(am(t))return function mm(t,e){return rn(t).pipe(gm(e),pm(e))}(t,e);if(kh(t))return function _m(t,e){return new ut(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(_u(t))return function Y0(t,e){return rn(t).pipe(gm(e),pm(e))}(t,e);if(lm(t))return ym(t,e);if(um(t))return function Q0(t,e){return new ut(n=>{let i;return Jr(n,e,()=>{i=t[cm](),Jr(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>be(i?.return)&&i.return()})}(t,e);if(dm(t))return function J0(t,e){return ym(yu(t),e)}(t,e)}throw Is(t)}(t,e):rn(t)}function fe(...t){return hn(t,ya(t))}function Fh(t={}){const{connector:e=(()=>new ge),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},g=()=>{h(),o=l=void 0,u=d=!1},m=()=>{const y=o;g(),y?.unsubscribe()};return gt((y,b)=>{c++,!d&&!u&&h();const C=l=l??e();b.add(()=>{c--,0===c&&!d&&!u&&(a=Lh(m,r))}),C.subscribe(b),!o&&c>0&&(o=new Yr({next:E=>C.next(E),error:E=>{d=!0,h(),a=Lh(g,n,E),C.error(E)},complete:()=>{u=!0,h(),a=Lh(g,i),C.complete()}}),rn(y).subscribe(o))})(s)}}function Lh(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new Yr({next:()=>{i.unsubscribe(),t()}});return rn(e(...n)).subscribe(i)}function Pi(t,e){return gt((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(Qe(i,l=>{r?.unsubscribe();let c=0;const u=s++;rn(t(l,u)).subscribe(r=Qe(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function X0(t,e){return t===e}function qe(t){for(let e in t)if(t[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function Il(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function sn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(sn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Al(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const wm=qe({__forward_ref__:qe});function we(t){return t.__forward_ref__=we,t.toString=function(){return sn(this())},t}function me(t){return Bh(t)?t():t}function Bh(t){return"function"==typeof t&&t.hasOwnProperty(wm)&&t.__forward_ref__===we}function Vh(t){return t&&!!t.\u0275providers}const Cm="https://g.co/ng/security#xss";class O extends Error{constructor(e,n){super(function bu(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function _e(t){return"string"==typeof t?t:null==t?"":String(t)}function Hh(t,e){throw new O(-201,!1)}function Ri(t,e){null==t&&function pe(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Oe(t){return{providers:t.providers||[],imports:t.imports||[]}}function wu(t){return Em(t,Eu)||Em(t,$h)}function Em(t,e){return t.hasOwnProperty(e)?t[e]:null}function Cu(t){return t&&(t.hasOwnProperty(va)||t.hasOwnProperty(cw))?t[va]:null}const Eu=qe({\u0275prov:qe}),va=qe({\u0275inj:qe}),$h=qe({ngInjectableDef:qe}),cw=qe({ngInjectorDef:qe});var xe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(xe||{});let Uh;function ni(t){const e=Uh;return Uh=t,e}function Du(t,e,n){const i=wu(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&xe.Optional?null:void 0!==e?e:void Hh(sn(t))}const dt=globalThis,kl={},qh="__NG_DI_FLAG__",Au="ngTempTokenPath",Im=/\n/gm,Mm="__source";let ba;function As(t){const e=ba;return ba=t,e}function xm(t,e=xe.Default){if(void 0===ba)throw new O(-203,!1);return null===ba?Du(t,void 0,e):ba.get(t,e&xe.Optional?null:void 0,e)}function $(t,e=xe.Default){return(function jh(){return Uh}()||xm)(me(t),e)}function J(t,e=xe.Default){return $(t,Pl(e))}function Pl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Rl(t){const e=[];for(let n=0;n<t.length;n++){const i=me(t[n]);if(Array.isArray(i)){if(0===i.length)throw new O(900,!1);let r,s=xe.Default;for(let o=0;o<i.length;o++){const a=i[o],l=mw(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push($(r,s))}else e.push($(i))}return e}function Fl(t,e){return t[qh]=e,t.prototype[qh]=e,t}function mw(t){return t[qh]}function Fi(t){return{toString:t}.toString()}var Mu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Mu||{}),Li=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Li||{});const Mr={},Je=[],Ll=qe({\u0275cmp:qe}),Yh=qe({\u0275dir:qe}),Qh=qe({\u0275pipe:qe}),Nm=qe({\u0275mod:qe}),Zr=qe({\u0275fac:qe}),wa=qe({__NG_ELEMENT_ID__:qe}),Jh=qe({__NG_ENV_ID__:qe});function Om(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function Zh(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Xh(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function km(t){return 3===t||4===t||6===t}function Xh(t){return 64===t.charCodeAt(0)}function Io(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Pm(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Pm(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const Rm="ng-template";function vw(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if("string"==typeof s&&r){const o=t[i++];if(n&&"class"===s&&-1!==Om(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<t.length&&"string"==typeof(s=t[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Fm(t){return 4===t.type&&t.value!==Rm}function Lm(t,e,n){return e===(4!==t.type||n?t.value:Rm)}function bw(t,e,n){let i=4;const r=t.attrs||[],s=function Ew(t){for(let e=0;e<t.length;e++)if(km(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!Lm(t,l,n)||""===l&&1===e.length){if(rr(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!vw(t.attrs,c,n)){if(rr(i))return!1;o=!0}continue}const d=ww(8&i?"class":l,r,Fm(t),n);if(-1===d){if(rr(i))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":r[d+1].toLowerCase();const g=8&i?h:null;if(g&&-1!==Om(g,c,0)||2&i&&c!==h){if(rr(i))return!1;o=!0}}}}else{if(!o&&!rr(i)&&!rr(l))return!1;if(o&&rr(l))continue;o=!1,i=l|1&i}}return rr(i)||o}function rr(t){return 0==(1&t)}function ww(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Dw(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Bm(t,e,n=!1){for(let i=0;i<e.length;i++)if(bw(t,e[i],n))return!0;return!1}function Tw(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function Vm(t,e){return t?":not("+e.trim()+")":e}function Ao(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!rr(o)&&(e+=Vm(s,r),r=""),i=o,s=s||!rr(i);n++}return""!==r&&(e+=Vm(s,r)),e}function Ze(t){return Fi(()=>{const e=Um(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Mu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Li.Emulated,styles:t.styles||Je,_:null,schemas:t.schemas||null,tView:null,id:""};jm(n);const i=t.dependencies;return n.directiveDefs=xu(i,!1),n.pipeDefs=xu(i,!0),n.id=function Nu(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Aw(t){return Le(t)||Be(t)}function Mw(t){return null!==t}function ke(t){return Fi(()=>({type:t.type,bootstrap:t.bootstrap||Je,declarations:t.declarations||Je,imports:t.imports||Je,exports:t.exports||Je,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $m(t,e){if(null==t)return Mr;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}function K(t){return Fi(()=>{const e=Um(t);return jm(e),e})}function Tt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Le(t){return t[Ll]||null}function Be(t){return t[Yh]||null}function Bn(t){return t[Qh]||null}function fi(t,e){const n=t[Nm]||null;if(!n&&!0===e)throw new Error(`Type ${sn(t)} does not have '\u0275mod' property.`);return n}function Um(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Mr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Je,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$m(t.inputs,e),outputs:$m(t.outputs)}}function jm(t){t.features?.forEach(e=>e(t))}function xu(t,e){if(!t)return null;const n=e?Bn:Aw;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(Mw)}const f=0,p=1,_=2,v=3,N=4,ae=5,de=6,St=7,Se=8,pi=9,Ms=10,Ce=11,ef=12,ak=13,Ou=14,on=15,tf=16,ku=17,xs=18,nf=19,lk=20,Ea=21,Mo=22,zm=23,Gm=24,Ge=25,Ow=1,ck=2,Ns=7,Pu=9,Vn=11;function Bi(t){return Array.isArray(t)&&"object"==typeof t[Ow]}function Vi(t){return Array.isArray(t)&&!0===t[Ow]}function kw(t){return 0!=(4&t.flags)}function Bl(t){return t.componentOffset>-1}function qm(t){return 1==(1&t.flags)}function Xr(t){return!!t.template}function Pw(t){return 0!=(512&t[_])}function Vl(t,e){return t.hasOwnProperty(Zr)?t[Zr]:null}let t7=dt.WeakRef??class e7{constructor(e){this.ref=e}deref(){return this.ref}},i7=0,Os=null,Km=!1;function An(t){const e=Os;return Os=t,e}class pk{constructor(){this.id=i7++,this.ref=function n7(t){return new t7(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const i=n.producerNode.deref();if(null!=i&&n.atTrackingVersion===this.trackingVersion){if(i.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),i?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Km;Km=!0;try{for(const[n,i]of this.consumers){const r=i.consumerNode.deref();null!=r&&r.trackingVersion===i.atTrackingVersion?r.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),r?.producers.delete(this.id))}}finally{Km=e}}producerAccessed(){if(Km)throw new Error("");if(null===Os)return;let e=Os.producers.get(this.id);void 0===e?(e={consumerNode:Os.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Os.trackingVersion},Os.producers.set(this.id,e),this.consumers.set(Os.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Os.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Os?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let gk=null;const _k=()=>{};class a7 extends pk{constructor(e,n,i){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=_k,this.registerOnCleanup=r=>{this.cleanupFn=r},this.consumerAllowSignalWrites=i}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=An(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=_k,this.watch(this.registerOnCleanup)}finally{An(e)}}cleanup(){this.cleanupFn()}}class l7{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function vn(){return yk}function yk(t){return t.type.prototype.ngOnChanges&&(t.setInput=u7),c7}function c7(){const t=bk(this),e=t?.current;if(e){const n=t.previous;if(n===Mr)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function u7(t,e,n,i){const r=this.declaredInputs[n],s=bk(t)||function d7(t,e){return t[vk]=e}(t,{previous:Mr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new l7(l&&l.currentValue,e,a===Mr),t[i]=e}vn.ngInherit=!0;const vk="__ngSimpleChanges__";function bk(t){return t[vk]||null}const ks=function(t,e,n){};function It(t){for(;Array.isArray(t);)t=t[f];return t}function Jm(t,e){return It(e[t])}function Hi(t,e){return It(e[t.index])}function Ek(t,e){return t.data[e]}function Ru(t,e){return t[e]}function sr(t,e){const n=e[t];return Bi(n)?n:n[f]}function Da(t,e){return null==e?null:t[e]}function Dk(t){t[ku]=0}function y7(t){1024&t[_]||(t[_]|=1024,Sk(t,1))}function Tk(t){1024&t[_]&&(t[_]&=-1025,Sk(t,-1))}function Sk(t,e){let n=t[v];if(null===n)return;n[ae]+=e;let i=n;for(n=n[v];null!==n&&(1===e&&1===i[ae]||-1===e&&0===i[ae]);)n[ae]+=e,i=n,n=n[v]}const ye={lFrame:Lk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Mk(){return ye.bindingsEnabled}function Fu(){return null!==ye.skipHydrationRootTNode}function V(){return ye.lFrame.lView}function Xe(){return ye.lFrame.tView}function Pe(t){return ye.lFrame.contextLView=t,t[Se]}function Re(t){return ye.lFrame.contextLView=null,t}function Hn(){let t=xk();for(;null!==t&&64===t.type;)t=t.parent;return t}function xk(){return ye.lFrame.currentTNode}function Ps(t,e){const n=ye.lFrame;n.currentTNode=t,n.isParent=e}function Hw(){return ye.lFrame.isParent}function $w(){ye.lFrame.isParent=!1}function gi(){const t=ye.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Lu(){return ye.lFrame.bindingIndex++}function No(t){const e=ye.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function x7(t,e){const n=ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,Uw(e)}function Uw(t){ye.lFrame.currentDirectiveIndex=t}function jw(t){const e=ye.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Pk(){return ye.lFrame.currentQueryIndex}function zw(t){ye.lFrame.currentQueryIndex=t}function O7(t){const e=t[p];return 2===e.type?e.declTNode:1===e.type?t[de]:null}function Rk(t,e,n){if(n&xe.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&xe.Host||(r=O7(s),null===r||(s=s[Ou],10&r.type))););if(null===r)return!1;e=r,t=s}const i=ye.lFrame=Fk();return i.currentTNode=e,i.lView=t,!0}function Gw(t){const e=Fk(),n=t[p];ye.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fk(){const t=ye.lFrame,e=null===t?null:t.child;return null===e?Lk(t):e}function Lk(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Bk(){const t=ye.lFrame;return ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Vk=Bk;function Ww(){const t=Bk();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function mi(){return ye.lFrame.selectedIndex}function Hl(t){ye.lFrame.selectedIndex=t}function Ht(){const t=ye.lFrame;return Ek(t.tView,t.selectedIndex)}let $k=!0;function Zm(){return $k}function Ta(t){$k=t}function Xm(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function e_(t,e,n){Uk(t,e,3,n)}function t_(t,e,n,i){(3&t[_])===n&&Uk(t,e,n,i)}function qw(t,e){let n=t[_];(3&n)===e&&(n&=8191,n+=1,t[_]=n)}function Uk(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&t[ku]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(t[ku]+=65536),(a<s||-1==s)&&(H7(t,n,e,l),t[ku]=(4294901760&t[ku])+l+2),l++}function jk(t,e){ks(4,t,e);const n=An(null);try{e.call(t)}finally{An(n),ks(5,t,e)}}function H7(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[_]>>13<t[ku]>>16&&(3&t[_])===e&&(t[_]+=8192,jk(a,s)):jk(a,s)}const Bu=-1;class af{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Yw(t){return t!==Bu}function lf(t){return 32767&t}function cf(t,e){let n=function z7(t){return t>>16}(t),i=e;for(;n>0;)i=i[Ou],n--;return i}let Qw=!0;function n_(t){const e=Qw;return Qw=t,e}const zk=255,Gk=5;let G7=0;const Rs={};function i_(t,e){const n=Wk(t,e);if(-1!==n)return n;const i=e[p];i.firstCreatePass&&(t.injectorIndex=e.length,Jw(i.data,t),Jw(e,null),Jw(i.blueprint,null));const r=r_(t,e),s=t.injectorIndex;if(Yw(r)){const o=lf(r),a=cf(r,e),l=a[p].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Jw(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Wk(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function r_(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=Xk(r),null===i)return Bu;if(n++,r=r[Ou],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return Bu}function Zw(t,e,n){!function W7(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(wa)&&(i=n[wa]),null==i&&(i=n[wa]=G7++);const r=i&zk;e.data[t+(r>>Gk)]|=1<<r}(t,e,n)}function qk(t,e,n){if(n&xe.Optional||void 0!==t)return t;Hh()}function Kk(t,e,n,i){if(n&xe.Optional&&void 0===i&&(i=null),!(n&(xe.Self|xe.Host))){const r=t[pi],s=ni(void 0);try{return r?r.get(e,i,n&xe.Optional):Du(e,i,n&xe.Optional)}finally{ni(s)}}return qk(i,0,n)}function Yk(t,e,n,i=xe.Default,r){if(null!==t){if(2048&e[_]&&!(i&xe.Self)){const o=function Z7(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[_]&&!(512&o[_]);){const a=Qk(s,o,n,i|xe.Self,Rs);if(a!==Rs)return a;let l=s.parent;if(!l){const c=o[lk];if(c){const u=c.get(n,Rs,i);if(u!==Rs)return u}l=Xk(o),o=o[Ou]}s=l}return r}(t,e,n,i,Rs);if(o!==Rs)return o}const s=Qk(t,e,n,i,Rs);if(s!==Rs)return s}return Kk(e,n,i,r)}function Qk(t,e,n,i,r){const s=function Y7(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(wa)?t[wa]:void 0;return"number"==typeof e?e>=0?e&zk:J7:e}(n);if("function"==typeof s){if(!Rk(e,t,i))return i&xe.Host?qk(r,0,i):Kk(e,n,i,r);try{let o;if(o=s(i),null!=o||i&xe.Optional)return o;Hh()}finally{Vk()}}else if("number"==typeof s){let o=null,a=Wk(t,e),l=Bu,c=i&xe.Host?e[on][de]:null;for((-1===a||i&xe.SkipSelf)&&(l=-1===a?r_(t,e):e[a+8],l!==Bu&&Zk(i,!1)?(o=e[p],a=lf(l),e=cf(l,e)):a=-1);-1!==a;){const u=e[p];if(Jk(s,a,u.data)){const d=K7(a,e,n,o,i,c);if(d!==Rs)return d}l=e[a+8],l!==Bu&&Zk(i,e[p].data[a+8]===c)&&Jk(s,a,e)?(o=u,a=lf(l),e=cf(l,e)):a=-1}}return r}function K7(t,e,n,i,r,s){const o=e[p],a=o.data[t+8],u=s_(a,o,n,null==i?Bl(a)&&Qw:i!=o&&0!=(3&a.type),r&xe.Host&&s===a);return null!==u?$l(e,o,u,a):Rs}function s_(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,u=s>>20,h=r?a+u:t.directiveEnd;for(let g=i?a:a+u;g<h;g++){const m=o[g];if(g<l&&n===m||g>=l&&m.type===n)return g}if(r){const g=o[l];if(g&&Xr(g)&&g.type===n)return l}return null}function $l(t,e,n,i){let r=t[n];const s=e.data;if(function $7(t){return t instanceof af}(r)){const o=r;o.resolving&&function ew(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new O(-200,`Circular dependency in DI detected for ${t}${n}`)}(function tt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_e(t)}(s[n]));const a=n_(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?ni(o.injectImpl):null;Rk(t,i,xe.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function V7(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=yk(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==c&&ni(c),n_(a),o.resolving=!1,Vk()}}return r}function Jk(t,e,n){return!!(n[e+(t>>Gk)]&1<<t)}function Zk(t,e){return!(t&xe.Self||t&xe.Host&&e)}class _i{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return Yk(this._tNode,this._lView,e,Pl(i),n)}}function J7(){return new _i(Hn(),V())}function an(t){return Fi(()=>{const e=t.prototype.constructor,n=e[Zr]||Xw(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Zr]||Xw(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Xw(t){return Bh(t)?()=>{const e=Xw(me(t));return e&&e()}:Vl(t)}function Xk(t){const e=t[p],n=e.type;return 2===n?e.declTNode:1===n?t[de]:null}const Hu="__parameters__";function Uu(t,e,n){return Fi(()=>{const i=function e1(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Hu)?l[Hu]:Object.defineProperty(l,Hu,{value:[]})[Hu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function zu(t,e){t.forEach(n=>Array.isArray(n)?zu(n,e):e(n))}function tP(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function o_(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hf(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function or(t,e,n){let i=Gu(t,e);return i>=0?t[1|i]=n:(i=~i,function sq(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function t1(t,e){const n=Gu(t,e);if(n>=0)return t[1|n]}function Gu(t,e){return function nP(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const yi=Fl(Uu("Optional"),8),l_=Fl(Uu("SkipSelf"),4);function f_(t){return 128==(128&t.flags)}var Sa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sa||{});const Sq=/^>|^->|<!--|-->|--!>|<!-$/g,Iq=/(<|>)/,Aq="\u200b$1\u200b";const o1=new Map;let Mq=0;const l1="__ngContext__";function ii(t,e){Bi(e)?(t[l1]=e[nf],function Nq(t){o1.set(t[nf],t)}(e)):t[l1]=e}let c1;function u1(t,e){return c1(t,e)}function gf(t){const e=t[v];return Vi(e)?e[v]:e}function CP(t){return DP(t[ef])}function EP(t){return DP(t[N])}function DP(t){for(;null!==t&&!Vi(t);)t=t[N];return t}function Ku(t,e,n,i,r){if(null!=i){let s,o=!1;Vi(i)?s=i:Bi(i)&&(o=!0,i=i[f]);const a=It(i);0===t&&null!==n?null==r?AP(e,n,a):jl(e,n,a,r||null,!0):1===t&&null!==n?jl(e,n,a,r||null,!0):2===t?function b_(t,e,n){const i=y_(t,e);i&&function Qq(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Xq(t,e,n,i,r){const s=n[Ns];s!==It(n)&&Ku(e,t,i,s,r);for(let a=Vn;a<n.length;a++){const l=n[a];_f(l[p],l,t,e,i,s)}}(e,t,s,n,r)}}function d1(t,e){return t.createComment(function pP(t){return t.replace(Sq,e=>e.replace(Iq,Aq))}(e))}function m_(t,e,n){return t.createElement(e,n)}function SP(t,e){const n=t[Pu],i=n.indexOf(e);Tk(e),n.splice(i,1)}function __(t,e){if(t.length<=Vn)return;const n=Vn+e,i=t[n];if(i){const r=i[tf];null!==r&&r!==t&&SP(r,i),e>0&&(t[n-1][N]=i[N]);const s=o_(t,Vn+e);!function Uq(t,e){_f(t,e,e[Ce],2,null,null),e[f]=null,e[de]=null}(i[p],i);const o=s[xs];null!==o&&o.detachView(s[p]),i[v]=null,i[N]=null,i[_]&=-129}return i}function h1(t,e){if(!(256&e[_])){const n=e[Ce];e[zm]?.destroy(),e[Gm]?.destroy(),n.destroyNode&&_f(t,e,n,3,null,null),function Gq(t){let e=t[ef];if(!e)return f1(t[p],t);for(;e;){let n=null;if(Bi(e))n=e[ef];else{const i=e[Vn];i&&(n=i)}if(!n){for(;e&&!e[N]&&e!==t;)Bi(e)&&f1(e[p],e),e=e[v];null===e&&(e=t),Bi(e)&&f1(e[p],e),n=e&&e[N]}e=n}}(e)}}function f1(t,e){if(!(256&e[_])){e[_]&=-129,e[_]|=256,function Yq(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof af)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];ks(4,a,l);try{l.call(a)}finally{ks(5,a,l)}}else{ks(4,r,s);try{s.call(r)}finally{ks(5,r,s)}}}}}(t,e),function Kq(t,e){const n=t.cleanup,i=e[St];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[St]=null);const r=e[Ea];if(null!==r){e[Ea]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[p].type&&e[Ce].destroy();const n=e[tf];if(null!==n&&Vi(e[v])){n!==e[v]&&SP(n,e);const i=e[xs];null!==i&&i.detachView(t)}!function Oq(t){o1.delete(t[nf])}(e)}}function p1(t,e,n){return function IP(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[f];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===Li.None||s===Li.Emulated)return null}return Hi(i,n)}}(t,e.parent,n)}function jl(t,e,n,i,r){t.insertBefore(e,n,i,r)}function AP(t,e,n){t.appendChild(e,n)}function MP(t,e,n,i,r){null!==i?jl(t,e,n,i,r):AP(t,e,n)}function y_(t,e){return t.parentNode(e)}function xP(t,e,n){return OP(t,e,n)}let g1,w_,v1,C_,OP=function NP(t,e,n){return 40&t.type?Hi(t,n):null};function v_(t,e,n,i){const r=p1(t,i,e),s=e[Ce],a=xP(i.parent||e[de],i,e);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)MP(s,r,n[l],a,!1);else MP(s,r,n,a,!1);void 0!==g1&&g1(s,i,e,n,r)}function mf(t,e){if(null!==e){const n=e.type;if(3&n)return Hi(e,t);if(4&n)return m1(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return mf(t,i);{const r=t[e.index];return Vi(r)?m1(-1,r):It(r)}}if(32&n)return u1(e,t)()||It(t[e.index]);{const i=PP(t,e);return null!==i?Array.isArray(i)?i[0]:mf(gf(t[on]),i):mf(t,e.next)}}return null}function PP(t,e){return null!==e?t[on][de].projection[e.projection]:null}function m1(t,e){const n=Vn+t+1;if(n<e.length){const i=e[n],r=i[p].firstChild;if(null!==r)return mf(i,r)}return e[Ns]}function _1(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&ii(It(a),i),n.flags|=2),32!=(32&n.flags))if(8&l)_1(t,e,n.child,i,r,s,!1),Ku(e,t,r,a,s);else if(32&l){const c=u1(n,i);let u;for(;u=c();)Ku(e,t,r,u,s);Ku(e,t,r,a,s)}else 16&l?FP(t,e,i,n,r,s):Ku(e,t,r,a,s);n=o?n.projectionNext:n.next}}function _f(t,e,n,i,r,s){_1(n,i,t.firstChild,e,r,s,!1)}function FP(t,e,n,i,r,s){const o=n[on],l=o[de].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ku(e,t,r,l[c],s);else{let c=l;const u=o[v];f_(i)&&(c.flags|=128),_1(t,e,c,u,r,s,!0)}}function LP(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function BP(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&Zh(t,e,i),null!==r&&LP(t,e,r),null!==s&&function t9(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}function Yu(t){return function y1(){if(void 0===w_&&(w_=null,dt.trustedTypes))try{w_=dt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return w_}()?.createHTML(t)||t}function Qu(){if(void 0!==v1)return v1;if(typeof document<"u")return document;throw new O(210,!1)}function b1(){if(void 0===C_&&(C_=null,dt.trustedTypes))try{C_=dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return C_}function VP(t){return b1()?.createHTML(t)||t}function $P(t){return b1()?.createScriptURL(t)||t}class zl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cm})`}}class o9 extends zl{getTypeName(){return"HTML"}}class a9 extends zl{getTypeName(){return"Style"}}class l9 extends zl{getTypeName(){return"Script"}}class c9 extends zl{getTypeName(){return"URL"}}class u9 extends zl{getTypeName(){return"ResourceURL"}}function ar(t){return t instanceof zl?t.changingThisBreaksApplicationSecurity:t}function Fs(t,e){const n=function d9(t){return t instanceof zl&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Cm})`)}return n===e}class _9{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Yu(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class y9{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=Yu(e),n}}const b9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function E_(t){return(t=String(t)).match(b9)?t:"unsafe:"+t}function Oo(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function yf(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const jP=Oo("area,br,col,hr,img,wbr"),zP=Oo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),GP=Oo("rp,rt"),w1=yf(jP,yf(zP,Oo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yf(GP,Oo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yf(GP,zP)),C1=Oo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),WP=yf(C1,Oo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),w9=Oo("script,style,template");class C9{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!w1.hasOwnProperty(n))return this.sanitizedSomething=!0,!w9.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!WP.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;C1[a]&&(l=E_(l)),this.buf.push(" ",o,'="',qP(l),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();w1.hasOwnProperty(n)&&!jP.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(qP(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const E9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D9=/([^\#-~ |!])/g;function qP(t){return t.replace(/&/g,"&amp;").replace(E9,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(D9,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let D_;function KP(t,e){let n=null;try{D_=D_||function UP(t){const e=new y9(t);return function v9(){try{return!!(new window.DOMParser).parseFromString(Yu(""),"text/html")}catch{return!1}}()?new _9(e):e}(t);let i=e?String(e):"";n=D_.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=D_.getInertBodyElement(i)}while(i!==s);return Yu((new C9).sanitizeChildren(E1(n)||n))}finally{if(n){const i=E1(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function E1(t){return"content"in t&&function T9(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var lr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(lr||{});function Ls(t){const e=vf();return e?VP(e.sanitize(lr.HTML,t)||""):Fs(t,"HTML")?VP(ar(t)):KP(Qu(),_e(t))}function D1(t){const e=vf();return e?e.sanitize(lr.URL,t)||"":Fs(t,"URL")?ar(t):E_(_e(t))}function YP(t){const e=vf();if(e)return $P(e.sanitize(lr.RESOURCE_URL,t)||"");if(Fs(t,"ResourceURL"))return $P(ar(t));throw new O(904,!1)}function vf(){const t=V();return t&&t[Ms].sanitizer}class ie{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const bf=new ie("ENVIRONMENT_INITIALIZER"),JP=new ie("INJECTOR",-1),ZP=new ie("INJECTOR_DEF_TYPES");class T1{get(e,n=kl){if(n===kl){const i=new Error(`NullInjectorError: No provider for ${sn(e)}!`);throw i.name="NullInjectorError",i}return n}}function N9(...t){return{\u0275providers:XP(0,t),\u0275fromNgModule:!0}}function XP(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return zu(e,o=>{const a=o;T_(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&eR(r,s),n}function eR(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];I1(r,s=>{e(s,i)})}}function T_(t,e,n,i){if(!(t=me(t)))return!1;let r=null,s=Cu(t);const o=!s&&Le(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const l=t.ngModule;if(s=Cu(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)T_(c,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{zu(s.imports,u=>{T_(u,e,n,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&eR(c,e)}if(!a){const c=Vl(r)||(()=>new r);e({provide:r,useFactory:c,deps:Je},r),e({provide:ZP,useValue:r,multi:!0},r),e({provide:bf,useValue:()=>$(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=t;I1(l,u=>{e(u,c)})}}}return r!==t&&void 0!==t.providers}function I1(t,e){for(let n of t)Vh(n)&&(n=n.\u0275providers),Array.isArray(n)?I1(n,e):e(n)}const O9=qe({provide:String,useValue:qe});function A1(t){return null!==t&&"object"==typeof t&&O9 in t}function Gl(t){return"function"==typeof t}const M1=new ie("Set Injector scope."),S_={},P9={};let x1;function I_(){return void 0===x1&&(x1=new T1),x1}class Ui{}class A_ extends Ui{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,O1(e,o=>this.processProvider(o)),this.records.set(JP,Ju(void 0,this)),r.has("environment")&&this.records.set(Ui,Ju(void 0,this));const s=this.records.get(M1);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ZP.multi,Je,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=As(this),i=ni(void 0);try{return e()}finally{As(n),ni(i)}}get(e,n=kl,i=xe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jh))return e[Jh](this);i=Pl(i);const s=As(this),o=ni(void 0);try{if(!(i&xe.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function V9(t){return"function"==typeof t||"object"==typeof t&&t instanceof ie}(e)&&wu(e);l=c&&this.injectableDefInScope(c)?Ju(N1(e),S_):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&xe.Self?I_():this.parent).get(e,n=i&xe.Optional&&n===kl?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Au]=a[Au]||[]).unshift(sn(e)),s)throw a;return function _w(t,e,n,i){const r=t[Au];throw e[Mm]&&r.unshift(e[Mm]),t.message=function yw(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=sn(e);if(Array.isArray(e))r=e.map(sn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):sn(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Im,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Au]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{ni(o),As(s)}}resolveInjectorInitializers(){const e=As(this),n=ni(void 0);try{const r=this.get(bf.multi,Je,xe.Self);for(const s of r)s()}finally{As(e),ni(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(sn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let n=Gl(e=me(e))?e:me(e&&e.provide);const i=function F9(t){return A1(t)?Ju(void 0,t.useValue):Ju(iR(t),S_)}(e);if(Gl(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=Ju(void 0,S_,!0),r.factory=()=>Rl(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===S_&&(n.value=P9,n.value=n.factory()),"object"==typeof n.value&&n.value&&function B9(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=me(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function N1(t){const e=wu(t),n=null!==e?e.factory:Vl(t);if(null!==n)return n;if(t instanceof ie)throw new O(204,!1);if(t instanceof Function)return function R9(t){const e=t.length;if(e>0)throw hf(e,"?"),new O(204,!1);const n=function lw(t){return t&&(t[Eu]||t[$h])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new O(204,!1)}function iR(t,e,n){let i;if(Gl(t)){const r=me(t);return Vl(r)||N1(r)}if(A1(t))i=()=>me(t.useValue);else if(function nR(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Rl(t.deps||[]));else if(function tR(t){return!(!t||!t.useExisting)}(t))i=()=>$(me(t.useExisting));else{const r=me(t&&(t.useClass||t.provide));if(!function L9(t){return!!t.deps}(t))return Vl(r)||N1(r);i=()=>new r(...Rl(t.deps))}return i}function Ju(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function O1(t,e){for(const n of t)Array.isArray(n)?O1(n,e):n&&Vh(n)?O1(n.\u0275providers,e):e(n)}const M_=new ie("AppId",{providedIn:"root",factory:()=>H9}),H9="ng",rR=new ie("Platform Initializer"),Ia=new ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sR=new ie("AnimationModuleType"),oR=new ie("CSP nonce",{providedIn:"root",factory:()=>Qu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let lR=(t,e,n)=>null;function V1(t,e,n=!1){return lR(t,e,n)}class Q9{}class dR{}class Z9{resolveComponentFactory(e){throw function J9(t){const e=Error(`No component factory found for ${sn(t)}.`);return e.ngComponent=t,e}(e)}}let Df=(()=>{class e{}return e.NULL=new Z9,e})();function X9(){return Xu(Hn(),V())}function Xu(t,e){return new Ye(Hi(t,e))}let Ye=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=X9,e})();function eK(t){return t instanceof Ye?t.nativeElement:t}class ed{}let ji=(()=>{class e{constructor(){this.destroyNode=null}}return e.__NG_ELEMENT_ID__=()=>function tK(){const t=V(),n=sr(Hn().index,t);return(Bi(n)?n:t)[Ce]}(),e})(),nK=(()=>{var t;class e{}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:()=>null}),e})();class td{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fR=new td("16.2.0"),U1={};function _R(t,e=null,n=null,i){const r=yR(t,e,n,i);return r.resolveInjectorInitializers(),r}function yR(t,e=null,n=null,i,r=new Set){const s=[n||Je,N9(t)];return i=i||("object"==typeof t?void 0:sn(t)),new A_(s,e||I_(),i||null,r)}let Rt=(()=>{var t;class e{static create(i,r){if(Array.isArray(i))return _R({name:""},r,i,"");{const s=i.name??"";return _R({name:s},i.parent,i.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=kl,t.NULL=new T1,t.\u0275prov=G({token:t,providedIn:"any",factory:()=>$(JP)}),t.__NG_ELEMENT_ID__=-1,e})();function Tf(t){return t.ownerDocument}function ko(t){return t instanceof Function?t():t}let G1=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new O(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const i of this.callbacks)i.invoke()}finally{this.runningCallbacks=!1;for(const i of this.deferredCallbacks)this.callbacks.add(i);this.deferredCallbacks.clear()}}register(i){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(i)}unregister(i){this.callbacks.delete(i),this.deferredCallbacks.delete(i)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:()=>new t}),e})();function Sf(t){for(;t;){t[_]|=64;const e=gf(t);if(Pw(t)&&!e)return t;t=e}return null}function W1(t){return t.ngOriginalError}class Wl{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&W1(e);for(;n&&W1(n);)n=W1(n);return n||null}}const ER=new ie("",{providedIn:"root",factory:()=>!1});class IR extends pk{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Sf(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,i){const r=An(this);this.trackingVersion++;try{e(n,i)}finally{An(r)}}destroy(){this.trackingVersion++}}let F_=null;function AR(){return F_??=new IR,F_}function MR(t,e){return t[e]??AR()}function xR(t,e){const n=AR();n.hasReadASignal&&(t[e]=F_,n.lView=t,F_=new IR)}const Ee={};function I(t){NR(Xe(),V(),mi()+t,!1)}function NR(t,e,n,i){if(!i)if(3==(3&e[_])){const s=t.preOrderCheckHooks;null!==s&&e_(e,s,n)}else{const s=t.preOrderHooks;null!==s&&t_(e,s,0,n)}Hl(n)}function w(t,e=xe.Default){const n=V();return null===n?$(t,e):Yk(Hn(),n,me(t),e)}function L_(t,e,n,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[f]=r,d[_]=140|i,(null!==c||t&&2048&t[_])&&(d[_]|=2048),Dk(d),d[v]=d[Ou]=t,d[Se]=n,d[Ms]=o||t&&t[Ms],d[Ce]=a||t&&t[Ce],d[pi]=l||t&&t[pi]||null,d[de]=s,d[nf]=function xq(){return Mq++}(),d[Mo]=u,d[lk]=c,d[on]=2==e.type?t[on]:d,d}function rd(t,e,n,i,r){let s=t.data[e];if(null===s)s=function q1(t,e,n,i,r){const s=xk(),o=Hw(),l=t.data[e]=function DK(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Fu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(t,e,n,i,r),function M7(){return ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function sf(){const t=ye.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ps(s,!0),s}function If(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function kR(t,e,n,i,r){const s=MR(e,zm),o=mi(),a=2&i;try{if(Hl(-1),a&&e.length>Ge&&NR(t,e,Ge,!1),ks(a?2:0,r),a)s.runInContext(n,i,r);else{const c=An(null);try{n(i,r)}finally{An(c)}}}finally{a&&null===e[zm]&&xR(e,zm),Hl(o),ks(a?3:1,r)}}function K1(t,e,n){if(kw(e)){const i=An(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{An(i)}}}function Y1(t,e,n){Mk()&&(function NK(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;Bl(n)&&function BK(t,e,n){const i=Hi(e,t),r=PR(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=B_(t,L_(t,r,null,o,i,e,null,t[Ms].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||i_(n,e),ii(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const l=t.data[a],c=$l(e,t,a,n);ii(c,e),null!==o&&VK(0,a-r,c,l,0,o),Xr(l)&&(sr(n.index,e)[Se]=$l(e,t,a,n))}}(t,e,n,Hi(n,e)),64==(64&n.flags)&&VR(t,e,n))}function Q1(t,e,n=Hi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function PR(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=J1(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function J1(t,e,n,i,r,s,o,a,l,c,u){const d=Ge+i,h=d+r,g=function yK(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Ee);return n}(d,h),m="function"==typeof c?c():c;return g[p]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}let RR=t=>null;function FR(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const s=t[r];null===i?LR(n,e,r,s):i.hasOwnProperty(r)&&LR(n,e,i[r],s)}return n}function LR(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function cr(t,e,n,i,r,s,o,a){const l=Hi(e,n);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(nC(t,n,u,i,r),Bl(e)&&function IK(t,e){const n=sr(e,t);16&n[_]||(n[_]|=64)}(n,e.index)):3&e.type&&(i=function SK(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function Z1(t,e,n,i){if(Mk()){const r=null===i?null:{"":-1},s=function kK(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Bm(e,o.selectors,!1))if(i||(i=[]),Xr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),X1(t,e,a.length)}else i.unshift(o),X1(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&BR(t,e,n,o,r,a),r&&function PK(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new O(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=Io(n.mergedAttrs,n.attrs)}function BR(t,e,n,i,r,s){for(let c=0;c<i.length;c++)Zw(i_(n,e),t,i[c].type);!function FK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=If(t,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];n.mergedAttrs=Io(n.mergedAttrs,u.hostAttrs),LK(t,n,e,l,u),RK(l,u,r),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function TK(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=n?n.get(d):null,m=h?h.outputs:null;l=FR(d.inputs,u,l,h?h.inputs:null),c=FR(d.outputs,u,c,m);const y=null===l||null===o||Fm(e)?null:HK(l,u,o);a.push(y)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,s)}function VR(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function N7(){return ye.lFrame.currentDirectiveIndex}();try{Hl(s);for(let a=i;a<r;a++){const l=t.data[a],c=e[a];Uw(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&OK(l,c)}}finally{Hl(-1),Uw(o)}}function OK(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function X1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function RK(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Xr(e)&&(n[""]=t)}}function LK(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=Vl(r.type)),o=new af(s,Xr(r),w);t.blueprint[i]=o,n[i]=o,function MK(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function xK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,If(t,n,r.hostVars,Ee),r)}function Bs(t,e,n,i,r,s){const o=Hi(t,e);!function eC(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?_e(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[Ce],o,s,t.value,n,i,r)}function VK(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)HR(i,n,o[a++],o[a++],o[a++])}function HR(t,e,n,i,r){const s=An(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==t.setInput?t.setInput(e,r,n,i):e[i]=r}finally{An(s)}}function HK(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function $R(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null,null]}function UR(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const o=t.data[s];zw(n[i]),o.contentQueries(2,e[s],s)}}}function B_(t,e){return t[ef]?t[ak][N]=e:t[ef]=e,t[ak]=e,e}function tC(t,e,n){zw(0);const i=An(null);try{e(t,n)}finally{An(i)}}function jR(t){return t[St]||(t[St]=[])}function zR(t){return t.cleanup||(t.cleanup=[])}function WR(t,e){const n=t[pi],i=n?n.get(Wl,null):null;i&&i.handleError(e)}function nC(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];HR(t.data[o],e[o],i,a,r)}}function $K(t,e){const n=sr(e,t),i=n[p];!function UK(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[f];null!==r&&null===n[Mo]&&(n[Mo]=V1(r,n[pi])),iC(i,n,n[Se])}function iC(t,e,n){Gw(e);try{const i=t.viewQuery;null!==i&&tC(1,i,n);const r=t.template;null!==r&&kR(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&UR(t,e),t.staticViewQueries&&tC(2,t.viewQuery,n);const s=t.components;null!==s&&function jK(t,e){for(let n=0;n<e.length;n++)$K(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[_]&=-5,Ww()}}let qR=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(i,r,s){const o=typeof Zone>"u"?null:Zone.current,a=new a7(i,u=>{this.all.has(u)&&this.queue.set(u,o)},s);let l;this.all.add(a),a.notify();const c=()=>{a.cleanup(),l?.(),this.all.delete(a),this.queue.delete(a)};return l=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[i,r]of this.queue)this.queue.delete(i),r?r.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:()=>new t}),e})();function V_(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Al(r,a):2==s&&(i=Al(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Af(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(It(s)),Vi(s)){for(let a=Vn;a<s.length;a++){const l=s[a],c=l[p].firstChild;null!==c&&Af(l[p],l,c,i)}s[Ns]!==s[f]&&i.push(s[Ns])}const o=n.type;if(8&o)Af(t,e,n.child,i);else if(32&o){const a=u1(n,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=PP(e,n);if(Array.isArray(a))i.push(...a);else{const l=gf(e[on]);Af(l[p],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function H_(t,e,n,i=!0){const r=e[Ms],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{KR(t,e,t.template,n)}catch(l){throw i&&WR(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function KR(t,e,n,i){const r=e[_];if(256!=(256&r)){e[Ms].effectManager?.flush(),Gw(e);try{Dk(e),function Ok(t){return ye.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&kR(t,e,n,2,i);const o=3==(3&r);if(o){const c=t.preOrderCheckHooks;null!==c&&e_(e,c,null)}else{const c=t.preOrderHooks;null!==c&&t_(e,c,0,null),qw(e,0)}if(function WK(t){for(let e=CP(t);null!==e;e=EP(e)){if(!e[ck])continue;const n=e[Pu];for(let i=0;i<n.length;i++){y7(n[i])}}}(e),YR(e,2),null!==t.contentQueries&&UR(t,e),o){const c=t.contentCheckHooks;null!==c&&e_(e,c)}else{const c=t.contentHooks;null!==c&&t_(e,c,1),qw(e,1)}!function _K(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const i=MR(e,Gm);try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)Hl(~s);else{const o=s,a=n[++r],l=n[++r];x7(a,o),i.runInContext(l,2,e[o])}}}finally{null===e[Gm]&&xR(e,Gm),Hl(-1)}}(t,e);const a=t.components;null!==a&&JR(e,a,0);const l=t.viewQuery;if(null!==l&&tC(2,l,i),o){const c=t.viewCheckHooks;null!==c&&e_(e,c)}else{const c=t.viewHooks;null!==c&&t_(e,c,2),qw(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[_]&=-73,Tk(e)}finally{Ww()}}}function YR(t,e){for(let n=CP(t);null!==n;n=EP(n))for(let i=Vn;i<n.length;i++)QR(n[i],e)}function qK(t,e,n){QR(sr(e,t),n)}function QR(t,e){if(!function m7(t){return 128==(128&t[_])}(t))return;const n=t[p];if(80&t[_]&&0===e||1024&t[_]||2===e)KR(n,t,n.template,t[Se]);else if(t[ae]>0){YR(t,1);const r=t[p].components;null!==r&&JR(t,r,1)}}function JR(t,e,n){for(let i=0;i<e.length;i++)qK(t,e[i],n)}class Mf{get rootNodes(){const e=this._lView,n=e[p];return Af(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Se]}set context(e){this._lView[Se]=e}get destroyed(){return 256==(256&this._lView[_])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[v];if(Vi(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(__(e,i),o_(n,i))}this._attachedToViewContainer=!1}h1(this._lView[p],this._lView)}onDestroy(e){!function Ik(t,e){if(256==(256&t[_]))throw new O(911,!1);null===t[Ea]&&(t[Ea]=[]),t[Ea].push(e)}(this._lView,e)}markForCheck(){Sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[_]&=-129}reattach(){this._lView[_]|=128}detectChanges(){H_(this._lView[p],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zq(t,e){_f(t,e,e[Ce],2,null,null)}(this._lView[p],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}}class KK extends Mf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;H_(e[p],e,e[Se],!1)}checkNoChanges(){}get context(){return null}}class ZR extends Df{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Le(e);return new xf(n,this.ngModule)}}function XR(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class QK{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Pl(i);const r=this.injector.get(e,U1,i);return r!==U1||n===U1?r:this.parentInjector.get(e,n,i)}}class xf extends dR{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=XR(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return XR(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Hm(t){return t.map(Ao).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=(r=r||this.ngModule)instanceof Ui?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new QK(e,s):e,a=o.get(ed,null);if(null===a)throw new O(407,!1);const d={rendererFactory:a,sanitizer:o.get(nK,null),effectManager:o.get(qR,null),afterRenderEventManager:o.get(G1,null)},h=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=i?function vK(t,e,n,i){const s=i.get(ER,!1)||n===Li.ShadowDom,o=t.selectRootElement(e,s);return function bK(t){RR(t)}(o),o}(h,i,this.componentDef.encapsulation,o):m_(h,g,function YK(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g)),C=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let E=null;null!==m&&(E=V1(m,o,!0));const R=J1(0,null,null,1,0,null,null,null,null,null,null),B=L_(null,R,null,C,null,null,d,h,o,null,E);let j,se;Gw(B);try{const ce=this.componentDef;let Y,Ae=null;ce.findHostDirectiveDefs?(Y=[],Ae=new Map,ce.findHostDirectiveDefs(ce,Y,Ae),Y.push(ce)):Y=[ce];const We=function ZK(t,e){const n=t[p],i=Ge;return t[i]=e,rd(n,i,2,"#host",null)}(B,m),qt=function XK(t,e,n,i,r,s,o){const a=r[p];!function eY(t,e,n,i){for(const r of t)e.mergedAttrs=Io(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(V_(e,e.mergedAttrs,!0),null!==n&&BP(i,n,e))}(i,t,e,o);let l=null;null!==e&&(l=V1(e,r[pi]));const c=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=L_(r,PR(n),null,u,r[t.index],t,s,c,null,null,l);return a.firstCreatePass&&X1(a,t,i.length-1),B_(r,d),r[t.index]=d}(We,m,ce,Y,B,d,h);se=Ek(R,Ge),m&&function nY(t,e,n,i){if(i)Zh(t,n,["ng-version",fR.full]);else{const{attrs:r,classes:s}=function Sw(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!rr(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&Zh(t,n,r),s&&s.length>0&&LP(t,n,s.join(" "))}}(h,ce,m,i),void 0!==n&&function iY(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(se,this.ngContentSelectors,n),j=function tY(t,e,n,i,r,s){const o=Hn(),a=r[p],l=Hi(o,r);BR(a,r,o,n,null,i);for(let u=0;u<n.length;u++)ii($l(r,a,o.directiveStart+u,o),r);VR(a,r,o),l&&ii(l,r);const c=$l(r,a,o.directiveStart+o.componentOffset,o);if(t[Se]=r[Se]=c,null!==s)for(const u of s)u(c,e);return K1(a,o,t),c}(qt,ce,Y,Ae,B,[rY]),iC(R,B,null)}finally{Ww()}return new JK(this.componentType,j,Xu(se,B),B,se)}}class JK extends Q9{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new KK(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;nC(s[p],s,r,e,n),this.previousInputValues.set(e,n),Sf(sr(this._tNode.index,s))}}get injector(){return new _i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function rY(){const t=Hn();Xm(V()[p],t)}function ht(t){let e=function e2(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(Xr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=$_(t.inputs),o.inputTransforms=$_(t.inputTransforms),o.declaredInputs=$_(t.declaredInputs),o.outputs=$_(t.outputs);const a=r.hostBindings;a&&lY(t,a);const l=r.viewQuery,c=r.contentQueries;if(l&&oY(t,l),c&&aY(t,c),Il(t.inputs,r.inputs),Il(t.declaredInputs,r.declaredInputs),Il(t.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Il(o.inputTransforms,r.inputTransforms)),Xr(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===ht&&(n=!1)}}e=Object.getPrototypeOf(e)}!function sY(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Io(r.hostAttrs,n=Io(n,r.hostAttrs))}}(i)}function $_(t){return t===Mr?{}:t===Je?[]:t}function oY(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function aY(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function lY(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function r2(t){const e=t.inputConfig,n={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(n[i]=r[2])}t.inputTransforms=n}function U_(t){return!!rC(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function rC(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Vs(t,e,n){return t[e]=n}function ri(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function et(t,e,n,i){const r=V();return ri(r,Lu(),e)&&(Xe(),Bs(Ht(),r,t,e,n,i)),et}function od(t,e,n,i){return ri(t,Lu(),n)?e+_e(n)+i:Ee}function L(t,e,n,i,r,s,o,a){const l=V(),c=Xe(),u=t+Ge,d=c.firstCreatePass?function OY(t,e,n,i,r,s,o,a,l){const c=e.consts,u=rd(e,t,4,o||null,Da(c,a));Z1(e,n,u,Da(c,l)),Xm(e,u);const d=u.tView=J1(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,i,r,s,o):c.data[u];Ps(d,!1);const h=_2(c,l,d,t);Zm()&&v_(c,l,h,d),ii(h,l),B_(l,l[u]=$R(h,l,h,d)),qm(d)&&Y1(c,l,d),null!=o&&Q1(l,d,a)}let _2=function y2(t,e,n,i){return Ta(!0),e[Ce].createComment("")};function A(t,e,n){const i=V();return ri(i,Lu(),e)&&cr(Xe(),Ht(),i,t,e,i[Ce],n,!1),A}function uC(t,e,n,i,r){const o=r?"class":"style";nC(t,n,e.inputs[o],o,i)}function x(t,e,n,i){const r=V(),s=Xe(),o=Ge+t,a=r[Ce],l=s.firstCreatePass?function FY(t,e,n,i,r,s){const o=e.consts,l=rd(e,t,2,i,Da(o,r));return Z1(e,n,l,Da(o,s)),null!==l.attrs&&V_(l,l.attrs,!1),null!==l.mergedAttrs&&V_(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,n,i):s.data[o],c=v2(s,r,l,a,e,t);r[o]=c;const u=qm(l);return Ps(l,!0),BP(a,c,l),32!=(32&l.flags)&&Zm()&&v_(s,r,c,l),0===function b7(){return ye.lFrame.elementDepthCount}()&&ii(c,r),function w7(){ye.lFrame.elementDepthCount++}(),u&&(Y1(s,r,l),K1(s,l,r)),null!==i&&Q1(r,l),x}function M(){let t=Hn();Hw()?$w():(t=t.parent,Ps(t,!1));const e=t;(function E7(t){return ye.skipHydrationRootTNode===t})(e)&&function I7(){ye.skipHydrationRootTNode=null}(),function C7(){ye.lFrame.elementDepthCount--}();const n=Xe();return n.firstCreatePass&&(Xm(n,t),kw(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function U7(t){return 0!=(8&t.flags)}(e)&&uC(n,e,V(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function j7(t){return 0!=(16&t.flags)}(e)&&uC(n,e,V(),e.stylesWithoutHost,!1),M}function ue(t,e,n,i){return x(t,e,n,i),M(),ue}let v2=(t,e,n,i,r,s)=>(Ta(!0),m_(i,r,function Hk(){return ye.lFrame.currentNamespace}()));function ur(t,e,n){const i=V(),r=Xe(),s=t+Ge,o=r.firstCreatePass?function VY(t,e,n,i,r){const s=e.consts,o=Da(s,i),a=rd(e,t,8,"ng-container",o);return null!==o&&V_(a,o,!0),Z1(e,n,a,Da(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];Ps(o,!0);const a=b2(r,i,o,t);return i[s]=a,Zm()&&v_(r,i,a,o),ii(a,i),qm(o)&&(Y1(r,i,o),K1(r,o,i)),null!=n&&Q1(i,o),ur}function dr(){let t=Hn();const e=Xe();return Hw()?$w():(t=t.parent,Ps(t,!1)),e.firstCreatePass&&(Xm(e,t),kw(t)&&e.queries.elementEnd(t)),dr}function dC(t,e,n){return ur(t,e,n),dr(),dC}let b2=(t,e,n,i)=>(Ta(!0),d1(e[Ce],""));function wt(){return V()}function Ff(t){return!!t&&"function"==typeof t.then}function w2(t){return!!t&&"function"==typeof t.subscribe}function X(t,e,n,i){const r=V(),s=Xe(),o=Hn();return function E2(t,e,n,i,r,s,o){const a=qm(i),c=t.firstCreatePass&&zR(t),u=e[Se],d=jR(e);let h=!0;if(3&i.type||o){const y=Hi(i,e),b=o?o(y):y,C=d.length,E=o?B=>o(It(B[i.index])):i.index;let R=null;if(!o&&a&&(R=function UY(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[St],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==R)(R.__ngLastListenerFn__||R).__ngNextListenerFn__=s,R.__ngLastListenerFn__=s,h=!1;else{s=T2(i,e,u,s,!1);const B=n.listen(b,r,s);d.push(s,B),c&&c.push(r,E,C,C+1)}}else s=T2(i,e,u,s,!1);const g=i.outputs;let m;if(h&&null!==g&&(m=g[r])){const y=m.length;if(y)for(let b=0;b<y;b+=2){const j=e[m[b]][m[b+1]].subscribe(s),se=d.length;d.push(s,j),c&&c.push(r,i.index,se,-(se+1))}}}(s,r,r[Ce],o,t,e,i),X}function D2(t,e,n,i){try{return ks(6,e,n),!1!==n(i)}catch(r){return WR(t,r),!1}finally{ks(7,e,n)}}function T2(t,e,n,i,r){return function s(o){if(o===Function)return i;Sf(t.componentOffset>-1?sr(t.index,e):e);let l=D2(e,n,i,o),c=s.__ngNextListenerFn__;for(;c;)l=D2(e,n,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function F(t=1){return function k7(t){return(ye.lFrame.contextLView=function P7(t,e){for(;t>0;)e=e[Ou],t--;return e}(t,ye.lFrame.contextLView))[Se]}(t)}function jY(t,e){let n=null;const i=function Cw(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Bm(t,s,!0):Tw(i,s))return r}else n=r}return n}function hC(t){const e=V()[on][de];if(!e.projection){const i=e.projection=hf(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?jY(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function fC(t,e=0,n){const i=V(),r=Xe(),s=rd(r,Ge+t,16,null,n||null);null===s.projection&&(s.projection=e),$w(),(!i[Mo]||Fu())&&32!=(32&s.flags)&&function Zq(t,e,n){FP(e[Ce],0,e,n,p1(t,n,e),xP(n.parent||e[de],n,e))}(r,i,s)}function Lf(t,e,n){return q_(t,"",e,"",n),Lf}function q_(t,e,n,i,r){const s=V(),o=od(s,e,n,i);return o!==Ee&&cr(Xe(),Ht(),s,t,o,s[Ce],r,!1),q_}function K_(t,e){return t<<17|e<<2}function Aa(t){return t>>17&32767}function pC(t){return 2|t}function Kl(t){return(131068&t)>>2}function gC(t,e){return-131069&t|e<<2}function mC(t){return 1|t}function P2(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?Aa(s):Kl(s),l=!1;for(;0!==a&&(!1===l||o);){const u=t[a+1];YY(t[a],e)&&(l=!0,t[a+1]=i?mC(u):pC(u)),a=i?Aa(u):Kl(u)}l&&(t[n+1]=i?pC(s):mC(s))}function YY(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Gu(t,e)>=0}const wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function R2(t){return t.substring(wn.key,wn.keyEnd)}function F2(t,e){const n=wn.textEnd;return n===e?-1:(e=wn.keyEnd=function XY(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,wn.key=e,n),pd(t,e,n))}function pd(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Yl(t,e,n){return ts(t,e,n,!1),Yl}function Ue(t,e){return ts(t,e,null,!0),Ue}function $t(t){!function ns(t,e,n,i){const r=Xe(),s=No(2);r.firstUpdatePass&&U2(r,null,s,i);const o=V();if(n!==Ee&&ri(o,s,n)){const a=r.data[mi()];if(W2(a,i)&&!$2(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Al(l,n||"")),uC(r,a,o,n,i)}else!function cQ(t,e,n,i,r,s,o,a){r===Ee&&(r=Je);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=l<r.length?r[l+1]:void 0,g=c<s.length?s[c+1]:void 0;let y,m=null;u===d?(l+=2,c+=2,h!==g&&(m=d,y=g)):null===d||null!==u&&u<d?(l+=2,m=u):(c+=2,m=d,y=g),null!==m&&z2(t,e,n,i,m,y,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[Ce],o[s+1],o[s+1]=function aQ(t,e,n){if(null==n||""===n)return Je;const i=[],r=ar(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}(lQ,$s,t,!0)}function $s(t,e){for(let n=function JY(t){return function B2(t){wn.key=0,wn.keyEnd=0,wn.value=0,wn.valueEnd=0,wn.textEnd=t.length}(t),F2(t,pd(t,0,wn.textEnd))}(e);n>=0;n=F2(e,n))or(t,R2(e),!0)}function ts(t,e,n,i){const r=V(),s=Xe(),o=No(2);s.firstUpdatePass&&U2(s,t,o,i),e!==Ee&&ri(r,o,e)&&z2(s,s.data[mi()],r,r[Ce],t,r[o+1]=function uQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=sn(ar(t)))),t}(e,n),i,o)}function $2(t,e){return e>=t.expandoStartIndex}function U2(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[mi()],o=$2(t,n);W2(s,i)&&null===e&&!o&&(e=!1),e=function iQ(t,e,n,i){const r=jw(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Bf(n=_C(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=_C(r,t,e,n,i),null===s){let l=function rQ(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Kl(i))return t[Aa(i)]}(t,e,i);void 0!==l&&Array.isArray(l)&&(l=_C(null,t,e,l[1],i),l=Bf(l,e.attrs,i),function sQ(t,e,n,i){t[Aa(n?e.classBindings:e.styleBindings)]=i}(t,e,i,l))}else s=function oQ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Bf(i,t[s].hostAttrs,n);return Bf(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function qY(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Aa(o),l=Kl(o);t[i]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Gu(n,u)>0)&&(c=!0)):u=n,r)if(0!==l){const h=Aa(t[a+1]);t[i+1]=K_(h,a),0!==h&&(t[h+1]=gC(t[h+1],i)),t[a+1]=function GY(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=K_(a,0),0!==a&&(t[a+1]=gC(t[a+1],i)),a=i;else t[i+1]=K_(l,0),0===a?a=i:t[l+1]=gC(t[l+1],i),l=i;c&&(t[i+1]=pC(t[i+1])),P2(t,u,i,!0),P2(t,u,i,!1),function KY(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Gu(s,e)>=0&&(n[i+1]=mC(n[i+1]))}(e,u,t,i,s),o=K_(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function _C(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=Bf(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Bf(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),or(t,o,!!n||e[++s]))}return void 0===t?null:t}function lQ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&or(t,i,n)}function z2(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function WY(t){return 1==(1&t)}(c)?G2(l,e,n,r,Kl(c),o):void 0;Y_(u)||(Y_(s)||function zY(t){return 2==(2&t)}(c)&&(s=G2(l,null,n,r,a,o)),function e9(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:Sa.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Sa.Important),t.setStyle(n,i,r,s))}}(i,o,Jm(mi(),n),r,s))}function G2(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=n[r+1];h===Ee&&(h=d?Je:void 0);let g=d?t1(h,i):u===i?h:void 0;if(c&&!Y_(g)&&(g=t1(l,i)),Y_(g)&&(a=g,o))return a;const m=t[r+1];r=o?Aa(m):Kl(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=t1(l,i))}return a}function Y_(t){return void 0!==t}function W2(t,e){return 0!=(t.flags&(e?8:16))}function ee(t,e=""){const n=V(),i=Xe(),r=t+Ge,s=i.firstCreatePass?rd(i,r,1,e,null):i.data[r],o=q2(i,n,s,e,t);n[r]=o,Zm()&&v_(i,n,o,s),Ps(s,!1)}let q2=(t,e,n,i,r)=>(Ta(!0),function g_(t,e){return t.createText(e)}(e[Ce],i));function Ut(t){return Cn("",t,""),Ut}function Cn(t,e,n){const i=V(),r=od(i,t,e,n);return r!==Ee&&function Po(t,e,n){const i=Jm(e,t);!function TP(t,e,n){t.setValue(e,n)}(t[Ce],i,n)}(i,mi(),r),Cn}function Or(t,e,n){const i=V();return ri(i,Lu(),e)&&cr(Xe(),Ht(),i,t,e,i[Ce],n,!0),Or}function yC(t,e,n){const i=V();if(ri(i,Lu(),e)){const s=Xe(),o=Ht();cr(s,o,i,t,e,function GR(t,e,n){return(null===t||Xr(t))&&(n=function f7(t){for(;Array.isArray(t);){if("object"==typeof t[Ow])return t;t=t[f]}return null}(n[e.index])),n[Ce]}(jw(s.data),o,i),n,!0)}return yC}const Ql=void 0;var OQ=["en",[["a","p"],["AM","PM"],Ql],[["AM","PM"],Ql,Ql],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ql,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ql,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ql,"{1} 'at' {0}",Ql],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function NQ(t){const n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===i?1:5}];let gd={};function vi(t){const e=function kQ(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=hF(e);if(n)return n;const i=e.split("-")[0];if(n=hF(i),n)return n;if("en"===i)return OQ;throw new O(701,!1)}function hF(t){return t in gd||(gd[t]=dt.ng&&dt.ng.common&&dt.ng.common.locales&&dt.ng.common.locales[t]),gd[t]}var At=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(At||{});const md="en-US";let fF=md;function wC(t,e,n,i,r){if(t=me(t),Array.isArray(t))for(let s=0;s<t.length;s++)wC(t[s],e,n,i,r);else{const s=Xe(),o=V(),a=Hn();let l=Gl(t)?t:me(t.provide);const c=iR(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Gl(t)||!t.multi){const g=new af(c,r,w),m=EC(l,e,r?u:u+h,d);-1===m?(Zw(i_(a,o),s,l),CC(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[m]=g,o[m]=g)}else{const g=EC(l,e,u+h,d),m=EC(l,e,u,u+h),b=m>=0&&n[m];if(r&&!b||!r&&!(g>=0&&n[g])){Zw(i_(a,o),s,l);const C=function xJ(t,e,n,i,r){const s=new af(t,n,w);return s.multi=[],s.index=e,s.componentProviders=0,BF(s,r,i&&!n),s}(r?MJ:AJ,n.length,r,i,c);!r&&b&&(n[m].providerFactory=C),CC(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(C),o.push(C)}else CC(s,t,g>-1?g:m,BF(n[r?m:g],c,!r&&i));!r&&i&&b&&n[m].componentProviders++}}}function CC(t,e,n,i){const r=Gl(e),s=function k9(t){return!!t.useClass}(e);if(r||s){const l=(s?me(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function BF(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function EC(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function AJ(t,e,n,i){return DC(this.multi,[])}function MJ(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=$l(n,n[p],this.providerFactory.index,i);s=a.slice(0,o),DC(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],DC(r,s);return s}function DC(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function _t(t,e=[]){return n=>{n.providersResolver=(i,r)=>function IJ(t,e,n){const i=Xe();if(i.firstCreatePass){const r=Xr(t);wC(n,i.data,i.blueprint,r,!0),wC(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}class Jl{}class VF{}class TC extends Jl{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZR(this);const r=fi(e);this._bootstrapComponents=ko(r.bootstrap),this._r3Injector=yR(e,n,[{provide:Jl,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...i],sn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class SC extends VF{constructor(e){super(),this.moduleType=e}create(e){return new TC(this.moduleType,e,[])}}class HF extends Jl{constructor(e){super(),this.componentFactoryResolver=new ZR(this),this.instance=null;const n=new A_([...e.providers,{provide:Jl,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],e.parent||I_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function IC(t,e,n=null){return new HF({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let kJ=(()=>{var t;class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const r=XP(0,i.type),s=r.length>0?IC([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}}return(t=e).\u0275prov=G({token:t,providedIn:"environment",factory:()=>new t($(Ui))}),e})();function Gi(t){t.getStandaloneInjector=e=>e.get(kJ).getOrCreateStandaloneInjector(t)}function Zl(t,e,n,i){return qF(V(),gi(),t,e,n,i)}function Ma(t,e,n,i,r){return function KF(t,e,n,i,r,s,o){const a=e+n;return function ql(t,e,n,i){const r=ri(t,e,n);return ri(t,e+1,i)||r}(t,a,r,s)?Vs(t,a+2,o?i.call(o,r,s):i(r,s)):Gf(t,a+2)}(V(),gi(),t,e,n,i,r)}function Gf(t,e){const n=t[e];return n===Ee?void 0:n}function qF(t,e,n,i,r,s){const o=e+n;return ri(t,o,r)?Vs(t,o+1,s?i.call(s,r):i(r)):Gf(t,o+1)}function Ro(t,e){const n=Xe();let i;const r=t+Ge;n.firstCreatePass?(i=function YJ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=Vl(i.type)),a=ni(w);try{const l=n_(!1),c=s();return n_(l),function RY(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,V(),r,c),c}finally{ni(a)}}function Fo(t,e,n){const i=t+Ge,r=V(),s=Ru(r,i);return function Wf(t,e){return t[p].data[e].pure}(r,i)?qF(r,gi(),e,s.transform,n,s):s.transform(n)}function xC(t){return e=>{setTimeout(t,void 0,e)}}const le=class eZ extends ge{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=xC(s),r&&(r=xC(r)),o&&(o=xC(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof dn&&e.add(a),a}};function tZ(){return this._results[Symbol.iterator]()}class NC{get changes(){return this._changes||(this._changes=new le)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=NC.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=tZ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function xr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function iq(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function iZ(t,e,n,i=!0){const r=e[p];if(function Wq(t,e,n,i){const r=Vn+i,s=n.length;i>0&&(n[r-1][N]=e),i<s-Vn?(e[N]=n[r],tP(n,Vn+i,e)):(n.push(e),e[N]=null),e[v]=n;const o=e[tf];null!==o&&n!==o&&function qq(t,e){const n=t[Pu];e[on]!==e[v][v][on]&&(t[ck]=!0),null===n?t[Pu]=[e]:n.push(e)}(o,e);const a=e[xs];null!==a&&a.insertView(t),e[_]|=128}(r,e,t,n),i){const s=m1(n,t),o=e[Ce],a=y_(o,t[Ns]);null!==a&&function jq(t,e,n,i,r,s){i[f]=r,i[de]=e,_f(t,i,n,1,r,s)}(r,t[de],o,e,a,s)}}let jt=(()=>{class e{}return e.__NG_ELEMENT_ID__=oZ,e})();const rZ=jt,sZ=class extends rZ{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=function nZ(t,e,n,i){const r=e.tView,a=L_(t,r,n,4096&t[_]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[tf]=t[e.index];const c=t[xs];return null!==c&&(a[xs]=c.createEmbeddedView(r)),iC(r,a,n),a}(this._declarationLView,this._declarationTContainer,e,{injector:n,hydrationInfo:i});return new Mf(r)}};function oZ(){return ey(Hn(),V())}function ey(t,e){return 4&t.type?new sZ(e,t,Xu(t,e)):null}let kr=(()=>{class e{}return e.__NG_ELEMENT_ID__=hZ,e})();function hZ(){return rL(Hn(),V())}const fZ=kr,nL=class extends fZ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Xu(this._hostTNode,this._hostLView)}get injector(){return new _i(this._hostTNode,this._hostLView)}get parentInjector(){const e=r_(this._hostTNode,this._hostLView);if(Yw(e)){const n=cf(e,this._hostLView),i=lf(e);return new _i(n[p].data[i+8],n)}return new _i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=iL(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,n,i,r,s){const o=e&&!function df(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const y=n||{};a=y.index,i=y.injector,r=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}const l=o?e:new xf(Le(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const b=(o?c:this.parentInjector).get(Ui,null);b&&(s=b)}Le(l.componentType??{});const g=l.create(c,r,null,s);return this.insertImpl(g.hostView,a,false),g}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,i){const r=e._lView;if(function _7(t){return Vi(t[v])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[v],u=new nL(c,c[de],c[v]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;return iZ(a,r,o,!i),e.attachToViewContainerRef(),tP(OC(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=iL(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=__(this._lContainer,n);i&&(o_(OC(this._lContainer),n),h1(i[p],i))}detach(e){const n=this._adjustIndex(e,-1),i=__(this._lContainer,n);return i&&null!=o_(OC(this._lContainer),n)?new Mf(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function iL(t){return t[8]}function OC(t){return t[8]||(t[8]=[])}function rL(t,e){let n;const i=e[t.index];return Vi(i)?n=i:(n=$R(i,e,null,t),e[t.index]=n,B_(e,n)),sL(n,e,t,i),new nL(n,t,e)}let sL=function oL(t,e,n,i){if(t[Ns])return;let r;r=8&n.type?It(i):function pZ(t,e){const n=t[Ce],i=n.createComment(""),r=Hi(e,t);return jl(n,y_(n,r),i,function Jq(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Ns]=r};class kC{constructor(e){this.queryList=e,this.matches=null}clone(){return new kC(this.queryList)}setDirty(){this.queryList.setDirty()}}class PC{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new PC(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==dL(e,n).matches&&this.queries[n].setDirty()}}class aL{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class RC{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new RC(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class FC{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new FC(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,_Z(n,s)),this.matchTNodeWithReadOption(e,n,s_(n,e,s,!1,!1))}else i===jt?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,s_(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Ye||r===kr||r===jt&&4&n.type)this.addMatch(n.index,-2);else{const s=s_(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function _Z(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function vZ(t,e,n,i){return-1===n?function yZ(t,e){return 11&t.type?Xu(t,e):4&t.type?ey(t,e):null}(e,t):-2===n?function bZ(t,e,n){return n===Ye?Xu(e,t):n===jt?ey(e,t):n===kr?rL(e,t):void 0}(t,e,i):$l(t,t[p],n,e)}function lL(t,e,n,i){const r=e[xs].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:vZ(e,s[c],o[l+1],n.metadata.read))}r.matches=a}return r.matches}function LC(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=lL(t,e,r,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Vn;d<u.length;d++){const h=u[d];h[tf]===h[v]&&LC(h[p],h,c,i)}if(null!==u[Pu]){const d=u[Pu];for(let h=0;h<d.length;h++){const g=d[h];LC(g[p],g,c,i)}}}}}return i}function nt(t){const e=V(),n=Xe(),i=Pk();zw(i+1);const r=dL(n,i);if(t.dirty&&function g7(t){return 4==(4&t[_])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?LC(n,e,i,[]):lL(n,e,r,i);t.reset(s,eK),t.notifyOnChanges()}return!0}return!1}function is(t,e,n){const i=Xe();i.firstCreatePass&&(uL(i,new aL(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),cL(i,V(),e)}function zt(t,e,n,i){const r=Xe();if(r.firstCreatePass){const s=Hn();uL(r,new aL(e,n,i),s.index),function CZ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}cL(r,V(),n)}function it(){return function wZ(t,e){return t[xs].queries[e].queryList}(V(),Pk())}function cL(t,e,n){const i=new NC(4==(4&n));(function EK(t,e,n,i){const r=jR(e);r.push(n),t.firstCreatePass&&zR(t).push(i,r.length-1)})(t,e,i,i.destroy),null===e[xs]&&(e[xs]=new PC),e[xs].queries.push(new kC(i))}function uL(t,e,n){null===t.queries&&(t.queries=new RC),t.queries.track(new FC(e,n))}function dL(t,e){return t.queries.getByIndex(e)}function Wi(t,e){return ey(t,e)}const jC=new ie("Application Initializer");let zC=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=J(jC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const s of this.appInits){const o=s();if(Ff(o))i.push(o);else if(w2(o)){const a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),0===i.length&&r(),this.initialized=!0}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),AL=(()=>{var t;class e{log(i){console.log(i)}warn(i){console.warn(i)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();const rs=new ie("LocaleId",{providedIn:"root",factory:()=>J(rs,xe.Optional|xe.SkipSelf)||function jZ(){return typeof $localize<"u"&&$localize.locale||md}()});let ML=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ot(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class WZ{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let xL=(()=>{var t;class e{compileModuleSync(i){return new SC(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const r=this.compileModuleSync(i),o=ko(fi(i).declarations).reduce((a,l)=>{const c=Le(l);return c&&a.push(new xf(c)),a},[]);return new WZ(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function PL(...t){}class Fe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new le(!1),this.onMicrotaskEmpty=new le(!1),this.onStable=new le(!1),this.onError=new le(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function hX(){const t="function"==typeof dt.requestAnimationFrame;let e=dt[t?"requestAnimationFrame":"setTimeout"],n=dt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function gX(t){const e=()=>{!function pX(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,KC(t),t.isCheckStableRunning=!0,qC(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),KC(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return RL(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),FL(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return RL(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),FL(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,KC(t),qC(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fe.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(Fe.isInAngularZone())throw new O(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,fX,PL,PL);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const fX={};function qC(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function KC(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function RL(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function FL(t){t._nesting--,qC(t)}class mX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new le,this.onMicrotaskEmpty=new le,this.onStable=new le,this.onError=new le}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const LL=new ie("",{providedIn:"root",factory:BL});function BL(){const t=J(Fe);let e=!0;return function vm(...t){const e=ya(t),n=function K0(t,e){return"number"==typeof Rh(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?rn(i[0]):Ar(n)(hn(i,e)):di}(new ut(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),new ut(r=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Fh()))}const VL=new ie(""),ry=new ie("");let JC,YC=(()=>{var t;class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,JC||(function _X(t){JC=t}(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}}return(t=e).\u0275fac=function(i){return new(i||t)($(Fe),$(QC),$(ry))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})(),QC=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return JC?.findTestabilityInTree(this,i,r)??null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),xa=null;const HL=new ie("AllowMultipleToken"),ZC=new ie("PlatformDestroyListeners"),XC=new ie("appBootstrapListener");class UL{constructor(e,n){this.name=e,this.token=n}}function zL(t,e,n=[]){const i=`Platform: ${e}`,r=new ie(i);return(s=[])=>{let o=eE();if(!o||o.injector.get(HL,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function bX(t){if(xa&&!xa.get(HL,!1))throw new O(400,!1);(function $L(){!function s7(t){gk=t}(()=>{throw new O(600,!1)})})(),xa=t;const e=t.get(WL);(function jL(t){t.get(rR,null)?.forEach(n=>n())})(t)}(function GL(t=[],e){return Rt.create({name:e,providers:[{provide:M1,useValue:"platform"},{provide:ZC,useValue:new Set([()=>xa=null])},...t]})}(a,i))}return function CX(t){const e=eE();if(!e)throw new O(401,!1);return e}()}}function eE(){return xa?.get(WL)??null}let WL=(()=>{var t;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const s=function EX(t="zone.js",e){return"noop"===t?new mX:"zone.js"===t?new Fe(e):t}(r?.ngZone,function qL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{const o=function OJ(t,e,n){return new TC(t,e,n)}(i.moduleType,this.injector,function ZL(t){return[{provide:Fe,useFactory:t},{provide:bf,multi:!0,useFactory:()=>{const e=J(TX,{optional:!0});return()=>e.initialize()}},{provide:JL,useFactory:DX},{provide:LL,useFactory:BL}]}(()=>s)),a=o.injector.get(Wl,null);return s.runOutsideAngular(()=>{const l=s.onError.subscribe({next:c=>{a.handleError(c)}});o.onDestroy(()=>{sy(this._modules,o),l.unsubscribe()})}),function KL(t,e,n){try{const i=n();return Ff(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(a,s,()=>{const l=o.injector.get(zC);return l.runInitializers(),l.donePromise.then(()=>(function pF(t){Ri(t,"Expected localeId to be defined"),"string"==typeof t&&(fF=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(rs,md)||md),this._moduleDoBootstrap(o),o))})})}bootstrapModule(i,r=[]){const s=YL({},r);return function yX(t,e,n){const i=new SC(n);return Promise.resolve(i)}(0,0,i).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(i){const r=i.injector.get(Pr);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!i.instance.ngDoBootstrap)throw new O(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(ZC,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(i){return new(i||t)($(Rt))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function YL(t,e){return Array.isArray(e)?e.reduce(YL,t):{...t,...e}}let Pr=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=J(JL),this.zoneIsStable=J(LL),this.componentTypes=[],this.components=[],this.isStable=J(ML).hasPendingTasks.pipe(Pi(i=>i?fe(!1):this.zoneIsStable),function bm(t,e=Me){return t=t??X0,gt((n,i)=>{let r,s=!0;n.subscribe(Qe(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}(),Fh()),this._injector=J(Ui)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const s=i instanceof dR;if(!this._injector.get(zC).done)throw!s&&function Ca(t){const e=Le(t)||Be(t)||Bn(t);return null!==e&&e.standalone}(i),new O(405,!1);let a;a=s?i:this._injector.get(Df).resolveComponentFactory(i),this.componentTypes.push(a.componentType);const l=function vX(t){return t.isBoundToModule}(a)?void 0:this._injector.get(Jl),u=a.create(Rt.NULL,[],r||a.selector,l),d=u.location.nativeElement,h=u.injector.get(VL,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),sy(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;sy(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(XC,[]);r.push(...this._bootstrapListeners),r.forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>sy(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new O(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function sy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const JL=new ie("",{providedIn:"root",factory:()=>J(Wl).handleError.bind(void 0)});function DX(){const t=J(Fe),e=J(Wl);return n=>t.runOutsideAngular(()=>e.handleError(n))}let TX=(()=>{var t;class e{constructor(){this.zone=J(Fe),this.applicationRef=J(Pr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();let ss=(()=>{class e{}return e.__NG_ELEMENT_ID__=IX,e})();function IX(t){return function AX(t,e,n){if(Bl(t)&&!n){const i=sr(t.index,e);return new Mf(i,i)}return 47&t.type?new Mf(e[on],e):null}(Hn(),V(),16==(16&t))}class nB{constructor(){}supports(e){return U_(e)}create(e){return new PX(e)}}const kX=(t,e)=>e;class PX{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kX}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<rB(i,r,s)?n:i,a=rB(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const g=h<s.length?s[h]:s[h]=0,m=g+h;u<=m&&m<c&&(s[h]=g+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!U_(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function pY(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new RX(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new iB),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class RX{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FX{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class iB{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new FX,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rB(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class sB{constructor(){}supports(e){return e instanceof Map||rC(e)}create(){return new LX}}class LX{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||rC(e)))throw new O(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{const s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,n);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new BX(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}}class BX{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function oB(){return new ly([new nB])}let ly=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(null!=r){const s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||oB()),deps:[[e,new l_,new yi]]}}find(i){const r=this.factories.find(s=>s.supports(i));if(null!=r)return r;throw new O(901,!1)}}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:oB}),e})();function aB(){return new Yf([new sB])}let Yf=(()=>{var t;class e{constructor(i){this.factories=i}static create(i,r){if(r){const s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||aB()),deps:[[e,new l_,new yi]]}}find(i){const r=this.factories.find(s=>s.supports(i));if(r)return r;throw new O(901,!1)}}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:aB}),e})();const $X=zL(null,"core",[]);let UX=(()=>{var t;class e{constructor(i){}}return(t=e).\u0275fac=function(i){return new(i||t)($(Pr))},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();function vd(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function uy(t,e){const n=Le(t),i=e.elementInjector||I_();return new xf(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}let oE=null;function Na(){return oE}class nee{}const kt=new ie("DocumentToken");let aE=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return J(ree)},providedIn:"platform"}),e})();const iee=new ie("Location Initialized");let ree=(()=>{var t;class e extends aE{constructor(){super(),this._doc=J(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Na().getBaseHref(this._doc)}onPopState(i){const r=Na().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=Na().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return new t},providedIn:"platform"}),e})();function lE(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function gB(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Lo(t){return t&&"?"!==t[0]?"?"+t:t}let Oa=(()=>{var t;class e{historyGo(i){throw new Error("Not implemented")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return J(_B)},providedIn:"root"}),e})();const mB=new ie("appBaseHref");let _B=(()=>{var t;class e extends Oa{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??J(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return lE(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Lo(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){const a=this.prepareExternalUrl(s+Lo(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){const a=this.prepareExternalUrl(s+Lo(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)($(aE),$(mB,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),yB=(()=>{var t;class e extends Oa{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){const r=lE(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Lo(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Lo(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(t=e).\u0275fac=function(i){return new(i||t)($(aE),$(mB,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})(),cE=(()=>{var t;class e{constructor(i){this._subject=new le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function aee(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(gB(vB(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Lo(r))}normalize(i){return e.stripTrailingSlash(function oee(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,vB(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Lo(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Lo(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}}return(t=e).normalizeQueryParams=Lo,t.joinWithSlash=lE,t.stripTrailingSlash=gB,t.\u0275fac=function(i){return new(i||t)($(Oa))},t.\u0275prov=G({token:t,factory:function(){return function see(){return new cE($(Oa))}()},providedIn:"root"}),e})();function vB(t){return t.replace(/\/index.html$/,"")}var Mn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Mn||{}),rt=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(rt||{}),hr=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(hr||{}),ln=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(ln||{});function hy(t,e){return Fr(vi(t)[At.DateFormat],e)}function fy(t,e){return Fr(vi(t)[At.TimeFormat],e)}function py(t,e){return Fr(vi(t)[At.DateTimeFormat],e)}function Rr(t,e){const n=vi(t),i=n[At.NumberSymbols][e];if(typeof i>"u"){if(e===ln.CurrencyDecimal)return n[At.NumberSymbols][ln.Decimal];if(e===ln.CurrencyGroup)return n[At.NumberSymbols][ln.Group]}return i}function CB(t){if(!t[At.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[At.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function hE(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const vee=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Qf={},bee=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Bo=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Bo||{}),lt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(lt||{}),ct=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ct||{});function EB(t,e,n,i){let r=function Mee(t){if(SB(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[r,s=1,o=1]=t.split("-").map(a=>+a);return gy(r,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(vee))return function xee(t){const e=new Date(0);let n=0,i=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,l,c),e}(i)}const e=new Date(t);if(!SB(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Vo(n,e)||e;let a,o=[];for(;e;){if(a=bee.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let l=r.getTimezoneOffset();i&&(l=TB(i,l),r=function Aee(t,e,n){const i=n?-1:1,r=t.getTimezoneOffset();return function Iee(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,i*(TB(e,r)-r))}(r,i,!0));let c="";return o.forEach(u=>{const d=function See(t){if(pE[t])return pE[t];let e;switch(t){case"G":case"GG":case"GGG":e=Mt(ct.Eras,rt.Abbreviated);break;case"GGGG":e=Mt(ct.Eras,rt.Wide);break;case"GGGGG":e=Mt(ct.Eras,rt.Narrow);break;case"y":e=fn(lt.FullYear,1,0,!1,!0);break;case"yy":e=fn(lt.FullYear,2,0,!0,!0);break;case"yyy":e=fn(lt.FullYear,3,0,!1,!0);break;case"yyyy":e=fn(lt.FullYear,4,0,!1,!0);break;case"Y":e=vy(1);break;case"YY":e=vy(2,!0);break;case"YYY":e=vy(3);break;case"YYYY":e=vy(4);break;case"M":case"L":e=fn(lt.Month,1,1);break;case"MM":case"LL":e=fn(lt.Month,2,1);break;case"MMM":e=Mt(ct.Months,rt.Abbreviated);break;case"MMMM":e=Mt(ct.Months,rt.Wide);break;case"MMMMM":e=Mt(ct.Months,rt.Narrow);break;case"LLL":e=Mt(ct.Months,rt.Abbreviated,Mn.Standalone);break;case"LLLL":e=Mt(ct.Months,rt.Wide,Mn.Standalone);break;case"LLLLL":e=Mt(ct.Months,rt.Narrow,Mn.Standalone);break;case"w":e=fE(1);break;case"ww":e=fE(2);break;case"W":e=fE(1,!0);break;case"d":e=fn(lt.Date,1);break;case"dd":e=fn(lt.Date,2);break;case"c":case"cc":e=fn(lt.Day,1);break;case"ccc":e=Mt(ct.Days,rt.Abbreviated,Mn.Standalone);break;case"cccc":e=Mt(ct.Days,rt.Wide,Mn.Standalone);break;case"ccccc":e=Mt(ct.Days,rt.Narrow,Mn.Standalone);break;case"cccccc":e=Mt(ct.Days,rt.Short,Mn.Standalone);break;case"E":case"EE":case"EEE":e=Mt(ct.Days,rt.Abbreviated);break;case"EEEE":e=Mt(ct.Days,rt.Wide);break;case"EEEEE":e=Mt(ct.Days,rt.Narrow);break;case"EEEEEE":e=Mt(ct.Days,rt.Short);break;case"a":case"aa":case"aaa":e=Mt(ct.DayPeriods,rt.Abbreviated);break;case"aaaa":e=Mt(ct.DayPeriods,rt.Wide);break;case"aaaaa":e=Mt(ct.DayPeriods,rt.Narrow);break;case"b":case"bb":case"bbb":e=Mt(ct.DayPeriods,rt.Abbreviated,Mn.Standalone,!0);break;case"bbbb":e=Mt(ct.DayPeriods,rt.Wide,Mn.Standalone,!0);break;case"bbbbb":e=Mt(ct.DayPeriods,rt.Narrow,Mn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Mt(ct.DayPeriods,rt.Abbreviated,Mn.Format,!0);break;case"BBBB":e=Mt(ct.DayPeriods,rt.Wide,Mn.Format,!0);break;case"BBBBB":e=Mt(ct.DayPeriods,rt.Narrow,Mn.Format,!0);break;case"h":e=fn(lt.Hours,1,-12);break;case"hh":e=fn(lt.Hours,2,-12);break;case"H":e=fn(lt.Hours,1);break;case"HH":e=fn(lt.Hours,2);break;case"m":e=fn(lt.Minutes,1);break;case"mm":e=fn(lt.Minutes,2);break;case"s":e=fn(lt.Seconds,1);break;case"ss":e=fn(lt.Seconds,2);break;case"S":e=fn(lt.FractionalSeconds,1);break;case"SS":e=fn(lt.FractionalSeconds,2);break;case"SSS":e=fn(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=_y(Bo.Short);break;case"ZZZZZ":e=_y(Bo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=_y(Bo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=_y(Bo.Long);break;default:return null}return pE[t]=e,e}(u);c+=d?d(r,n,l):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function gy(t,e,n){const i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function Vo(t,e){const n=function cee(t){return vi(t)[At.LocaleId]}(t);if(Qf[n]=Qf[n]||{},Qf[n][e])return Qf[n][e];let i="";switch(e){case"shortDate":i=hy(t,hr.Short);break;case"mediumDate":i=hy(t,hr.Medium);break;case"longDate":i=hy(t,hr.Long);break;case"fullDate":i=hy(t,hr.Full);break;case"shortTime":i=fy(t,hr.Short);break;case"mediumTime":i=fy(t,hr.Medium);break;case"longTime":i=fy(t,hr.Long);break;case"fullTime":i=fy(t,hr.Full);break;case"short":const r=Vo(t,"shortTime"),s=Vo(t,"shortDate");i=my(py(t,hr.Short),[r,s]);break;case"medium":const o=Vo(t,"mediumTime"),a=Vo(t,"mediumDate");i=my(py(t,hr.Medium),[o,a]);break;case"long":const l=Vo(t,"longTime"),c=Vo(t,"longDate");i=my(py(t,hr.Long),[l,c]);break;case"full":const u=Vo(t,"fullTime"),d=Vo(t,"fullDate");i=my(py(t,hr.Full),[u,d])}return i&&(Qf[n][e]=i),i}function my(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return null!=e&&i in e?e[i]:n})),t}function as(t,e,n="-",i,r){let s="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return i&&(o=o.slice(o.length-e)),s+o}function fn(t,e,n=0,i=!1,r=!1){return function(s,o){let a=function Cee(t,e){switch(t){case lt.FullYear:return e.getFullYear();case lt.Month:return e.getMonth();case lt.Date:return e.getDate();case lt.Hours:return e.getHours();case lt.Minutes:return e.getMinutes();case lt.Seconds:return e.getSeconds();case lt.FractionalSeconds:return e.getMilliseconds();case lt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===lt.Hours)0===a&&-12===n&&(a=12);else if(t===lt.FractionalSeconds)return function wee(t,e){return as(t,3).substring(0,e)}(a,e);const l=Rr(o,ln.MinusSign);return as(a,e,l,i,r)}}function Mt(t,e,n=Mn.Format,i=!1){return function(r,s){return function Eee(t,e,n,i,r,s){switch(n){case ct.Months:return function uE(t,e,n){const i=vi(t),s=Fr([i[At.MonthsFormat],i[At.MonthsStandalone]],e);return Fr(s,n)}(e,r,i)[t.getMonth()];case ct.Days:return function wB(t,e,n){const i=vi(t),s=Fr([i[At.DaysFormat],i[At.DaysStandalone]],e);return Fr(s,n)}(e,r,i)[t.getDay()];case ct.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const c=function pee(t){const e=vi(t);return CB(e),(e[At.ExtraData][2]||[]).map(i=>"string"==typeof i?hE(i):[hE(i[0]),hE(i[1])])}(e),u=function gee(t,e,n){const i=vi(t);CB(i);const s=Fr([i[At.ExtraData][0],i[At.ExtraData][1]],e)||[];return Fr(s,n)||[]}(e,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){const[g,m]=h,y=o>=g.hours&&a>=g.minutes,b=o<m.hours||o===m.hours&&a<m.minutes;if(g.hours<m.hours){if(y&&b)return!0}else if(y||b)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function uee(t,e,n){const i=vi(t),s=Fr([i[At.DayPeriodsFormat],i[At.DayPeriodsStandalone]],e);return Fr(s,n)}(e,r,i)[o<12?0:1];case ct.Eras:return function dee(t,e){return Fr(vi(t)[At.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,s,t,e,n,i)}}function _y(t){return function(e,n,i){const r=-1*i,s=Rr(n,ln.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Bo.Short:return(r>=0?"+":"")+as(o,2,s)+as(Math.abs(r%60),2,s);case Bo.ShortGMT:return"GMT"+(r>=0?"+":"")+as(o,1,s);case Bo.Long:return"GMT"+(r>=0?"+":"")+as(o,2,s)+":"+as(Math.abs(r%60),2,s);case Bo.Extended:return 0===i?"Z":(r>=0?"+":"")+as(o,2,s)+":"+as(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const Dee=0,yy=4;function DB(t){return gy(t.getFullYear(),t.getMonth(),t.getDate()+(yy-t.getDay()))}function fE(t,e=!1){return function(n,i){let r;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();r=1+Math.floor((o+s)/7)}else{const s=DB(n),o=function Tee(t){const e=gy(t,Dee,1).getDay();return gy(t,0,1+(e<=yy?yy:yy+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();r=1+Math.round(a/6048e5)}return as(r,t,Rr(i,ln.MinusSign))}}function vy(t,e=!1){return function(n,i){return as(DB(n).getFullYear(),t,Rr(i,ln.MinusSign),e)}}const pE={};function TB(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function SB(t){return t instanceof Date&&!isNaN(t.valueOf())}const bE=/\s+/,xB=[];let wd=(()=>{var t;class e{constructor(i,r,s,o){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=s,this._renderer=o,this.initialClasses=xB,this.stateMap=new Map}set klass(i){this.initialClasses=null!=i?i.trim().split(bE):xB}set ngClass(i){this.rawClass="string"==typeof i?i.trim().split(bE):i}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(const r of i)this._updateState(r,!0);else if(null!=i)for(const r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){const s=this.stateMap.get(i);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const i of this.stateMap){const r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){(i=i.trim()).length>0&&i.split(bE).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return(t=e).\u0275fac=function(i){return new(i||t)(w(ly),w(Yf),w(Ye),w(ji))},t.\u0275dir=K({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class zee{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{var t;class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const i=this._ngForOf;!this._differ&&i&&(this._differ=this._differs.find(i).create(this.ngForTrackBy))}if(this._differ){const i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){const r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new zee(s.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const l=r.get(o);r.move(l,a),OB(l,s)}});for(let s=0,o=r.length;s<o;s++){const l=r.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{OB(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(w(kr),w(jt),w(ly))},t.\u0275dir=K({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function OB(t,e){t.context.$implicit=e.item}let pn=(()=>{var t;class e{constructor(i,r){this._viewContainer=i,this._context=new Gee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){kB("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){kB("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}}return(t=e).\u0275fac=function(i){return new(i||t)(w(kr),w(jt))},t.\u0275dir=K({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Gee{constructor(){this.$implicit=null,this.ngIf=null}}function kB(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${sn(e)}'.`)}let RB=(()=>{var t;class e{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){const i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){const[s,o]=i.split("."),a=-1===s.indexOf("-")?void 0:Sa.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Ye),w(Yf),w(ji))},t.\u0275dir=K({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),e})(),ec=(()=>{var t;class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(i.ngTemplateOutlet||i.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:o,ngTemplateOutletInjector:a}=this;this._viewRef=r.createEmbeddedView(s,o,a?{injector:a}:void 0)}else this._viewRef=null}else this._viewRef&&i.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(kr))},t.\u0275dir=K({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[vn]}),e})();const ste=new ie("DATE_PIPE_DEFAULT_TIMEZONE"),ote=new ie("DATE_PIPE_DEFAULT_OPTIONS");let EE=(()=>{var t;class e{constructor(i,r,s){this.locale=i,this.defaultTimezone=r,this.defaultOptions=s}transform(i,r,s,o){if(null==i||""===i||i!=i)return null;try{return EB(i,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(a){throw function ls(t,e){return new O(2100,!1)}()}}}return(t=e).\u0275fac=function(i){return new(i||t)(w(rs,16),w(ste,24),w(ote,24))},t.\u0275pipe=Tt({name:"date",type:t,pure:!0,standalone:!0}),e})(),FB=(()=>{var t;class e{constructor(i){this.differs=i,this.keyValues=[],this.compareFn=LB}transform(i,r=LB){if(!i||!(i instanceof Map)&&"object"!=typeof i)return null;this.differ||(this.differ=this.differs.find(i).create());const s=this.differ.diff(i),o=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(function dte(t,e){return{key:t,value:e}}(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Yf,16))},t.\u0275pipe=Tt({name:"keyvalue",type:t,pure:!1,standalone:!0}),e})();function LB(t,e){const n=t.key,i=e.key;if(n===i)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(null===n)return 1;if(null===i)return-1;if("string"==typeof n&&"string"==typeof i)return n<i?-1:1;if("number"==typeof n&&"number"==typeof i)return n-i;if("boolean"==typeof n&&"boolean"==typeof i)return n<i?-1:1;const r=String(n),s=String(i);return r==s?0:r<s?-1:1}let SE=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();function VB(t){return"server"===t}let yte=(()=>{var t;class e{}return(t=e).\u0275prov=G({token:t,providedIn:"root",factory:()=>new vte($(kt),window)}),e})();class vte{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function bte(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class zte extends nee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ME extends zte{static makeCurrent(){!function tee(t){oE||(oE=t)}(new ME)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Gte(){return Xf=Xf||document.querySelector("base"),Xf?Xf.getAttribute("href"):null}();return null==n?null:function Wte(t){Ey=Ey||document.createElement("a"),Ey.setAttribute("href",t);const e=Ey.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Xf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Uee(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Ey,Xf=null,Kte=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();const xE=new ie("EventManagerPlugins");let zB=(()=>{var t;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(t=e).\u0275fac=function(i){return new(i||t)($(xE),$(Fe))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();class GB{constructor(e){this._doc=e}}const NE="ng-app-id";let WB=(()=>{var t;class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=VB(o),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(i){for(const r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){const r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${NE}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){const s=this.styleRef;if(s.has(i)){const o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){const s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(NE),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(NE,this.appId),a}}addStyleToHost(i,r){const s=this.getStyleElement(i,r);i.appendChild(s);const o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt),$(M_),$(oR,8),$(Ia))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();const OE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kE=/%COMP%/g,Zte=new ie("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function KB(t,e){return e.map(n=>n.replace(kE,t))}let PE=(()=>{var t;class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=VB(l),this.defaultRenderer=new RE(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Li.ShadowDom&&(r={...r,encapsulation:Li.Emulated});const s=this.getOrCreateRenderer(i,r);return s instanceof QB?s.applyToHost(i):s instanceof FE&&s.applyStyles(),s}getOrCreateRenderer(i,r){const s=this.rendererByCompId;let o=s.get(r.id);if(!o){const a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Li.Emulated:o=new QB(c,u,r,this.appId,d,a,l,h);break;case Li.ShadowDom:return new nne(c,u,i,r,a,l,this.nonce,h);default:o=new FE(c,u,r,d,a,l,h)}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(i){return new(i||t)($(zB),$(WB),$(M_),$(Zte),$(kt),$(Ia),$(Fe),$(oR))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();class RE{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(OE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YB(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(YB(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new O(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=OE[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=OE[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Sa.DashCase|Sa.Important)?e.style.setProperty(n,i,r&Sa.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Sa.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Na().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function YB(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class nne extends RE{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=KB(r.id,r.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FE extends RE{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?KB(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class QB extends FE{constructor(e,n,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=function Xte(t){return"_ngcontent-%COMP%".replace(kE,t)}(c),this.hostAttr=function ene(t){return"_nghost-%COMP%".replace(kE,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let ine=(()=>{var t;class e extends GB{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();const JB=["alt","control","meta","shift"],rne={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sne={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let one=(()=>{var t;class e extends GB{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,s){const o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Na().onAndCancel(i,o.domEventName,a))}static parseEventName(i){const r=i.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(r.pop());let a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),JB.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=rne[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),JB.forEach(a=>{a!==s&&(0,sne[a])(i)&&(o+=a+".")}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();const XB=[{provide:Ia,useValue:"browser"},{provide:rR,useValue:function ane(){ME.makeCurrent()},multi:!0},{provide:kt,useFactory:function cne(){return function s9(t){v1=t}(document),document},deps:[]}],une=zL($X,"browser",XB),dne=new ie(""),eV=[{provide:ry,useClass:class qte{addToWindow(e){dt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new O(5103,!1);return s},dt.getAllAngularTestabilities=()=>e.getAllTestabilities(),dt.getAllAngularRootElements=()=>e.getAllRootElements(),dt.frameworkStabilizers||(dt.frameworkStabilizers=[]),dt.frameworkStabilizers.push(i=>{const r=dt.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Na().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:VL,useClass:YC,deps:[Fe,QC,ry]},{provide:YC,useClass:YC,deps:[Fe,QC,ry]}],tV=[{provide:M1,useValue:"root"},{provide:Wl,useFactory:function lne(){return new Wl},deps:[]},{provide:xE,useClass:ine,multi:!0,deps:[kt,Fe,Ia]},{provide:xE,useClass:one,multi:!0,deps:[kt]},PE,WB,zB,{provide:ed,useExisting:PE},{provide:class wte{},useClass:Kte,deps:[]},[]];let nV=(()=>{var t;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:M_,useValue:i.appId}]}}}return(t=e).\u0275fac=function(i){return new(i||t)($(dne,12))},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[...tV,...eV],imports:[SE,UX]}),e})(),iV=(()=>{var t;class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:function(i){let r=null;return r=i?new i:function fne(){return new iV($(kt))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let BE=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(i){let r=null;return r=i?new(i||t):$(oV),r},providedIn:"root"}),e})(),oV=(()=>{var t;class e extends BE{constructor(i){super(),this._doc=i}sanitize(i,r){if(null==r)return null;switch(i){case lr.NONE:return r;case lr.HTML:return Fs(r,"HTML")?ar(r):KP(this._doc,String(r)).toString();case lr.STYLE:return Fs(r,"Style")?ar(r):r;case lr.SCRIPT:if(Fs(r,"Script"))return ar(r);throw new O(5200,!1);case lr.URL:return Fs(r,"URL")?ar(r):E_(String(r));case lr.RESOURCE_URL:if(Fs(r,"ResourceURL"))return ar(r);throw new O(5201,!1);default:throw new O(5202,!1)}}bypassSecurityTrustHtml(i){return function h9(t){return new o9(t)}(i)}bypassSecurityTrustStyle(i){return function f9(t){return new a9(t)}(i)}bypassSecurityTrustScript(i){return function p9(t){return new l9(t)}(i)}bypassSecurityTrustUrl(i){return function g9(t){return new c9(t)}(i)}bypassSecurityTrustResourceUrl(i){return function m9(t){return new u9(t)}(i)}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:function(i){let r=null;return r=i?new i:function _ne(t){return new oV(t.get(kt))}($(Rt)),r},providedIn:"root"}),e})();const{isArray:vne}=Array,{getPrototypeOf:bne,prototype:wne,keys:Cne}=Object;function lV(t){if(1===t.length){const e=t[0];if(vne(e))return{args:e,keys:null};if(function Ene(t){return t&&"object"==typeof t&&bne(t)===wne}(e)){const n=Cne(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:Dne}=Array;function VE(t){return $e(e=>function Tne(t,e){return Dne(e)?t(...e):t(e)}(t,e))}function cV(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function HE(...t){const e=ya(t),n=vu(t),{args:i,keys:r}=lV(t);if(0===i.length)return hn([],e);const s=new ut(function Sne(t,e,n=Me){return i=>{uV(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)uV(e,()=>{const c=hn(t[l],e);let u=!1;c.subscribe(Qe(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>cV(r,o):Me));return n?s.pipe(VE(n)):s}function uV(t,e,n){t?Jr(n,t,e):e()}const Dy=ir(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ep(...t){return function Ine(){return Ar(1)}()(hn(t,ya(t)))}function dV(t){return new ut(e=>{rn(t()).subscribe(e)})}function tp(t,e){const n=be(t)?t:()=>t,i=r=>r.error(n());return new ut(e?r=>e.schedule(i,0,r):i)}function $E(){return gt((t,e)=>{let n=null;t._refCount++;const i=Qe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class hV extends ut{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,gu(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dn;const n=this.getSubject();e.add(this.source.subscribe(Qe(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dn.EMPTY)}return e}refCount(){return $E()(this)}}function $n(t){return t<=0?()=>di:gt((e,n)=>{let i=0;e.subscribe(Qe(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function xn(t,e){return gt((n,i)=>{let r=0;n.subscribe(Qe(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Ty(t){return gt((e,n)=>{let i=!1;e.subscribe(Qe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function pV(t=Ane){return gt((e,n)=>{let i=!1;e.subscribe(Qe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function Ane(){return new Dy}function tc(t,e){const n=arguments.length>=2;return i=>i.pipe(t?xn((r,s)=>t(r,s,i)):Me,$n(1),n?Ty(e):pV(()=>new Dy))}function np(t,e){return be(e)?Vt(t,e,1):Vt(t,1)}function Un(t,e,n){const i=be(t)||e||n?{next:t,error:e,complete:n}:t;return i?gt((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Qe(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Me}function nc(t){return gt((e,n)=>{let s,i=null,r=!1;i=e.subscribe(Qe(n,void 0,void 0,o=>{s=rn(t(o,nc(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function UE(t){return t<=0?()=>di:gt((e,n)=>{let i=[];e.subscribe(Qe(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function gV(t){return $e(()=>t)}function jE(t){return gt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ie="primary",ip=Symbol("RouteTitle");class One{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Cd(t){return new One(t)}function kne(t,e,n){const i=n.path.split("/");if(i.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Us(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!mV(t[r],e[r]))return!1;return!0}function mV(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}return t===e}function _V(t){return t.length>0?t[t.length-1]:null}function Pa(t){return function yne(t){return!!t&&(t instanceof ut||be(t.lift)&&be(t.subscribe))}(t)?t:Ff(t)?hn(Promise.resolve(t)):fe(t)}const Rne={exact:function bV(t,e,n){if(!ic(t.segments,e.segments)||!Sy(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!t.children[i]||!bV(t.children[i],e.children[i],n))return!1;return!0},subset:wV},yV={exact:function Fne(t,e){return Us(t,e)},subset:function Lne(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mV(t[n],e[n]))},ignored:()=>!0};function vV(t,e,n){return Rne[n.paths](t.root,e.root,n.matrixParams)&&yV[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function wV(t,e,n){return CV(t,e,e.segments,n)}function CV(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!ic(r,n)||e.hasChildren()||!Sy(r,n,i))}if(t.segments.length===n.length){if(!ic(t.segments,n)||!Sy(t.segments,n,i))return!1;for(const r in e.children)if(!t.children[r]||!wV(t.children[r],e.children[r],i))return!1;return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(ic(t.segments,r)&&Sy(t.segments,r,i)&&t.children[Ie])&&CV(t.children[Ie],e,s,i)}}function Sy(t,e,n){return e.every((i,r)=>yV[n](t[r].parameters,i.parameters))}class Ed{constructor(e=new yt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return Hne.serialize(this)}}class yt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iy(this)}}class rp{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Cd(this.parameters)),this._parameterMap}toString(){return TV(this)}}function ic(t,e){return t.length===e.length&&t.every((n,i)=>n.path===e[i].path)}let sp=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return new zE},providedIn:"root"}),e})();class zE{parse(e){const n=new Jne(e);return new Ed(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${op(e.root,!0)}`,i=function jne(t){const e=Object.keys(t).map(n=>{const i=t[n];return Array.isArray(i)?i.map(r=>`${Ay(n)}=${Ay(r)}`).join("&"):`${Ay(n)}=${Ay(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${i}${"string"==typeof e.fragment?`#${function $ne(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Hne=new zE;function Iy(t){return t.segments.map(e=>TV(e)).join("/")}function op(t,e){if(!t.hasChildren())return Iy(t);if(e){const n=t.children[Ie]?op(t.children[Ie],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==Ie&&i.push(`${r}:${op(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function Vne(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ie&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ie&&(n=n.concat(e(r,i)))}),n}(t,(i,r)=>r===Ie?[op(t.children[Ie],!1)]:[`${r}:${op(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ie]?`${Iy(t)}/${n[0]}`:`${Iy(t)}/(${n.join("//")})`}}function EV(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ay(t){return EV(t).replace(/%3B/gi,";")}function GE(t){return EV(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function My(t){return decodeURIComponent(t)}function DV(t){return My(t.replace(/\+/g,"%20"))}function TV(t){return`${GE(t.path)}${function Une(t){return Object.keys(t).map(e=>`;${GE(e)}=${GE(t[e])}`).join("")}(t.parameters)}`}const zne=/^[^\/()?;#]+/;function WE(t){const e=t.match(zne);return e?e[0]:""}const Gne=/^[^\/()?;=#]+/,qne=/^[^=?&#]+/,Yne=/^[^&#]+/;class Jne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Ie]=new yt(e,n)),i}parseSegment(){const e=WE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new rp(My(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Wne(t){const e=t.match(Gne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=WE(this.remaining);r&&(i=r,this.capture(i))}e[My(n)]=My(i)}parseQueryParam(e){const n=function Kne(t){const e=t.match(qne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=function Qne(t){const e=t.match(Yne);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=DV(n),s=DV(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=WE(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new O(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ie);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Ie]:new yt([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}}function SV(t){return t.segments.length>0?new yt([],{[Ie]:t}):t}function IV(t){const e={};for(const i of Object.keys(t.children)){const s=IV(t.children[i]);if(i===Ie&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Zne(t){if(1===t.numberOfChildren&&t.children[Ie]){const e=t.children[Ie];return new yt(t.segments.concat(e.segments),e.children)}return t}(new yt(t.segments,e))}function rc(t){return t instanceof Ed}function AV(t){let e;const r=SV(function n(s){const o={};for(const l of s.children){const c=n(l);o[l.outlet]=c}const a=new yt(s.url,o);return s===t&&(e=a),a}(t.root));return e??r}function MV(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(0===e.length)return qE(r,r,r,n,i);const s=function eie(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new NV(!0,0,t);let e=0,n=!1;const i=t.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new NV(n,e,i)}(e);if(s.toRoot())return qE(r,r,new yt([],{}),n,i);const o=function tie(t,e,n){if(t.isAbsolute)return new Ny(e,!0,0);if(!n)return new Ny(e,!1,NaN);if(null===n.parent)return new Ny(n,!0,0);const i=xy(t.commands[0])?0:1;return function nie(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new O(4005,!1);r=i.segments.length}return new Ny(i,!1,r-s)}(n,n.segments.length-1+i,t.numberOfDoubleDots)}(s,r,t),a=o.processChildren?lp(o.segmentGroup,o.index,s.commands):OV(o.segmentGroup,o.index,s.commands);return qE(r,o.segmentGroup,a,n,i)}function xy(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ap(t){return"object"==typeof t&&null!=t&&t.outlets}function qE(t,e,n,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=t===e?n:xV(t,e,n);const a=SV(IV(o));return new Ed(a,s,r)}function xV(t,e,n){const i={};return Object.entries(t.children).forEach(([r,s])=>{i[r]=s===e?n:xV(s,e,n)}),new yt(t.segments,i)}class NV{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&xy(i[0]))throw new O(4003,!1);const r=i.find(ap);if(r&&r!==_V(i))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ny{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}}function OV(t,e,n){if(t||(t=new yt([],{})),0===t.segments.length&&t.hasChildren())return lp(t,e,n);const i=function rie(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const o=t.segments[r],a=n[i];if(ap(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!PV(l,c,o))return s;i+=2}else{if(!PV(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new yt(t.segments.slice(0,i.pathIndex),{});return s.children[Ie]=new yt(t.segments.slice(i.pathIndex),t.children),lp(s,0,r)}return i.match&&0===r.length?new yt(t.segments,{}):i.match&&!t.hasChildren()?KE(t,e,n):i.match?lp(t,0,r):KE(t,e,n)}function lp(t,e,n){if(0===n.length)return new yt(t.segments,{});{const i=function iie(t){return ap(t[0])?t[0].outlets:{[Ie]:t}}(n),r={};if(!i[Ie]&&t.children[Ie]&&1===t.numberOfChildren&&0===t.children[Ie].segments.length){const s=lp(t.children[Ie],e,n);return new yt(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=OV(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new yt(t.segments,r)}}function KE(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(ap(s)){const l=sie(s.outlets);return new yt(i,l)}if(0===r&&xy(n[0])){i.push(new rp(t.segments[e].path,kV(n[0]))),r++;continue}const o=ap(s)?s.outlets[Ie]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&xy(a)?(i.push(new rp(o,kV(a))),r+=2):(i.push(new rp(o,{})),r++)}return new yt(i,{})}function sie(t){const e={};return Object.entries(t).forEach(([n,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[n]=KE(new yt([],{}),0,i))}),e}function kV(t){const e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function PV(t,e,n){return t==n.path&&Us(e,n.parameters)}const cp="imperative";class js{constructor(e,n){this.id=e,this.url=n}}class YE extends js{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sc extends js{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oy extends js{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class up extends js{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=16}}class QE extends js{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oie extends js{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aie extends js{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lie extends js{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cie extends js{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uie extends js{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class die{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hie{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fie{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pie{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gie{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mie{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RV{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _ie{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new dp,this.attachRef=null}}let dp=(()=>{var t;class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){const s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){const r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new _ie,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class FV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=JE(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){const n=JE(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=ZE(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ZE(e,this._root).map(n=>n.value)}}function JE(t,e){if(t===e.value)return e;for(const n of e.children){const i=JE(t,n);if(i)return i}return null}function ZE(t,e){if(t===e.value)return[e];for(const n of e.children){const i=ZE(t,n);if(i.length)return i.unshift(e),i}return[]}class Ho{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Dd(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class LV extends FV{constructor(e,n){super(e),this.snapshot=n,XE(this,e)}toString(){return this.snapshot.toString()}}function BV(t,e){const n=function yie(t,e){const o=new ky([],{},{},"",{},Ie,e,null,{});return new HV("",new Ho(o,[]))}(0,e),i=new Ot([new rp("",{})]),r=new Ot({}),s=new Ot({}),o=new Ot({}),a=new Ot(""),l=new oc(i,r,o,a,s,Ie,e,n.root);return l.snapshot=n.root,new LV(new Ho(l,[]),n)}class oc{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe($e(c=>c[ip]))??fe(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($e(e=>Cd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($e(e=>Cd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function VV(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const r=n[i],s=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function vie(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class ky{get title(){return this.data?.[ip]}constructor(e,n,i,r,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HV extends FV{constructor(e,n){super(n),this.url=e,XE(this,n)}toString(){return $V(this._root)}}function XE(t,e){e.value._routerState=t,e.children.forEach(n=>XE(t,n))}function $V(t){const e=t.children.length>0?` { ${t.children.map($V).join(", ")} } `:"";return`${t.value}${e}`}function eD(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Us(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Us(e.params,n.params)||t.paramsSubject.next(n.params),function Pne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Us(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Us(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tD(t,e){const n=Us(t.params,e.params)&&function Bne(t,e){return ic(t,e)&&t.every((n,i)=>Us(n.parameters,e[i].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||tD(t.parent,e.parent))}let nD=(()=>{var t;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new le,this.deactivateEvents=new le,this.attachEvents=new le,this.detachEvents=new le,this.parentContexts=J(dp),this.location=J(kr),this.changeDetector=J(ss),this.environmentInjector=J(Ui),this.inputBinder=J(Py,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){const{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=i;const s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new bie(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=K({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vn]}),e})();class bie{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===oc?this.route:e===dp?this.childContexts:this.parent.get(e,n)}}const Py=new ie("");let UV=(()=>{var t;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){const{activatedRoute:r}=i,s=HE([r.queryParams,r.params,r.data]).pipe(Pi(([o,a,l],c)=>(l={...o,...a,...l},0===c?fe(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(i);const a=function eee(t){const e=Le(t);if(!e)return null;const n=new xf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(a)for(const{templateName:l}of a.inputs)i.activatedComponentRef.setInput(l,o[l]);else this.unsubscribeFromRouteData(i)});this.outletDataSubscriptions.set(i,s)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();function hp(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function Cie(t,e,n){return e.children.map(i=>{for(const r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return hp(t,i,r);return hp(t,i)})}(t,e,n);return new Ho(i,r)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>hp(t,a)),o}}const i=function Eie(t){return new oc(new Ot(t.url),new Ot(t.params),new Ot(t.queryParams),new Ot(t.fragment),new Ot(t.data),t.outlet,t.component,t)}(e.value),r=e.children.map(s=>hp(t,s));return new Ho(i,r)}}const iD="ngNavigationCancelingError";function jV(t,e){const{redirectTo:n,navigationBehaviorOptions:i}=rc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=zV(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function zV(t,e,n){const i=new Error("NavigationCancelingError: "+(t||""));return i[iD]=!0,i.cancellationCode=e,n&&(i.url=n),i}function GV(t){return WV(t)&&rc(t.url)}function WV(t){return t&&t[iD]}let qV=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ze({type:t,selectors:[["ng-component"]],standalone:!0,features:[Gi],decls:1,vars:0,template:function(i,r){1&i&&ue(0,"router-outlet")},dependencies:[nD],encapsulation:2}),e})();function rD(t){const e=t.children&&t.children.map(rD),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ie&&(n.component=qV),n}function cs(t){return t.outlet||Ie}function fp(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class xie{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),eD(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){const r=Dd(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Dd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){const r=Dd(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new mie(s.value.snapshot))}),e.children.length&&this.forwardEvent(new pie(e.value.snapshot))}activateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(eD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),eD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=fp(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class KV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ry{constructor(e,n){this.component=e,this.route=n}}function Nie(t,e,n){const i=t._root;return pp(i,e?e._root:null,n,[i.value])}function Td(t,e){const n=Symbol(),i=e.get(t,n);return i===n?"function"!=typeof t||function aw(t){return null!==wu(t)}(t)?e.get(t):t:i}function pp(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Dd(e);return t.children.forEach(o=>{(function kie(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Pie(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ic(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ic(t.url,e.url)||!Us(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tD(t,e)||!Us(t.queryParams,e.queryParams);default:return!tD(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new KV(i)):(s.data=o.data,s._resolvedData=o._resolvedData),pp(t,e,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ry(a.outlet.component,o))}else o&&gp(e,a,r),r.canActivateChecks.push(new KV(i)),pp(t,null,s.component?a?a.children:null:n,i,r)})(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gp(a,n.getContext(o),r)),r}function gp(t,e,n){const i=Dd(t),r=t.value;Object.entries(i).forEach(([s,o])=>{gp(o,r.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Ry(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function mp(t){return"function"==typeof t}function YV(t){return t instanceof Dy||"EmptyError"===t?.name}const Fy=Symbol("INITIAL_VALUE");function Sd(){return Pi(t=>HE(t.map(e=>e.pipe($n(1),function fV(...t){const e=ya(t);return gt((n,i)=>{(e?ep(t,n,e):ep(t,n)).subscribe(i)})}(Fy)))).pipe($e(e=>{for(const n of e)if(!0!==n){if(n===Fy)return Fy;if(!1===n||n instanceof Ed)return n}return!0}),xn(e=>e!==Fy),$n(1)))}function QV(t){return function vo(...t){return pu(t)}(Un(e=>{if(rc(e))throw jV(0,e)}),$e(e=>!0===e))}class Ly{constructor(e){this.segmentGroup=e||null}}class JV{constructor(e){this.urlTree=e}}function Id(t){return tp(new Ly(t))}function ZV(t){return tp(new JV(t))}class ere{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new O(4002,!1)}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return fe(i);if(r.numberOfChildren>1||!r.children[Ie])return tp(new O(4e3,!1));r=r.children[Ie]}}applyRedirectCommands(e,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i)}applyRedirectCreateUrlTree(e,n,i,r){const s=this.createSegmentGroup(e,n.root,i,r);return new Ed(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){const s=this.createSegments(e,n.segments,i,r);let o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new yt(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){const r=i[n.path.substring(1)];if(!r)throw new O(4001,!1);return r}findOrReturn(e,n){let i=0;for(const r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}}const sD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tre(t,e,n,i,r){const s=oD(t,e,n);return s.matched?(i=function Die(t,e){return t.providers&&!t._injector&&(t._injector=IC(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,i),function Jie(t,e,n,i){const r=e.canMatch;return r&&0!==r.length?fe(r.map(o=>{const a=Td(o,t);return Pa(function Hie(t){return t&&mp(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Sd(),QV()):fe(!0)}(i,e,n).pipe($e(o=>!0===o?s:{...sD}))):fe(s)}function oD(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...sD}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(e.matcher||kne)(n,t,e);if(!r)return{...sD};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function XV(t,e,n,i){return n.length>0&&function rre(t,e,n){return n.some(i=>By(t,e,i)&&cs(i)!==Ie)}(t,n,i)?{segmentGroup:new yt(e,ire(i,new yt(n,t.children))),slicedSegments:[]}:0===n.length&&function sre(t,e,n){return n.some(i=>By(t,e,i))}(t,n,i)?{segmentGroup:new yt(t.segments,nre(t,0,n,i,t.children)),slicedSegments:n}:{segmentGroup:new yt(t.segments,t.children),slicedSegments:n}}function nre(t,e,n,i,r){const s={};for(const o of i)if(By(t,n,o)&&!r[cs(o)]){const a=new yt([],{});s[cs(o)]=a}return{...r,...s}}function ire(t,e){const n={};n[Ie]=e;for(const i of t)if(""===i.path&&cs(i)!==Ie){const r=new yt([],{});n[cs(i)]=r}return n}function By(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class cre{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new ere(this.urlSerializer,this.urlTree)}noMatchError(e){return new O(4002,!1)}recognize(){const e=XV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ie).pipe(nc(n=>{if(n instanceof JV)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Ly?this.noMatchError(n):n}),$e(n=>{const i=new ky([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ie,this.rootComponentType,null,{}),r=new Ho(i,n),s=new HV("",r),o=function Xne(t,e,n=null,i=null){return MV(AV(t),e,n,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Ie).pipe(nc(i=>{throw i instanceof Ly?this.noMatchError(i):i}))}inheritParamsAndData(e){const n=e.value,i=VV(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0)}processChildren(e,n,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return hn(r).pipe(np(s=>{const o=i.children[s],a=function Aie(t,e){const n=t.filter(i=>cs(i)===e);return n.push(...t.filter(i=>cs(i)!==e)),n}(n,s);return this.processSegmentGroup(e,a,o,s)}),function xne(t,e){return gt(function Mne(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(Qe(o,u=>{const d=c++;l=a?t(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(t,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),Ty(null),function Nne(t,e){const n=arguments.length>=2;return i=>i.pipe(t?xn((r,s)=>t(r,s,i)):Me,UE(1),n?Ty(e):pV(()=>new Dy))}(),Vt(s=>{if(null===s)return Id(i);const o=e3(s);return function ure(t){t.sort((e,n)=>e.value.outlet===Ie?-1:n.value.outlet===Ie?1:e.value.outlet.localeCompare(n.value.outlet))}(o),fe(o)}))}processSegment(e,n,i,r,s,o){return hn(n).pipe(np(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(nc(l=>{if(l instanceof Ly)return fe(null);throw l}))),tc(a=>!!a),nc(a=>{if(YV(a))return function are(t,e,n){return 0===e.length&&!t.children[n]}(i,r,s)?fe([]):Id(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return function ore(t,e,n,i){return!!(cs(t)===i||i!==Ie&&By(e,n,t))&&("**"===t.path||oD(e,t,n).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):Id(r):Id(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?ZV(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Vt(o=>{const a=new yt(o,{});return this.processSegment(e,n,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=oD(n,r,s);if(!a)return Id(n);const d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?ZV(d):this.applyRedirects.lineralizeSegments(r,d).pipe(Vt(h=>this.processSegment(e,i,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?_V(r).parameters:{};a=fe({snapshot:new ky(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t3(i),cs(i),i.component??i._loadedComponent??null,i,n3(i)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=tre(n,i,r,e).pipe($e(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new ky(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t3(i),cs(i),i.component??i._loadedComponent??null,i,n3(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Pi(l=>null===l?Id(n):this.getChildConfig(e=i._injector??e,i,r).pipe(Pi(({routes:c})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:g}=l,{segmentGroup:m,slicedSegments:y}=XV(n,h,g,c);if(0===y.length&&m.hasChildren())return this.processChildren(u,c,m).pipe($e(C=>null===C?null:[new Ho(d,C)]));if(0===c.length&&0===y.length)return fe([new Ho(d,[])]);const b=cs(i)===s;return this.processSegment(u,c,m,y,b?Ie:s,!0).pipe($e(C=>[new Ho(d,C)]))}))))}getChildConfig(e,n,i){return n.children?fe({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?fe({routes:n._loadedRoutes,injector:n._loadedInjector}):function Qie(t,e,n,i){const r=e.canLoad;return void 0===r||0===r.length?fe(!0):fe(r.map(o=>{const a=Td(o,t);return Pa(function Fie(t){return t&&mp(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Sd(),QV())}(e,n,i).pipe(Vt(r=>r?this.configLoader.loadChildren(e,n).pipe(Un(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Xie(t){return tp(zV(!1,3))}())):fe({routes:[],injector:e})}}function dre(t){const e=t.value.routeConfig;return e&&""===e.path}function e3(t){const e=[],n=new Set;for(const i of t){if(!dre(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):e.push(i)}for(const i of n){const r=e3(i.children);e.push(new Ho(i.value,r))}return e.filter(i=>!n.has(i))}function t3(t){return t.data||{}}function n3(t){return t.resolve||{}}function r3(t){return"string"==typeof t.title||null===t.title}function aD(t){return Pi(e=>{const n=t(e);return n?hn(n).pipe($e(()=>e)):fe(e)})}const Ad=new ie("ROUTES");let lD=(()=>{var t;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(xL)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return fe(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);const r=Pa(i.loadComponent()).pipe($e(s3),Un(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),jE(()=>{this.componentLoaders.delete(i)})),s=new hV(r,()=>new ge).pipe($E());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe($e(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,u;return Array.isArray(l)?u=l:(c=l.create(i).injector,u=c.get(Ad,[],xe.Self|xe.Optional).flat()),{routes:u.map(rD),injector:c}}),jE(()=>{this.childrenLoaders.delete(r)})),a=new hV(o,()=>new ge).pipe($E());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(i){return Pa(i()).pipe($e(s3),Vt(r=>r instanceof VF||Array.isArray(r)?fe(r):hn(this.compiler.compileModuleAsync(r))))}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function s3(t){return function yre(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Vy=(()=>{var t;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ge,this.configLoader=J(lD),this.environmentInjector=J(Ui),this.urlSerializer=J(sp),this.rootContexts=J(dp),this.inputBindingEnabled=null!==J(Py,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new hie(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new die(s))}complete(){this.transitions?.complete()}handleNavigationRequest(i){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...i,id:r})}setupNavigations(i){return this.transitions=new Ot({id:0,currentUrlTree:i.currentUrlTree,currentRawUrl:i.currentUrlTree,extractedUrl:i.urlHandlingStrategy.extract(i.currentUrlTree),urlAfterRedirects:i.urlHandlingStrategy.extract(i.currentUrlTree),rawUrl:i.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:cp,restoredState:null,currentSnapshot:i.routerState.snapshot,targetSnapshot:null,currentRouterState:i.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xn(r=>0!==r.id),$e(r=>({...r,extractedUrl:i.urlHandlingStrategy.extract(r.rawUrl)})),Pi(r=>{let s=!1,o=!1;return fe(r).pipe(Un(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pi(a=>{const l=i.browserUrlTree.toString(),c=!i.navigated||a.extractedUrl.toString()!==l||l!==i.currentUrlTree.toString();if(!c&&"reload"!==(a.extras.onSameUrlNavigation??i.onSameUrlNavigation)){const d="";return this.events.next(new up(a.id,i.serializeUrl(r.rawUrl),d,0)),i.rawUrlTree=a.rawUrl,a.resolve(null),di}if(i.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return o3(a.source)&&(i.browserUrlTree=a.extractedUrl),fe(a).pipe(Pi(d=>{const h=this.transitions?.getValue();return this.events.next(new YE(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?di:Promise.resolve(d)}),function hre(t,e,n,i,r,s){return Vt(o=>function lre(t,e,n,i,r,s,o="emptyOnly"){return new cre(t,e,n,i,r,o,s).recognize()}(t,e,n,i,o.extractedUrl,r,s).pipe($e(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,i.paramsInheritanceStrategy),Un(d=>{if(r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},"eager"===i.urlUpdateStrategy){if(!d.extras.skipLocationChange){const g=i.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);i.setBrowserUrl(g,d)}i.browserUrlTree=d.urlAfterRedirects}const h=new oie(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&i.urlHandlingStrategy.shouldProcessUrl(i.rawUrlTree)){const{id:d,extractedUrl:h,source:g,restoredState:m,extras:y}=a,b=new YE(d,this.urlSerializer.serialize(h),g,m);this.events.next(b);const C=BV(0,this.rootComponentType).snapshot;return fe(r={...a,targetSnapshot:C,urlAfterRedirects:h,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new up(a.id,i.serializeUrl(r.extractedUrl),d,1)),i.rawUrlTree=a.rawUrl,a.resolve(null),di}}),Un(a=>{const l=new aie(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),$e(a=>r={...a,guards:Nie(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function Uie(t,e){return Vt(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?fe({...n,guardsResult:!0}):function jie(t,e,n,i){return hn(t).pipe(Vt(r=>function Yie(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?fe(s.map(a=>{const l=fp(e)??r,c=Td(a,l);return Pa(function Vie(t){return t&&mp(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,i):l.runInContext(()=>c(t,e,n,i))).pipe(tc())})).pipe(Sd()):fe(!0)}(r.component,r.route,n,e,i)),tc(r=>!0!==r,!0))}(o,i,r,t).pipe(Vt(a=>a&&function Rie(t){return"boolean"==typeof t}(a)?function zie(t,e,n,i){return hn(e).pipe(np(r=>ep(function Wie(t,e){return null!==t&&e&&e(new fie(t)),fe(!0)}(r.route.parent,i),function Gie(t,e){return null!==t&&e&&e(new gie(t)),fe(!0)}(r.route,i),function Kie(t,e,n){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Oie(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>dV(()=>fe(o.guards.map(l=>{const c=fp(o.node)??n,u=Td(l,c);return Pa(function Bie(t){return t&&mp(t.canActivateChild)}(u)?u.canActivateChild(i,t):c.runInContext(()=>u(i,t))).pipe(tc())})).pipe(Sd())));return fe(s).pipe(Sd())}(t,r.path,n),function qie(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return fe(!0);const r=i.map(s=>dV(()=>{const o=fp(e)??n,a=Td(s,o);return Pa(function Lie(t){return t&&mp(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(tc())}));return fe(r).pipe(Sd())}(t,r.route,n))),tc(r=>!0!==r,!0))}(i,s,t,e):fe(a)),$e(a=>({...n,guardsResult:a})))})}(this.environmentInjector,a=>this.events.next(a)),Un(a=>{if(r.guardsResult=a.guardsResult,rc(a.guardsResult))throw jV(0,a.guardsResult);const l=new lie(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(l)}),xn(a=>!!a.guardsResult||(i.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),aD(a=>{if(a.guards.canActivateChecks.length)return fe(a).pipe(Un(l=>{const c=new cie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Pi(l=>{let c=!1;return fe(l).pipe(function fre(t,e){return Vt(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return fe(n);let s=0;return hn(r).pipe(np(o=>function pre(t,e,n,i){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!r3(r)&&(s[ip]=r.title),function gre(t,e,n,i){const r=function mre(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return fe({});const s={};return hn(r).pipe(Vt(o=>function _re(t,e,n,i){const r=fp(e)??i,s=Td(t,r);return Pa(s.resolve?s.resolve(e,n):r.runInContext(()=>s(e,n)))}(t[o],e,n,i).pipe(tc(),Un(a=>{s[o]=a}))),UE(1),gV(s),nc(o=>YV(o)?di:tp(o)))}(s,t,e,i).pipe($e(o=>(t._resolvedData=o,t.data=VV(t,n).resolve,r&&r3(r)&&(t.data[ip]=r.title),null)))}(o.route,i,t,e)),Un(()=>s++),UE(1),Vt(o=>s===r.length?fe(n):di))})}(i.paramsInheritanceStrategy,this.environmentInjector),Un({next:()=>c=!0,complete:()=>{c||(i.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Un(l=>{const c=new uie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}))}),aD(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(Un(d=>{c.component=d}),$e(()=>{})));for(const d of c.children)u.push(...l(d));return u};return HE(l(a.targetSnapshot.root)).pipe(Ty(),$n(1))}),aD(()=>this.afterPreactivation()),$e(a=>{const l=function wie(t,e,n){const i=hp(t,e._root,n?n._root:void 0);return new LV(i,e)}(i.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),Un(a=>{i.currentUrlTree=a.urlAfterRedirects,i.rawUrlTree=i.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),i.routerState=a.targetRouterState,"deferred"===i.urlUpdateStrategy&&(a.extras.skipLocationChange||i.setBrowserUrl(i.rawUrlTree,a),i.browserUrlTree=a.urlAfterRedirects)}),((t,e,n,i)=>$e(r=>(new xie(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)))(this.rootContexts,i.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),$n(1),Un({next:a=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,i.navigated=!0,this.events.next(new sc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(i.currentUrlTree))),i.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{s=!0}}),jE(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),nc(a=>{if(o=!0,WV(a)){GV(a)||(i.navigated=!0,i.restoreHistory(r,!0));const l=new Oy(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(l),GV(a)){const c=i.urlHandlingStrategy.merge(a.url,i.rawUrlTree),u={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===i.urlUpdateStrategy||o3(r.source)};i.scheduleNavigation(c,cp,null,u,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{i.restoreHistory(r,!0);const l=new QE(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(l);try{r.resolve(i.errorHandler(a))}catch(c){r.reject(c)}}return di}))}))}cancelNavigationTransition(i,r,s){const o=new Oy(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function o3(t){return t!==cp}let a3=(()=>{var t;class e{buildTitle(i){let r,s=i.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Ie);return r}getResolvedTitleForRoute(i){return i.data[ip]}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return J(vre)},providedIn:"root"}),e})(),vre=(()=>{var t;class e extends a3{constructor(i){super(),this.title=i}updateTitle(i){const r=this.buildTitle(i);void 0!==r&&this.title.setTitle(r)}}return(t=e).\u0275fac=function(i){return new(i||t)($(iV))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),bre=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return J(Cre)},providedIn:"root"}),e})();class wre{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Cre=(()=>{var t;class e extends wre{}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=an(t)))(r||t)}}(),t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Hy=new ie("",{providedIn:"root",factory:()=>({})});let Ere=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:function(){return J(Dre)},providedIn:"root"}),e})(),Dre=(()=>{var t;class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();var _p=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(_p||{});function l3(t,e){t.events.pipe(xn(n=>n instanceof sc||n instanceof Oy||n instanceof QE||n instanceof up),$e(n=>n instanceof sc||n instanceof up?_p.COMPLETE:n instanceof Oy&&(0===n.code||1===n.code)?_p.REDIRECTING:_p.FAILED),xn(n=>n!==_p.REDIRECTING),$n(1)).subscribe(()=>{e()})}function Tre(t){throw t}function Sre(t,e,n){return e.parse("/")}const Ire={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Are={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nn=(()=>{var t;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=J(AL),this.isNgZoneEnabled=!1,this.options=J(Hy,{optional:!0})||{},this.pendingTasks=J(ML),this.errorHandler=this.options.errorHandler||Tre,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Sre,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=J(Ere),this.routeReuseStrategy=J(bre),this.titleStrategy=J(a3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=J(Ad,{optional:!0})?.flat()??[],this.navigationTransitions=J(Vy),this.urlSerializer=J(sp),this.location=J(cE),this.componentInputBindingEnabled=!!J(Py,{optional:!0}),this.isNgZoneEnabled=J(Fe)instanceof Fe&&Fe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ed,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BV(0,null),this.navigationTransitions.setupNavigations(this).subscribe(i=>{this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId??0},i=>{this.console.warn(`Unhandled Navigation Error: ${i}`)})}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const i=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),cp,i)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const r="popstate"===i.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(i.url,r,i.state)},0)}))}navigateToSyncWithBrowser(i,r,s){const o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(rD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(i,r={}){const{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a;let h,d=null;switch(l){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=AV(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof i[0]||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return MV(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){const s=rc(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,cp,null,r)}navigate(i,r={skipLocationChange:!1}){return function Mre(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new O(4008,!1)}(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){let r;try{r=this.urlSerializer.parse(i)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,i)}return r}isActive(i,r){let s;if(s=!0===r?{...Ire}:!1===r?{...Are}:r,rc(i))return vV(this.currentUrlTree,i,s);const o=this.parseUrl(i);return vV(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{const o=i[s];return null!=o&&(r[s]=o),r},{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,g)=>{l=h,c=g});const d=this.pendingTasks.add();return l3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(i,r){const s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",a)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(s,"",o)}}restoreHistory(i,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(i),this.browserUrlTree=i.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=i.currentRouterState,this.currentUrlTree=i.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),yp=(()=>{var t;class e{constructor(i,r,s,o,a,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new ge,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof sc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){null!=i?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==i||r||s||o||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const i=null===this.href?null:function QP(t,e,n){return function x9(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?YP:D1}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){const s=this.renderer,o=this.el.nativeElement;null!==r?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Nn),w(oc),function Ul(t){return function q7(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(km(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Hn(),t)}("tabindex"),w(ji),w(Ye),w(Oa))},t.\u0275dir=K({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&X("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&et("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",vd],skipLocationChange:["skipLocationChange","skipLocationChange",vd],replaceUrl:["replaceUrl","replaceUrl",vd],routerLink:"routerLink"},standalone:!0,features:[r2,vn]}),e})();class c3{}let Ore=(()=>{var t;class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(xn(i=>i instanceof sc),np(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){const s=[];for(const o of r){o.providers&&!o._injector&&(o._injector=IC(o.providers,i,`Route: ${o.path}`));const a=o._injector??i,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return hn(s).pipe(Ar())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(i,r):fe(null);const o=s.pipe(Vt(a=>null===a?fe(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));return r.loadComponent&&!r._loadedComponent?hn([o,this.loader.loadComponent(r)]).pipe(Ar()):o})}}return(t=e).\u0275fac=function(i){return new(i||t)($(Nn),$(xL),$(Ui),$(c3),$(lD))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const cD=new ie("");let u3=(()=>{var t;class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof YE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof sc?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof up&&0===i.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof RV&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new RV(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(t=e).\u0275fac=function(i){!function OR(){throw new Error("invalid")}()},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();function $o(t,e){return{\u0275kind:t,\u0275providers:e}}function h3(){const t=J(Rt);return e=>{const n=t.get(Pr);if(e!==n.components[0])return;const i=t.get(Nn),r=t.get(f3);1===t.get(uD)&&i.initialNavigation(),t.get(p3,null,xe.Optional)?.setUpPreloading(),t.get(cD,null,xe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const f3=new ie("",{factory:()=>new ge}),uD=new ie("",{providedIn:"root",factory:()=>1}),p3=new ie("");function Fre(t){return $o(0,[{provide:p3,useExisting:Ore},{provide:c3,useExisting:t}])}const g3=new ie("ROUTER_FORROOT_GUARD"),Bre=[cE,{provide:sp,useClass:zE},Nn,dp,{provide:oc,useFactory:function d3(t){return t.routerState.root},deps:[Nn]},lD,[]];function Vre(){return new UL("Router",Nn)}let m3=(()=>{var t;class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[Bre,[],{provide:Ad,multi:!0,useValue:i},{provide:g3,useFactory:jre,deps:[[Nn,new yi,new l_]]},{provide:Hy,useValue:r||{}},r?.useHash?{provide:Oa,useClass:yB}:{provide:Oa,useClass:_B},{provide:cD,useFactory:()=>{const t=J(yte),e=J(Fe),n=J(Hy),i=J(Vy),r=J(sp);return n.scrollOffset&&t.setOffset(n.scrollOffset),new u3(r,i,t,e,n)}},r?.preloadingStrategy?Fre(r.preloadingStrategy).\u0275providers:[],{provide:UL,multi:!0,useFactory:Vre},r?.initialNavigation?zre(r):[],r?.bindToComponentInputs?$o(8,[UV,{provide:Py,useExisting:UV}]).\u0275providers:[],[{provide:_3,useFactory:h3},{provide:XC,multi:!0,useExisting:_3}]]}}static forChild(i){return{ngModule:e,providers:[{provide:Ad,multi:!0,useValue:i}]}}}return(t=e).\u0275fac=function(i){return new(i||t)($(g3,8))},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();function jre(t){return"guarded"}function zre(t){return["disabled"===t.initialNavigation?$o(3,[{provide:jC,multi:!0,useFactory:()=>{const e=J(Nn);return()=>{e.setUpLocationChangeListener()}}},{provide:uD,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?$o(2,[{provide:uD,useValue:0},{provide:jC,multi:!0,deps:[Rt],useFactory:e=>{const n=e.get(iee,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const r=e.get(Nn),s=e.get(f3);l3(r,()=>{i(!0)}),e.get(Vy).afterPreactivation=()=>(i(!0),s.closed?fe(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const _3=new ie("");let y3=(()=>{var t;class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(ji),w(Ye))},t.\u0275dir=K({type:t}),e})(),ac=(()=>{var t;class e extends y3{}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=an(t)))(r||t)}}(),t.\u0275dir=K({type:t,features:[ht]}),e})();const fr=new ie("NgValueAccessor"),qre={provide:fr,useExisting:we(()=>dD),multi:!0};let dD=(()=>{var t;class e extends ac{writeValue(i){this.setProperty("checked",i)}}return(t=e).\u0275fac=function(){let n;return function(r){return(n||(n=an(t)))(r||t)}}(),t.\u0275dir=K({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&X("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[_t([qre]),ht]}),e})();const Kre={provide:fr,useExisting:we(()=>Uo),multi:!0},Qre=new ie("CompositionEventMode");let Uo=(()=>{var t;class e extends y3{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Yre(){const t=Na()?Na().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(i){this.setProperty("value",i??"")}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(ji),w(Ye),w(Qre,8))},t.\u0275dir=K({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&X("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[_t([Kre]),ht]}),e})();function Ra(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function v3(t){return null!=t&&"number"==typeof t.length}const jn=new ie("NgValidators"),Fa=new ie("NgAsyncValidators"),Jre=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pr{static min(e){return function b3(t){return e=>{if(Ra(e.value)||Ra(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function w3(t){return e=>{if(Ra(e.value)||Ra(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function C3(t){return Ra(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function E3(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function D3(t){return Ra(t.value)||Jre.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function T3(t){return e=>Ra(e.value)||!v3(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function S3(t){return e=>v3(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function I3(t){if(!t)return $y;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Ra(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return k3(e)}static composeAsync(e){return P3(e)}}function $y(t){return null}function A3(t){return null!=t}function M3(t){return Ff(t)?hn(t):t}function x3(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function N3(t,e){return e.map(n=>n(t))}function O3(t){return t.map(e=>function Zre(t){return!t.validate}(e)?e:n=>e.validate(n))}function k3(t){if(!t)return null;const e=t.filter(A3);return 0==e.length?null:function(n){return x3(N3(n,e))}}function hD(t){return null!=t?k3(O3(t)):null}function P3(t){if(!t)return null;const e=t.filter(A3);return 0==e.length?null:function(n){return function Wre(...t){const e=vu(t),{args:n,keys:i}=lV(t),r=new ut(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;rn(n[u]).subscribe(Qe(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?cV(i,a):a),s.complete())}))}});return e?r.pipe(VE(e)):r}(N3(n,e).map(M3)).pipe($e(x3))}}function fD(t){return null!=t?P3(O3(t)):null}function R3(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function F3(t){return t._rawValidators}function L3(t){return t._rawAsyncValidators}function pD(t){return t?Array.isArray(t)?t:[t]:[]}function Uy(t,e){return Array.isArray(t)?t.includes(e):t===e}function B3(t,e){const n=pD(e);return pD(t).forEach(r=>{Uy(n,r)||n.push(r)}),n}function V3(t,e){return pD(e).filter(n=>!Uy(t,n))}class H3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class wi extends H3{get formDirective(){return null}get path(){return null}}class La extends H3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $3{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let lc=(()=>{var t;class e extends $3{constructor(i){super(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(La,2))},t.\u0275dir=K({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ht]}),e})(),cc=(()=>{var t;class e extends $3{constructor(i){super(i)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(wi,10))},t.\u0275dir=K({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Ue("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ht]}),e})();const vp="VALID",zy="INVALID",Md="PENDING",bp="DISABLED";function _D(t){return(Gy(t)?t.validators:t)||null}function yD(t,e){return(Gy(e)?e.asyncValidators:t)||null}function Gy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class G3{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vp}get invalid(){return this.status===zy}get pending(){return this.status==Md}get disabled(){return this.status===bp}get enabled(){return this.status!==bp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(B3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(B3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(V3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(V3(e,this._rawAsyncValidators))}hasValidator(e){return Uy(this._rawValidators,e)}hasAsyncValidator(e){return Uy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Md,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=bp,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=vp,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vp||this.status===Md)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bp:vp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Md,this._hasOwnPendingAsyncValidator=!0;const n=M3(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?bp:this.errors?zy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Md)?Md:this._anyControlsHaveStatus(zy)?zy:vp}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nse(t){return Array.isArray(t)?hD(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ise(t){return Array.isArray(t)?fD(t):t||null}(this._rawAsyncValidators)}}class jo extends G3{constructor(e,n,i){super(_D(n),yD(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function z3(t,e,n){t._forEachChild((i,r)=>{if(void 0===n[r])throw new O(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function j3(t,e,n){const i=t.controls;if(!(e?Object.keys(i):i).length)throw new O(1e3,"");if(!i[n])throw new O(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const uc=new ie("CallSetDisabledState",{providedIn:"root",factory:()=>wp}),wp="always";function Cp(t,e,n=wp){vD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function ose(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&W3(t,e)})}(t,e),function lse(t,e){const n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function ase(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&W3(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function sse(t,e){if(e.valueAccessor.setDisabledState){const n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function qy(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Yy(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ky(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function vD(t,e){const n=F3(t);null!==e.validator?t.setValidators(R3(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=L3(t);null!==e.asyncValidator?t.setAsyncValidators(R3(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();Ky(e._rawValidators,r),Ky(e._rawAsyncValidators,r)}function Yy(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=F3(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const r=L3(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}const i=()=>{};return Ky(e._rawValidators,i),Ky(e._rawAsyncValidators,i),n}function W3(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Y3(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Q3(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const On=class extends G3{constructor(e=null,n,i){super(_D(n),yD(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gy(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Q3(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Y3(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Y3(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Q3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let dc=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275dir=K({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),nH=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();const DD=new ie("NgModelWithFormControlWarning"),Cse={provide:wi,useExisting:we(()=>zo)};let zo=(()=>{var t;class e extends wi{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new le,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){const r=this.form.get(i.path);return Cp(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){qy(i.control||null,i,!1),function hse(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,function K3(t,e){t._syncPendingControls(),e.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(i),"dialog"===i?.target?.method}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{const r=i.control,s=this.form.get(i.path);r!==s&&(qy(r||null,i),(t=>t instanceof On)(s)&&(Cp(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){const r=this.form.get(i.path);(function q3(t,e){vD(t,e)})(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){const r=this.form.get(i.path);r&&function cse(t,e){return Yy(t,e)}(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vD(this.form,this),this._oldForm&&Yy(this._oldForm,this)}_checkFormPresent(){}}return(t=e).\u0275fac=function(i){return new(i||t)(w(jn,10),w(Fa,10),w(uc,8))},t.\u0275dir=K({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&X("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_t([Cse]),ht,vn]}),e})();const Tse={provide:La,useExisting:we(()=>Ba)};let Ba=(()=>{var t;class e extends La{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new le,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function CD(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Uo?n=s:function dse(t){return Object.getPrototypeOf(t.constructor)===ac}(s)?i=s:r=s}),r||i||n||null}(0,o)}ngOnChanges(i){this._added||this._setUpControl(),function wD(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return function Wy(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(t=e)._ngModelWarningSentOnce=!1,t.\u0275fac=function(i){return new(i||t)(w(wi,13),w(jn,10),w(Fa,10),w(fr,10),w(DD,8))},t.\u0275dir=K({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_t([Tse]),ht,vn]}),e})(),yH=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[nH]}),e})(),$se=(()=>{var t;class e{static withConfig(i){return{ngModule:e,providers:[{provide:uc,useValue:i.callSetDisabledState??wp}]}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[yH]}),e})(),vH=(()=>{var t;class e{static withConfig(i){return{ngModule:e,providers:[{provide:DD,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:uc,useValue:i.callSetDisabledState??wp}]}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[yH]}),e})();function cn(t){return gt((e,n)=>{rn(t).subscribe(Qe(n,()=>n.complete(),pa)),!n.closed&&e.subscribe(n)})}const bH=t=>{const e=(t=>{const e={};return Object.keys(t).forEach(n=>{t[n]&&(e[n]=t[n])}),e})(t);return Object.entries(e).map(([n,i])=>`${(t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`))(n)}:${i}`).join(";")};class xD extends Error{constructor(e){super(e),this.name=this.constructor.name}}function si(t){this.content=t}si.prototype={constructor:si,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),s=i.content.slice();return-1==r?s.push(n||t,e):(s[r+1]=e,n&&(s[r]=n)),new si(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new si(n)},addToStart:function(t,e){return new si([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new si(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),s=i.find(t);return r.splice(-1==s?r.length:s,0,e,n),new si(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=si.from(t)).size?new si(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=si.from(t)).size?new si(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=si.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}},si.from=function(t){if(t instanceof si)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new si(e)};const wH=si;function CH(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),s=e.child(i);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)n++;return n}if(r.content.size||s.content.size){let o=CH(r.content,s.content,n+1);if(null!=o)return o}n+=r.nodeSize}else n+=r.nodeSize}}function EH(t,e,n,i){for(let r=t.childCount,s=e.childCount;;){if(0==r||0==s)return r==s?null:{a:n,b:i};let o=t.child(--r),a=e.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:n,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(o.content.size||a.content.size){let c=EH(o.content,a.content,n-1,i-1);if(c)return c}n-=l,i-=l}else n-=l,i-=l}}class U{constructor(e,n){if(this.content=e,this.size=n||0,null==n)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&!1!==i(l,r+a,s||null,o)&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),i,r+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,n-l),o=!i):a.isLeaf?(r?s+="function"==typeof r?r(a):r:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(s+=i,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new U(r,this.size+e.size)}cut(e,n=this.size){if(0==e&&n==this.size)return this;let i=[],r=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a=a.isText?a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),i.push(a),r+=a.nodeSize),o=l}return new U(i,r)}cutByIndex(e,n){return e==n?U.empty:0==e&&n==this.content.length?this:new U(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),s=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new U(r,s)}addToStart(e){return new U([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new U(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return CH(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return EH(this,e,n,i)}findIndex(e,n=-1){if(0==e)return Qy(0,e);if(e==this.size)return Qy(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let o=r+this.child(i).nodeSize;if(o>=e)return o==e||n>0?Qy(i+1,o):Qy(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return U.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new U(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return U.empty;let n,i=0;for(let r=0;r<e.length;r++){let s=e[r];i+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(n||(n=e.slice(0,r)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new U(n||e,i)}static from(e){if(!e)return U.empty;if(e instanceof U)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new U([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}U.empty=new U([],0);const ND={index:0,offset:0};function Qy(t,e){return ND.index=t,ND.offset=e,ND}function Jy(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!Jy(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!Jy(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}let Ct=(()=>{class t{constructor(n,i){this.type=n,this.attrs=i}addToSet(n){let i,r=!1;for(let s=0;s<n.length;s++){let o=n[s];if(this.eq(o))return n;if(this.type.excludes(o.type))i||(i=n.slice(0,s));else{if(o.type.excludes(this.type))return n;!r&&o.type.rank>this.type.rank&&(i||(i=n.slice(0,s)),i.push(this),r=!0),i&&i.push(o)}}return i||(i=n.slice()),r||i.push(this),i}removeFromSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return n.slice(0,i).concat(n.slice(i+1));return n}isInSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return!0;return!1}eq(n){return this==n||this.type==n.type&&Jy(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let i in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=n.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);return r.create(i.attrs)}static sameSet(n,i){if(n==i)return!0;if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].eq(i[r]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&0==n.length)return t.none;if(n instanceof t)return[n];let i=n.slice();return i.sort((r,s)=>r.type.rank-s.type.rank),i}}return t.none=[],t})();class Zy extends Error{}class ne{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=TH(this.content,e+this.openStart,n);return i&&new ne(i,this.openStart,this.openEnd)}removeBetween(e,n){return new ne(DH(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ne.empty;let i=n.openStart||0,r=n.openEnd||0;if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new ne(U.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)r++;return new ne(e,i,r)}}function DH(t,e,n){let{index:i,offset:r}=t.findIndex(e),s=t.maybeChild(i),{index:o,offset:a}=t.findIndex(n);if(r==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(DH(s.content,e-r-1,n-r-1)))}function TH(t,e,n,i){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r);if(s==e||o.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=TH(o.content,e-s-1,n);return a&&t.replaceChild(r,o.copy(a))}function Gse(t,e,n){if(n.openStart>t.depth)throw new Zy("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Zy("Inconsistent open depths");return SH(t,e,n,0)}function SH(t,e,n,i){let r=t.index(i),s=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let o=SH(t,e,n,i+1);return s.copy(s.content.replaceChild(r,o))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=i||e.depth!=i){let{start:o,end:a}=function Wse(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)r=e.node(s).copy(U.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return pc(s,AH(t,o,a,e,i))}{let o=t.parent,a=o.content;return pc(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}}return pc(s,Xy(t,e,i))}function IH(t,e){if(!e.type.compatibleContent(t.type))throw new Zy("Cannot join "+e.type.name+" onto "+t.type.name)}function OD(t,e,n){let i=t.node(n);return IH(i,e.node(n)),i}function fc(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Dp(t,e,n,i){let r=(e||t).node(n),s=0,o=e?e.index(n):r.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(fc(t.nodeAfter,i),s++));for(let a=s;a<o;a++)fc(r.child(a),i);e&&e.depth==n&&e.textOffset&&fc(e.nodeBefore,i)}function pc(t,e){return t.type.checkContent(e),t.copy(e)}function AH(t,e,n,i,r){let s=t.depth>r&&OD(t,e,r+1),o=i.depth>r&&OD(n,i,r+1),a=[];return Dp(null,t,r,a),s&&o&&e.index(r)==n.index(r)?(IH(s,o),fc(pc(s,AH(t,e,n,i,r+1)),a)):(s&&fc(pc(s,Xy(t,e,r+1)),a),Dp(e,n,r,a),o&&fc(pc(o,Xy(n,i,r+1)),a)),Dp(i,null,r,a),new U(a)}function Xy(t,e,n){let i=[];return Dp(null,t,n,i),t.depth>n&&fc(pc(OD(t,e,n+1),Xy(t,e,n+1)),i),Dp(e,null,n,i),new U(i)}ne.empty=new ne(U.empty,0,0);class Tp{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):0==e?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[3*n],r=0==n?0:this.path[3*n-1]+1;for(let s=0;s<e;s++)r+=i.child(s).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(0==e.content.size)return Ct.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)!1===s[o].type.spec.inclusive&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)!1===i[s].type.spec.inclusive&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new ev(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new Tp(n,i,s)}static resolveCached(e,n){for(let r=0;r<kD.length;r++){let s=kD[r];if(s.pos==n&&s.doc==e)return s}let i=kD[PD]=Tp.resolve(e,n);return PD=(PD+1)%qse,i}}let kD=[],PD=0,qse=12;class ev{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kse=Object.create(null);class zs{constructor(e,n,i,r=Ct.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||U.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&Jy(this.attrs,n||e.defaultAttrs||Kse)&&Ct.sameSet(this.marks,i||Ct.none)}copy(e=null){return e==this.content?this:new zs(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zs(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return 0==e&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return ne.empty;let r=this.resolve(e),s=this.resolve(n),o=i?0:r.sharedDepth(n),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new ne(c,r.depth-o,s.depth-o)}replace(e,n,i){return Gse(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return Tp.resolveCached(this,e)}resolveNoCache(e){return Tp.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),MH(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=U.empty,r=0,s=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(i),o=s&&s.matchFragment(this.content,n);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Ct.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Ct.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if("text"==n.type){if("string"!=typeof n.text)throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=U.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,r,i)}}zs.prototype.text=void 0;class tv extends zs{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):MH(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tv(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tv(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return 0==e&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function MH(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class gc{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new Yse(e,n);if(null==i.next)return gc.empty;let r=xH(i);i.next&&i.err("Unexpected trailing text");let s=function noe(t){let e=Object.create(null);return function n(i){let r=[];i.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);kH(t,l).forEach(u=>{c||r.push([a,c=[]]),-1==c.indexOf(u)&&c.push(u)})})});let s=e[i.join(",")]=new gc(i.indexOf(t.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(OH);s.next.push({type:r[o][0],next:e[a.join(",")]||n(a)})}return s}(kH(t,0))}(function toe(t){let e=[[]];return r(function s(o,a){if("choice"==o.type)return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if("seq"!=o.type){if("star"==o.type){let l=n();return i(a,l),r(s(o.expr,l),l),[i(l)]}if("plus"==o.type){let l=n();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}if("opt"==o.type)return[i(a)].concat(s(o.expr,a));if("range"==o.type){let l=a;for(let c=0;c<o.min;c++){let u=n();r(s(o.expr,l),u),l=u}if(-1==o.max)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}if("name"==o.type)return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=n())}}(t,0),n()),e;function n(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}}(r));return function ioe(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),-1==i.indexOf(c)&&i.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let s=n;r&&s<i;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!n.isText&&!n.hasRequiredAttrs())return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];return function s(o,a){let l=o.matchFragment(e,i);if(l&&(!n||l.validEnd))return U.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(e)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function n(i){e.push(i);for(let r=0;r<i.next.length;r++)-1==e.indexOf(i.next[r].next)&&n(i.next[r].next)}(this),e.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return s}).join("\n")}}gc.empty=new gc(!0);class Yse{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function xH(t){let e=[];do{e.push(Qse(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Qse(t){let e=[];do{e.push(Jse(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Jse(t){let e=function eoe(t){if(t.eat("(")){let e=xH(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function Xse(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&r.push(o)}return 0==r.length&&t.err("No node type or group '"+e+"' found"),r}(t,t.next).map(n=>(null==t.inline?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Zse(t,e)}return e}function NH(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Zse(t,e){let n=NH(t),i=n;return t.eat(",")&&(i="}"!=t.next?NH(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function OH(t,e){return e-t}function kH(t,e){let n=[];return function i(r){let s=t[r];if(1==s.length&&!s[0].term)return i(s[0].to);n.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&-1==n.indexOf(l)&&i(l)}}(e),n.sort(OH)}function PH(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function RH(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(void 0===r){let s=t[i];if(!s.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=s.default}n[i]=r}return n}function FH(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new roe(t[n]);return e}class nv{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=FH(i.attrs),this.defaultAttrs=PH(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:RH(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new zs(this,this.computeAttrs(e),U.from(n),Ct.setFrom(i))}createChecked(e=null,n,i){return n=U.from(n),this.checkContent(n),new zs(this,this.computeAttrs(e),n,Ct.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),(n=U.from(n)).size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let r=this.contentMatch.matchFragment(n),s=r&&r.fillBefore(U.empty,!0);return s?new zs(this,e,n.append(s),Ct.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:Ct.none:e}static compile(e,n){let i=Object.create(null);e.forEach((s,o)=>i[s]=new nv(s,n,o));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class roe{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class iv{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=FH(r.attrs),this.excluded=null;let s=PH(this.attrs);this.instance=s?new Ct(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ct(this,RH(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((s,o)=>i[s]=new iv(s,r++,n,o)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}function LH(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],s=t.marks[r],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}class mc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(i=>{i.tag?this.tags.push(i):i.style&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let r=e.nodes[i.node];return r.contentMatch.matchType(r)})}parse(e,n={}){let i=new $H(this,n,!1);return i.addAll(e,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new $H(this,n,!0);return i.addAll(e,n.from,n.to),ne.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(loe(e,s.tag)&&(void 0===s.namespace||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(!1===o)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(0!=a.indexOf(e)||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(61!=a.charCodeAt(e.length)||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(!1===l)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function i(r){let s=null==r.priority?50:r.priority,o=0;for(;o<n.length;o++){let a=n[o];if((null==a.priority?50:a.priority)<s)break}n.splice(o,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=UH(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=UH(o)),o.node||o.ignore||o.mark||(o.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new mc(e,mc.schemaRules(e)))}}const BH={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ooe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},VH={ol:!0,ul:!0};function HH(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class ov{constructor(e,n,i,r,s,o,a){this.type=e,this.attrs=n,this.marks=i,this.pendingMarks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=Ct.none,this.stashMarks=[],this.match=o||(4&a?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(U.from(e));if(!n){let r,i=this.type.contentMatch;return(r=i.findWrapping(e.type))?(this.match=i,r):null}this.match=this.type.contentMatch.matchFragment(n)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let r,i=this.content[this.content.length-1];if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let n=U.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(U.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,i=this.pendingMarks;n<i.length;n++){let r=i[n];(this.type?this.type.allowsMarkType(r.type):uoe(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!BH.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class $H{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0;let s,r=n.topNode,o=HH(null,n.preserveWhitespace,0)|(i?4:0);s=r?new ov(r.type,r.attrs,Ct.none,Ct.none,!0,n.topMatch||r.type.contentMatch,o):new ov(i?null:e.schema.topNodeType,null,Ct.none,Ct.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let n=e.getAttribute("style");if(n){let i=this.readStyles(function coe(t){let n,e=/\s*([\w-]+)\s*:\s*([^;]+)/g,i=[];for(;n=e.exec(t);)i.push(n[1],n[2].trim());return i}(n));if(!i)return;let[r,s]=i,o=this.top;for(let a=0;a<s.length;a++)this.removePendingMark(s[a],o);for(let a=0;a<r.length;a++)this.addPendingMark(r[a]);this.addElement(e);for(let a=0;a<r.length;a++)this.removePendingMark(r[a],o);for(let a=0;a<s.length;a++)this.addPendingMark(s[a])}else this.addElement(e)}}addTextNode(e){let n=e.nodeValue,i=this.top;if(2&i.options||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(1&i.options)n=2&i.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],s=e.previousSibling;(!r||s&&"BR"==s.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r,i=e.nodeName.toLowerCase();VH.hasOwnProperty(i)&&this.parser.normalizeLists&&function aoe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=1==e.nodeType?e.nodeName.toLowerCase():null;i&&VH.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):"li"==i?n=e:i&&(n=null)}}(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,n));if(s?s.ignore:ooe.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(BH.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(a),this.needsBlock=l}else this.addElementByRule(e,s,!1===s.consuming?r:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"==e.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Ct.none,i=Ct.none;e:for(let r=0;r<e.length;r+=2)for(let s;;){let o=this.parser.matchStyle(e[r],e[r+1],this,s);if(!o)continue e;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach(a=>{o.clearMark(a)&&(i=a.addToSet(i))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),!1!==o.consuming)break;s=o}return[n,i]}addElementByRule(e,n,i){let r,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):r=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;"string"==typeof n.contentElement?l=e.querySelector(n.contentElement):"function"==typeof n.contentElement?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}r&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,i){let r=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=null==i?null:e.childNodes[i];s!=o;s=s.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(s);this.findAtPoint(e,r)}findPlace(e){let n,i;for(let r=this.open;r>=0;r--){let s=this.nodes[r],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,i=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(i);for(let r=0;r<n.length;r++)this.enterInner(n[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let i=n.activeMarks;for(let r=0;r<e.marks.length;r++)(!n.type||n.type.allowsMarkType(e.marks[r].type))&&(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1}enter(e,n,i){let r=this.findPlace(e.create(n));return r&&this.enterInner(e,n,!0,i),r}enterInner(e,n=null,i=!1,r){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=HH(e,r,s.options);4&s.options&&0==s.content.length&&(o|=4),this.nodes.push(new ov(e,n,s.activeMarks,s.pendingMarks,i,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!(this.isOpen||i&&i.parent.type!=this.nodes[0].type),s=(r?0:1)-(i?i.depth+1:0),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(""==c){if(a==n.length-1||0==a)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}{let u=l>0||0==l&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&-1==u.groups.indexOf(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(e){let n=function doe(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==n)break}}}function loe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function UH(t){let e={};for(let n in t)e[n]=t[n];return e}function uoe(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}class Gs{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=RD(n).createDocumentFragment());let r=i,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(this.marks[c.type.name]){if(!c.eq(s[a][0])||!1===c.type.spec.spanning)break;a++,l++}else l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=Gs.renderSpec(RD(n),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&Gs.renderSpec(RD(i),r(e,n))}static renderSpec(e,n,i=null){if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;let r=n[0],s=r.indexOf(" ");s>0&&(i=r.slice(0,s),r=r.slice(s+1));let o,a=i?e.createElementNS(i,r):e.createElement(r),l=n[1],c=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){c=2;for(let u in l)if(null!=l[u]){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(0===d){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}{let{dom:h,contentDOM:g}=Gs.renderSpec(e,d,i);if(a.appendChild(h),g){if(o)throw new RangeError("Multiple content holes");o=g}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=jH(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return jH(e.marks)}}function jH(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function RD(t){return t.document||window.document}const GH=Math.pow(2,16);function hoe(t,e){return t+e*GH}function WH(t){return 65535&t}class FD{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Br{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Br.empty)return Br.empty}recover(e){let n=0,i=WH(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*i]+n+function foe(t){return(t-(65535&t))/GH}(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let g=l+r+((c?e==l?-1:e==d?1:n:n)<0?0:u);if(i)return g;let m=e==(n<0?l:d)?null:hoe(a/3,e-l),y=e==l?2:e==d?1:4;return(n<0?e!=l:e!=d)&&(y|=8),new FD(g,y,m)}r+=u-c}return i?e+r:new FD(e+r,0,null)}touches(e,n){let i=0,r=WH(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s];if(e<=l+c&&a==3*r)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+n],u=this.ranges[r+i];e(a,a+c,l,l+u),s+=u-c}}invert(){return new Br(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Br.empty:new Br(e<0?[0,-e,0]:[0,0,e])}}Br.empty=new Br([]);class xd{constructor(e=[],n,i=0,r=e.length){this.maps=e,this.mirror=n,this.from=i,this.to=r}slice(e=0,n=this.maps.length){return new xd(this.maps,this.mirror,e,n)}copy(){return new xd(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),null!=n&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,i=this.maps.length;n<e.maps.length;n++){let r=e.getMirror(n);this.appendMap(e.maps[n],null!=r&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror)for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this.maps.length+e.maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e.maps[n].invert(),null!=r&&r>n?i-r-1:void 0)}}invert(){let e=new xd;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let s=this.from;s<this.to;s++){let a=this.maps[s].mapResult(e,n);if(null!=a.recover){let l=this.getMirror(s);if(null!=l&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return i?e:new FD(e,r,null)}}const LD=Object.create(null);class Ki{getMap(){return Br.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=LD[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in LD)throw new RangeError("Duplicate use of step JSON ID "+e);return LD[e]=n,n.prototype.jsonID=e,n}}class En{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new En(e,null)}static fail(e){return new En(null,e)}static fromReplace(e,n,i,r){try{return En.ok(e.replace(n,i,r))}catch(s){if(s instanceof Zy)return En.fail(s.message);throw s}}}function BD(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy(BD(s.content,e,s))),s.isInline&&(s=e(s,n,r)),i.push(s)}return U.fromArray(i)}class Va extends Ki{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new ne(BD(n.content,(o,a)=>o.isAtom&&a.type.allowsMarkType(this.mark.type)?o.mark(this.mark.addToSet(o.marks)):o,r),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,s)}invert(){return new Ws(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new Va(n.pos,i.pos,this.mark)}merge(e){return e instanceof Va&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Va(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Va(n.from,n.to,e.markFromJSON(n.mark))}}Ki.jsonID("addMark",Va);class Ws extends Ki{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new ne(BD(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,i)}invert(){return new Va(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new Ws(n.pos,i.pos,this.mark)}merge(e){return e instanceof Ws&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ws(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ws(n.from,n.to,e.markFromJSON(n.mark))}}Ki.jsonID("removeMark",Ws);class Ha extends Ki{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new ne(U.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new Ha(this.pos,n.marks[r]);return new Ha(this.pos,this.mark)}}return new Nd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ha(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ha(n.pos,e.markFromJSON(n.mark))}}Ki.jsonID("addNodeMark",Ha);class Nd extends Ki{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new ne(U.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return n&&this.mark.isInSet(n.marks)?new Ha(this.pos,this.mark):this}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Nd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Nd(n.pos,e.markFromJSON(n.mark))}}Ki.jsonID("removeNodeMark",Nd);class oi extends Ki{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&VD(e,this.from,this.to)?En.fail("Structure replace would overwrite content"):En.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Br([this.from,this.to-this.from,this.slice.size])}invert(e){return new oi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new oi(n.pos,Math.max(n.pos,i.pos),this.slice)}merge(e){if(!(e instanceof oi)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let n=this.slice.size+e.slice.size==0?ne.empty:new ne(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new oi(e.from,this.to,n,this.structure)}}{let n=this.slice.size+e.slice.size==0?ne.empty:new ne(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new oi(this.from,this.to+(e.to-e.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new oi(n.from,n.to,ne.fromJSON(e,n.slice),!!n.structure)}}Ki.jsonID("replace",oi);class zn extends Ki{constructor(e,n,i,r,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(VD(e,this.from,this.gapFrom)||VD(e,this.gapTo,this.to)))return En.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return En.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?En.fromReplace(e,this.from,this.to,i):En.fail("Content does not fit in gap")}getMap(){return new Br([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new zn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||s>i.pos?null:new zn(n.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new zn(n.from,n.to,n.gapFrom,n.gapTo,ne.fromJSON(e,n.slice),n.insert,!!n.structure)}}function VD(t,e,n){let i=t.resolve(e),r=n-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function _oe(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ip(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),s=t.$from.index(i),o=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(s,o,n))return i;if(0==i||r.type.spec.isolating||!_oe(r,s,o))break}return null}function HD(t,e,n=null,i=t){let r=function voe(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.contentMatchAt(i).findWrapping(e);return s&&n.canReplaceWith(i,r,s.length?s[0]:e)?s:null}(t,e),s=r&&function boe(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.child(i),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?o:null}(i,e);return s?r.map(QH).concat({type:e,attrs:n}).concat(s.map(QH)):null}function QH(t){return{type:t,attrs:null}}function Od(t,e,n=1,i){let r=t.resolve(e),s=r.depth-n,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=n-2;c>s;c--,u--){let d=r.node(c),h=r.index(c);if(d.type.spec.isolating)return!1;let g=d.content.cutByIndex(h,d.childCount),m=i&&i[u+1];m&&(g=g.replaceChild(0,m.type.create(m.attrs)));let y=i&&i[u]||d;if(!d.canReplace(h+1,d.childCount)||!y.type.validContent(g))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function lv(t,e){let n=t.resolve(e),i=n.index();return function JH(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function $D(t,e,n=e,i=ne.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),s=t.resolve(n);return ZH(r,s,i)?new oi(e,n,i):new Moe(r,s,i).fit()}function ZH(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Ki.jsonID("replaceAround",zn);class Moe{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=U.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=U.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&1==s.childCount;)s=s.firstChild.content,o--,a--;let l=new ne(s,o,a);return e>-1?new zn(i.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new oi(i.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let s=n.firstChild;if(n.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){e=i;break}n=s.content}for(let n=1;n<=2;n++)for(let i=1==n?e:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=UD(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let u,{type:l,match:c}=this.frontier[a],d=null;if(1==n&&(o?c.matchType(o.type)||(d=c.fillBefore(U.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:d};if(2==n&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=UD(e,n);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new ne(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),0))}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=UD(e,n);if(r.childCount<=1&&n>0){let s=e.size-n<=n+r.size;this.unplaced=new ne(Ap(e,n-1,1),n-1,s?n-1:i)}else this.unplaced=new ne(Ap(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(r){for(let y=0;y<r.childCount;y++)u.push(r.child(y));d=d.matchFragment(r)}let g=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),b=d.matchType(y.type);if(!b)break;c++,(c>1||0==l||y.content.size)&&(d=b,u.push(XH(y.mark(h.allowedMarks(y.marks)),1==c?l:0,c==a.childCount?g:-1)))}let m=c==a.childCount;m||(g=-1),this.placed=Mp(this.placed,n,U.from(u)),this.frontier[n].match=d,m&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,b=a;y<g;y++){let C=b.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),b=C.content}this.unplaced=m?0==e?ne.empty:new ne(Ap(o.content,e-1,1),e-1,g<0?o.openEnd:e-1):new ne(Ap(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let n,e=this.frontier[this.depth];if(!e.type.isTextblock||!jD(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=jD(e,n,r,i,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=jD(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Mp(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Mp(this.placed,this.depth,U.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(U.empty,!0);n.childCount&&(this.placed=Mp(this.placed,this.frontier.length,n))}}function Ap(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ap(t.firstChild.content,e-1,n)))}function Mp(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Mp(t.lastChild.content,e-1,n)))}function UD(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function XH(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,XH(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(U.empty,!0)))),t.copy(i)}function jD(t,e,n,i,r){let s=t.node(e),o=r?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!function xoe(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}(n,s.content,o)?a:null}function Noe(t){return t.spec.defining||t.spec.definingForContent}function e$(t,e,n,i,r){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(e$(s.content,e+1,n,i,s)))}if(e>i){let s=r.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(U.empty,!0))}return t}function t$(t,e){let n=[];for(let r=Math.min(t.depth,e.depth);r>=0;r--){let s=t.start(r);if(s<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&n.push(r)}return n}class kd extends Ki{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at attribute step's position");let i=Object.create(null);for(let s in n.attrs)i[s]=n.attrs[s];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return En.fromReplace(e,this.pos,this.pos+1,new ne(U.from(r),0,n.isLeaf?0:1))}getMap(){return Br.empty}invert(e){return new kd(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new kd(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new kd(n.pos,n.attr,n.value)}}Ki.jsonID("attr",kd);let Pd=class extends Error{};Pd=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},(Pd.prototype=Object.create(Error.prototype)).constructor=Pd,Pd.prototype.name="TransformError";class Roe{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new xd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Pd(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=ne.empty){let r=$D(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new ne(U.from(i),0,0))}delete(e,n){return this.replace(e,n,ne.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return function Ooe(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),s=t.doc.resolve(n);if(ZH(r,s,i))return t.step(new oi(e,n,i));let o=t$(r,t.doc.resolve(n));0==o[o.length-1]&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let h=r.depth,g=r.pos-1;h>0;h--,g--){let m=r.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(h)>-1?a=h:r.before(h)==g&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=i.openStart;for(let h=i.content,g=0;;g++){let m=h.firstChild;if(c.push(m),g==i.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let g=c[h].type,m=Noe(g);if(m&&r.node(l).type!=g)u=h;else if(m||!g.isTextblock)break}for(let h=i.openStart;h>=0;h--){let g=(h+u+1)%(i.openStart+1),m=c[g];if(m)for(let y=0;y<o.length;y++){let b=o[(y+l)%o.length],C=!0;b<0&&(C=!1,b=-b);let E=r.node(b-1),R=r.index(b-1);if(E.canReplaceWith(R,R,m.type,m.marks))return t.replace(r.before(b),C?s.after(b):n,new ne(e$(i.content,0,i.openStart,g),g,i.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,i),!(t.steps.length>d));h--){let g=o[h];g<0||(e=r.before(g),n=s.after(g))}}(this,e,n,i),this}replaceRangeWith(e,n,i){return function koe(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=function Ioe(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(0==i.parentOffset)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,n))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,n))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new ne(U.from(i),0,0))}(this,e,n,i),this}deleteRange(e,n){return function Poe(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),s=t$(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&0==a||i.node(a).type.contentMatch.validEnd)return t.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return t.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(e-i.start(o)==i.depth-o&&n>i.end(o)&&r.end(o)-n!=r.depth-o)return t.delete(i.before(o),n);t.delete(e,n)}(this,e,n),this}lift(e,n){return function yoe(t,e,n){let{$from:i,$to:r,depth:s}=e,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=U.empty,d=0;for(let m=s,y=!1;m>n;m--)y||i.index(m)>0?(y=!0,u=U.from(i.node(m).copy(u)),d++):l--;let h=U.empty,g=0;for(let m=s,y=!1;m>n;m--)y||r.after(m+1)<r.end(m)?(y=!0,h=U.from(r.node(m).copy(h)),g++):c++;t.step(new zn(l,c,o,a,new ne(u.append(h),d,g),u.size-d,!0))}(this,e,n),this}join(e,n=1){return function Soe(t,e,n){let i=new oi(e-n,e+n,ne.empty,!0);t.step(i)}(this,e,n),this}wrap(e,n){return function woe(t,e,n){let i=U.empty;for(let o=n.length-1;o>=0;o--){if(i.size){let a=n[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=U.from(n[o].type.create(n[o].attrs,i))}let r=e.start,s=e.end;t.step(new zn(r,s,r,s,new ne(i,0,0),n.length,!0))}(this,e,n),this}setBlockType(e,n=e,i,r=null){return function Coe(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,r)&&function Eoe(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(t.doc,t.mapping.slice(s).map(a),i)){t.clearIncompatible(t.mapping.slice(s).map(a,1),i);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new zn(c,u,c+1,u-1,new ne(U.from(i.create(r,null,o.marks)),0,0),1,!0)),!1}})}(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return function Doe(t,e,n,i,r){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(i,null,r||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new zn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ne(U.from(o),0,0),1,!0))}(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new kd(e,n,i)),this}addNodeMark(e,n){return this.step(new Ha(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Ct)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(!(n=n.isInSet(i.marks)))return this}return this.step(new Nd(e,n)),this}split(e,n=1,i){return function Toe(t,e,n=1,i){let r=t.doc.resolve(e),s=U.empty,o=U.empty;for(let a=r.depth,l=r.depth-n,c=n-1;a>l;a--,c--){s=U.from(r.node(a).copy(s));let u=i&&i[c];o=U.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}t.step(new oi(e,e,new ne(s.append(o),n,n),!0))}(this,e,n,i),this}addMark(e,n,i){return function poe(t,e,n,i){let o,a,r=[],s=[];t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let h=Math.max(c,e),g=Math.min(c+l.nodeSize,n),m=i.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==h&&o.mark.eq(d[y])?o.to=g:r.push(o=new Ws(h,g,d[y])));a&&a.to==h?a.to=g:s.push(a=new Va(h,g,i))}}),r.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}(this,e,n,i),this}removeMark(e,n,i){return function goe(t,e,n,i){let r=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof iv){let u,c=o.marks;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h,d=l[u];for(let g=0;g<r.length;g++){let m=r[g];m.step==s-1&&d.eq(r[g].style)&&(h=m)}h?(h.to=c,h.step=s):r.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),r.forEach(o=>t.step(new Ws(o.from,o.to,o.style)))}(this,e,n,i),this}clearIncompatible(e,n,i){return function moe(t,e,n,i=n.contentMatch){let r=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<r.childCount;a++){let l=r.child(a),c=o+l.nodeSize,u=i.matchType(l.type);if(u){i=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new Ws(o,c,l.marks[d]));if(l.isText&&!n.spec.code){let d,g,h=/\r?\n|\r/g;for(;d=h.exec(l.text);)g||(g=new ne(U.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new oi(o+d.index,o+d.index+d[0].length,g))}}else s.push(new oi(o,c,ne.empty));o=c}if(!i.validEnd){let a=i.fillBefore(U.empty,!0);t.replace(o,o,new ne(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}(this,e,n,i),this}}const zD=Object.create(null);class st{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new Foe(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ne.empty){let i=n.content.lastChild,r=null;for(let a=0;a<n.openEnd;a++)r=i,i=i.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ne.empty:n),0==a&&r$(e,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),r$(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new bt(e):Rd(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let s=e.depth-1;s>=0;s--){let o=n<0?Rd(e.node(0),e.node(s),e.before(s+1),e.index(s),n,i):Rd(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,i);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new gr(e.node(0))}static atStart(e){return Rd(e,e,0,0,1)||new gr(e)}static atEnd(e){return Rd(e,e,e.content.size,e.childCount,-1)||new gr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=zD[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in zD)throw new RangeError("Duplicate use of selection JSON ID "+e);return zD[e]=n,n.prototype.jsonID=e,n}getBookmark(){return bt.between(this.$anchor,this.$head).getBookmark()}}st.prototype.visible=!0;class Foe{constructor(e,n){this.$from=e,this.$to=n}}let n$=!1;function i$(t){!n$&&!t.parent.inlineContent&&(n$=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class bt extends st{constructor(e,n=e){i$(e),i$(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return st.near(i);let r=e.resolve(n.map(this.anchor));return new bt(r.parent.inlineContent?r:i,i)}replace(e,n=ne.empty){if(super.replace(e,n),n==ne.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof bt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new cv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new bt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let s=st.findFrom(n,i,!0)||st.findFrom(n,-i,!0);if(!s)return st.near(n,i);n=s.$head}return e.parent.inlineContent||(0==r||(e=(st.findFrom(e,-i,!0)||st.findFrom(e,i,!0)).$anchor).pos<n.pos!=r<0)&&(e=n),new bt(e,n)}}st.jsonID("text",bt);class cv{constructor(e,n){this.anchor=e,this.head=n}map(e){return new cv(e.map(this.anchor),e.map(this.head))}resolve(e){return bt.between(e.resolve(this.anchor),e.resolve(this.head))}}class ve extends st{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),s=e.resolve(r);return i?st.near(s):new ve(s)}content(){return new ne(U.from(this.node),0,0)}eq(e){return e instanceof ve&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new GD(this.anchor)}static fromJSON(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ve(e.resolve(n.anchor))}static create(e,n){return new ve(e.resolve(n))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}ve.prototype.visible=!1,st.jsonID("node",ve);class GD{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new cv(i,i):new GD(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&ve.isSelectable(i)?new ve(n):st.near(n)}}class gr extends st{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ne.empty){if(n==ne.empty){e.delete(0,e.doc.content.size);let i=st.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new gr(e)}map(e){return new gr(e)}eq(e){return e instanceof gr}getBookmark(){return Loe}}st.jsonID("all",gr);const Loe={map(){return this},resolve:t=>new gr(t)};function Rd(t,e,n,i,r,s=!1){if(e.inlineContent)return bt.create(t,n);for(let o=i-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let a=e.child(o);if(a.isAtom){if(!s&&ve.isSelectable(a))return ve.create(t,n-(r<0?a.nodeSize:0))}else{let l=Rd(t,a,n+r,r<0?a.childCount:0,r,s);if(l)return l}n+=a.nodeSize*r}return null}function r$(t,e,n){let i=t.steps.length-1;if(i<e)return;let o,r=t.steps[i];(r instanceof oi||r instanceof zn)&&(t.mapping.maps[i].forEach((a,l,c,u)=>{null==o&&(o=u)}),t.setSelection(st.near(t.doc.resolve(o),n)))}class Boe extends Roe{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return Ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,n){super.addStep(e,n),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Ct.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(null==n)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==i&&(i=n),i=i??n,!e)return this.deleteRange(n,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=i==n?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,s)),this.selection.empty||this.setSelection(st.near(this.selection.$to)),this}}setMeta(e,n){return this.meta["string"==typeof e?e:e.key]=n,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function a$(t,e){return e&&t?t.bind(e):t}class xp{constructor(e,n,i){this.name=e,this.init=a$(n.init,i),this.apply=a$(n.apply,i)}}const Voe=[new xp("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new xp("selection",{init:(t,e)=>t.selection||st.atStart(e.doc),apply:t=>t.selection}),new xp("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,n,i)=>i.selection.$cursor?t.storedMarks:null}),new xp("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class WD{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Voe.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new xp(i.key,i.spec.state,i))})}}class Fd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<o?{state:i,n:n.length}:{state:this,n:0})}n.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:n.length})}}if(!s)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fd(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Boe(this)}static create(e){let n=new WD(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Fd(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new WD(this.schema,e.plugins),i=n.fields,r=new Fd(n);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&"object"==typeof e)for(let i in e){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],s=r.spec.state;s&&s.toJSON&&(n[i]=s.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new WD(e.schema,e.plugins),s=new Fd(r);return r.fields.forEach(o=>{if("doc"==o.name)s.doc=zs.fromJSON(e.schema,n.doc);else if("selection"==o.name)s.selection=st.fromJSON(s.doc,n.selection);else if("storedMarks"==o.name)n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a))return void(s[o.name]=c.fromJSON.call(l,e,n[a],s))}s[o.name]=o.init(e,s)}}),s}}function l$(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):"handleDOMEvents"==i&&(r=l$(r,e,{})),n[i]=r}return n}class qs{constructor(e){this.spec=e,this.props={},e.props&&l$(e.props,this,this.props),this.key=e.key?e.key.key:c$("plugin")}getState(e){return e[this.key]}}const qD=Object.create(null);function c$(t){return t in qD?t+"$"+ ++qD[t]:(qD[t]=0,t+"$")}class Go{constructor(e="key"){this.key=c$(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const mr=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Np=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let u$=null;const Wo=function(t,e,n){let i=u$||(u$=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},_c=function(t,e,n,i){return n&&(d$(t,e,n,i,-1)||d$(t,e,n,i,1))},Hoe=/^(img|br|input|textarea|hr)$/i;function d$(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Ks(t))){let s=t.parentNode;if(!s||1!=s.nodeType||Uoe(t)||Hoe.test(t.nodeName)||"false"==t.contentEditable)return!1;e=mr(t)+(r<0?0:1),t=s}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(r<0?-1:0)]).contentEditable)return!1;e=r<0?Ks(t):0}}}function Ks(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Uoe(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const dv=function(t){return t.focusNode&&_c(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function yc(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}const $a=typeof navigator<"u"?navigator:null,h$=typeof document<"u"?document:null,Ua=$a&&$a.userAgent||"",KD=/Edge\/(\d+)/.exec(Ua),f$=/MSIE \d/.exec(Ua),YD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ua),Yi=!!(f$||YD||KD),ja=f$?document.documentMode:YD?+YD[1]:KD?+KD[1]:0,us=!Yi&&/gecko\/(\d+)/i.test(Ua);us&&/Firefox\/(\d+)/.exec(Ua);const QD=!Yi&&/Chrome\/(\d+)/.exec(Ua),Ci=!!QD,zoe=QD?+QD[1]:0,Ei=!Yi&&!!$a&&/Apple Computer/.test($a.vendor),Ld=Ei&&(/Mobile\/\w+/.test(Ua)||!!$a&&$a.maxTouchPoints>2),Vr=Ld||!!$a&&/Mac/.test($a.platform),ds=/Android \d/.test(Ua),hv=!!h$&&"webkitFontSmoothing"in h$.documentElement.style,Goe=hv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Woe(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function za(t,e){return"number"==typeof t?t:t[e]}function qoe(t){let e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth*(e.width/t.offsetWidth||1),top:e.top,bottom:e.top+t.clientHeight*(e.height/t.offsetHeight||1)}}function p$(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Np(o)){if(1!=o.nodeType)continue;let a=o,l=a==s.body,c=l?Woe(s):qoe(a),u=0,d=0;if(e.top<c.top+za(i,"top")?d=-(c.top-e.top+za(r,"top")):e.bottom>c.bottom-za(i,"bottom")&&(d=e.bottom-c.bottom+za(r,"bottom")),e.left<c.left+za(i,"left")?u=-(c.left-e.left+za(r,"left")):e.right>c.right-za(i,"right")&&(u=e.right-c.right+za(r,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,y=a.scrollTop-g;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}if(l)break}}function g$(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=Np(i));return e}function m$(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:s}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}let Bd=null;function _$(t,e){let n,r,i=2e8,s=0,o=e.top,a=e.top;for(let l=t.firstChild,c=0;l;l=l.nextSibling,c++){let u;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=Wo(l).getClientRects()}for(let d=0;d<u.length;d++){let h=u[d];if(h.top<=o&&h.bottom>=a){o=Math.max(h.bottom,o),a=Math.min(h.top,a);let g=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(g<i){n=l,i=g,r=g&&3==n.nodeType?{left:h.right<e.left?h.right:h.left,top:e.top}:e,1==l.nodeType&&g&&(s=c+(e.left>=(h.left+h.right)/2?1:0));continue}}!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(s=c+1)}}return n&&3==n.nodeType?function Joe(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let s=Ga(i,1);if(s.top!=s.bottom&&JD(e,s))return{node:t,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:t,offset:s}:_$(n,r)}function JD(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function y$(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),s=r;;){let o=t.childNodes[s];if(1==o.nodeType){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(JD(e,c))return y$(o,e,c)}}if((s=(s+1)%i)==r)break}return t}function tae(t,e){let i,n=t.dom.ownerDocument,r=0;if(n.caretPositionFromPoint)try{let l=n.caretPositionFromPoint(e.left,e.top);l&&({offsetNode:i,offset:r}=l)}catch{}if(!i&&n.caretRangeFromPoint){let l=n.caretRangeFromPoint(e.left,e.top);l&&({startContainer:i,startOffset:r}=l)}let o,s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top);if(!s||!t.dom.contains(1!=s.nodeType?s.parentNode:s)){let l=t.dom.getBoundingClientRect();if(!JD(e,l)||(s=y$(t.dom,e,l),!s))return null}if(Ei)for(let l=s;i&&l;l=Np(l))l.draggable&&(i=void 0);if(s=function Zoe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(s,e),i){if(us&&1==i.nodeType&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let c,l=i.childNodes[r];"IMG"==l.nodeName&&(c=l.getBoundingClientRect()).right<=e.left&&c.bottom>e.top&&r++}i==t.dom&&r==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(0==r||1!=i.nodeType||"BR"!=i.childNodes[r-1].nodeName)&&(o=function eae(t,e,n,i){let r=-1;for(let s=e;s!=t.dom;){let o=t.docView.nearestDesc(s,!0);if(!o)return null;if(1==o.dom.nodeType&&(o.node.isBlock&&o.parent||!o.contentDOM)){let a=o.dom.getBoundingClientRect();if(o.node.isBlock&&o.parent&&(a.left>i.left||a.top>i.top?r=o.posBefore:(a.right<i.left||a.bottom<i.top)&&(r=o.posAfter)),!o.contentDOM&&r<0)return(o.node.isBlock?i.top<(a.top+a.bottom)/2:i.left<(a.left+a.right)/2)?o.posBefore:o.posAfter}s=o.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}(t,i,r,e))}null==o&&(o=function Xoe(t,e,n){let{node:i,offset:r}=_$(e,n),s=-1;if(1==i.nodeType&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}(t,s,e));let a=t.docView.nearestDesc(s,!0);return{pos:o,inside:a?a.posAtStart-a.border:-1}}function Ga(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const nae=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function v$(t,e,n){let{node:i,offset:r,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=hv||us;if(3==i.nodeType){if(!o||!nae.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){let l=r,c=r,u=n<0?1:-1;return n<0&&!r?(c++,u=-1):n>=0&&r==i.nodeValue.length?(l--,u=1):n<0?l--:c++,Op(Ga(Wo(i,l,c),1),u<0)}{let l=Ga(Wo(i,r,r),n);if(us&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=Ga(Wo(i,r-1,r-1),-1);if(c.top==l.top){let u=Ga(Wo(i,r,r+1),-1);if(u.top!=l.top)return Op(u,u.left<c.left)}}return l}}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&r&&(n<0||r==Ks(i))){let l=i.childNodes[r-1];if(1==l.nodeType)return ZD(l.getBoundingClientRect(),!1)}if(null==s&&r<Ks(i)){let l=i.childNodes[r];if(1==l.nodeType)return ZD(l.getBoundingClientRect(),!0)}return ZD(i.getBoundingClientRect(),n>=0)}if(null==s&&r&&(n<0||r==Ks(i))){let l=i.childNodes[r-1],c=3==l.nodeType?Wo(l,Ks(l)-(o?0:1)):1!=l.nodeType||"BR"==l.nodeName&&l.nextSibling?null:l;if(c)return Op(Ga(c,1),!1)}if(null==s&&r<Ks(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?3==l.nodeType?Wo(l,0,o?0:1):1==l.nodeType?l:null:null;if(c)return Op(Ga(c,-1),!0)}return Op(Ga(3==i.nodeType?Wo(i):i,-n),n>=0)}function Op(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ZD(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function b$(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}const rae=/[\u0590-\u08ac]/;let w$=null,C$=null,E$=!1;class kp{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=0,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(i<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&(!(o=s.pmViewDesc)||o.parent!=this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(o=s.pmViewDesc)||o.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=n>mr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==n)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(null==r&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let o,s=this.getDesc(r);if(s&&(!n||s.node)){if(!i||!(o=s.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return s;i=!1}}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],s=i+r.size;if(i==e&&s!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<s)return r.descAt(e-i-r.border);i=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>e||o instanceof I$){r=e-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof T$&&s.side>=0;i--);if(n<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,s&&s.dom.parentNode!=this.contentDOM;i--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?mr(s.dom)+1:0}}{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,s&&s.dom.parentNode!=this.contentDOM;i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?mr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(-1==r&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=mr(h.dom)+1;break}e-=h.size}-1==r&&(r=0)}if(r>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=mr(d.dom);break}n+=d.size}-1==s&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return 0==n.size||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(1!=n.nodeType||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,g=0;h<this.children.length;h++){let m=this.children[h],y=g+m.size;if(s>g&&o<y)return m.setSelection(e-g-m.border,n-g-m.border,i,r);g=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=i.getSelection(),u=!1;if((us||Ei)&&e==n){let{node:h,offset:g}=a;if(3==h.nodeType){if(u=!(!g||"\n"!=h.nodeValue[g-1]),u&&g==h.nodeValue.length)for(let y,m=h;m;m=m.parentNode){if(y=m.nextSibling){"BR"==y.nodeName&&(a=l={node:y.parentNode,offset:mr(y)+1});break}let b=m.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let m=h.childNodes[g-1];u=m&&("BR"==m.nodeName||"false"==m.contentEditable)}}if(us&&c.focusNode&&c.focusNode!=l.node&&1==c.focusNode.nodeType){let h=c.focusNode.childNodes[c.focusOffset];h&&"false"==h.contentEditable&&(r=!0)}if(!(r||u&&Ei)&&_c(a.node,a.offset,c.anchorNode,c.anchorOffset)&&_c(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?e<=o&&n>=i:e<o&&n>i){let a=i+s.border,l=o-s.border;if(e>=a&&n<=l)return this.dirty=e==i||n==o?2:1,void(e!=a||n!=l||!s.contentLost&&s.dom.parentNode==this.contentDOM?s.markDirty(e-a,n-a):s.dirty=3);s.dirty=s.dom!=s.contentDOM||s.dom.parentNode!=this.contentDOM||s.children.length?3:2}i=o}this.dirty=2}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=1==e?2:1;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class T$ extends kp{constructor(e,n,i,r){let s,o=n.type.toDOM;if("function"==typeof o&&(o=o(i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:r)),!n.type.spec.raw){if(1!=o.nodeType){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return!!n&&n(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class aae extends kp{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class vc extends kp{constructor(e,n,i,r){super(e,[],i,r),this.mark=n}static create(e,n,i,r){let s=r.nodeViews[n.type.name],o=s&&s(n,r,i);return(!o||!o.dom)&&(o=Gs.renderSpec(document,n.type.spec.toDOM(n,i))),new vc(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),0!=this.dirty){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=0}}slice(e,n,i){let r=vc.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;n<o&&(s=tT(s,n,o,i)),e>0&&(s=tT(s,0,e,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}}class bc extends kp{constructor(e,n,i,r,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a,o&&this.updateChildren(l,c)}static create(e,n,i,r,s,o){let l,a=s.nodeViews[n.type.name],c=a&&a(n,s,()=>l?l.parent?l.parent.posBeforeChild(l):void 0:o,i,r),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else u||({dom:u,contentDOM:d}=Gs.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&"BR"!=u.nodeName&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=x$(u,i,n),c?l=new lae(e,n,i,r,u,d||null,h,c,s,o+1):n.isText?new fv(e,n,i,r,u,h,s):new bc(e,n,i,r,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>U.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,n,i){return 0==this.dirty&&e.eq(this.node)&&eT(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new uae(this,o&&o.node,e);(function fae(t,e,n,i){let r=e.locals(t),s=0;if(0==r.length){for(let c=0;c<t.childCount;c++){let u=t.child(c);i(u,r,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<r.length&&r[o].to==s){let y,m=r[o++];for(;o<r.length&&r[o].to==s;)(y||(y=[m])).push(r[o++]);if(y){y.sort(hae);for(let b=0;b<y.length;b++)n(y[b],c,!!l)}else n(m,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else{if(!(c<t.childCount))break;d=c,u=t.child(c++)}for(let m=0;m<a.length;m++)a[m].to<=s&&a.splice(m--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let h=s+u.nodeSize;if(u.isText){let m=h;o<r.length&&r[o].from<m&&(m=r[o].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<h&&(l=u.cut(m-s),u=u.cut(0,m-s),h=m,d=-1)}i(u,u.isInline&&!u.isLeaf?a.filter(m=>!m.inline):a.slice(),e.forChild(s,u),d),s=h}})(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ct.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,r)},(c,u,d,h)=>{let g;l.syncToMarks(c.marks,i,e),l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(g=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,g,e)||l.updateNextNode(c,u,d,e,h)||l.addNode(c,u,d,e,r),r+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),A$(this.contentDOM,this.children,e),Ld&&function pae(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t),t.style.cssText=e}}(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof bt)||i<n||r>n+this.node.content.size)return null;let s=e.domSelectionRange(),o=function gae(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=Ks(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=function mae(t,e,n,i){for(let r=0,s=0;r<t.childCount&&s<=i;){let o=t.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<t.childCount;){let c=t.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}(this.node.content,a,i-n,r-n);return l<0?null:{node:o,pos:l,text:a}}return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new aae(this,s,n,r);e.input.compositionNodes.push(o),this.children=tT(this.children,i,i+r.length,e,o)}update(e,n,i,r){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,n,i,r),0))}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(eT(e,this.outerDeco))return;let n=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=M$(this.dom,this.nodeDOM,XD(this.outerDeco,this.node,n),XD(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function S$(t,e,n,i,r){return x$(i,e,t),new bc(void 0,t,e,n,i,i,i,r,0)}class fv extends bc{constructor(e,n,i,r,s,o,a){super(e,n,i,r,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(n),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,0))}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,n,i){let r=this.node.cut(e,n),s=document.createTextNode(r.text);return new fv(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(0==e||n==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class I$ extends kp{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class lae extends bc{constructor(e,n,i,r,s,o,a,l,c,u){super(e,n,i,r,s,o,a,c,u),this.spec=l}update(e,n,i,r){if(3==this.dirty)return!1;if(this.spec.update){let s=this.spec.update(e,n,i);return s&&this.updateInner(e,n,i,r),s}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function A$(t,e,n){let i=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=i;)i=N$(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(a,i);if(o instanceof vc){let l=i?i.previousSibling:t.lastChild;A$(o.contentDOM,o.children,n),i=l?l.nextSibling:t.firstChild}}for(;i;)i=N$(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const Pp=function(t){t&&(this.nodeName=t)};Pp.prototype=Object.create(null);const wc=[new Pp];function XD(t,e,n){if(0==t.length)return wc;let i=n?wc[0]:new Pp,r=[i];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&r.push(i=new Pp(o.nodeName));for(let a in o){let l=o[a];null!=l&&(n&&1==r.length&&r.push(i=new Pp(e.isInline?"span":"div")),"class"==a?i.class=(i.class?i.class+" ":"")+l:"style"==a?i.style=(i.style?i.style+";":"")+l:"nodeName"!=a&&(i[a]=l))}}}return r}function M$(t,e,n,i){if(n==wc&&i==wc)return e;let r=e;for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=t&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=wc[0]),r=l}cae(r,a||wc[0],o)}return r}function cae(t,e,n){for(let i in e)"class"!=i&&"style"!=i&&"nodeName"!=i&&!(i in n)&&t.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)-1==r.indexOf(i[s])&&t.classList.remove(i[s]);for(let s=0;s<r.length;s++)-1==i.indexOf(r[s])&&t.classList.add(r[s]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function x$(t,e,n){return M$(t,t,wc,XD(e,n,1!=t.nodeType))}function eT(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function N$(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class uae{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function dae(t,e){let n=e,i=n.children.length,r=t.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(i){let c=n.children[i-1];if(!(c instanceof vc)){a=c,i--;break}n=c,i=c.children.length}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vc.create(this.top,e[s],n,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,i,r){let o,s=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,i)&&!this.preMatch.matched.has(c)){s=a;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))}updateNodeAt(e,n,i,r,s){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,n,i,s)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i)for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r;return-1}e=n}}updateNextNode(e,n,i,r,s){for(let o=this.index;o<this.top.children.length;o++){let a=this.top.children[o];if(a instanceof bc){let l=this.preMatch.matched.get(a);if(null!=l&&l!=s)return!1;let c=a.dom;if((!this.isLocked(c)||e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&eT(n,a.outerDeco))&&a.update(e,n,i,r))return this.destroyBetween(this.index,o),a.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(e,n,i,r,s){this.top.children.splice(this.index++,0,bc.create(this.top,e,n,i,r,s)),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let s=new T$(this.top,e,n,i);this.top.children.splice(this.index++,0,s),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof fv)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ei||Ci)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);"IMG"==e&&(i.className="ProseMirror-separator",i.alt=""),"BR"==e&&(i.className="ProseMirror-trailingBreak");let r=new I$(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function hae(t,e){return t.type.side-e.type.side}function tT(t,e,n,i,r){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,i)),r&&(s.push(r),r=void 0),u>n&&s.push(l.slice(n-c,l.size,i)))}return s}function nT(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),s=r&&0==r.size,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l,c,a=i.resolve(o);if(dv(n)){for(l=a;r&&!r.node;)r=r.parent;let u=r.node;if(r&&u.isAtom&&ve.isSelectable(u)&&r.parent&&(!u.isInline||!function $oe(t,e,n){for(let i=0==e,r=e==Ks(t);i||r;){if(t==n)return!0;let s=mr(t);if(!(t=t.parentNode))return!1;i=i&&0==s,r=r&&s==Ks(t)}}(n.focusNode,n.focusOffset,r.dom))){let d=r.posBefore;c=new ve(o==d?a:i.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=i.resolve(u)}return c||(c=rT(t,l,a,"pointer"==e||t.state.selection.head<a.pos&&!s?1:-1)),c}function O$(t){return t.editable?t.hasFocus():V$(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qo(t,e=!1){let n=t.state.selection;if(F$(t,n),O$(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ci){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&_c(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function yae(t){let e=t.domSelection(),n=document.createRange(),i=t.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,mr(i)+1):n.setEnd(i,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&Yi&&ja<=11&&(i.disabled=!0,i.disabled=!1)}(t);else{let s,o,{anchor:i,head:r}=n;k$&&!(n instanceof bt)&&(n.$from.parent.inlineContent||(s=P$(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=P$(t,n.to))),t.docView.setSelection(i,r,t.root,e),k$&&(s&&R$(s),o&&R$(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function _ae(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!O$(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const k$=Ei||Ci&&zoe<63;function P$(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(Ei&&r&&"false"==r.contentEditable)return iT(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return iT(r);if(s)return iT(s)}}function iT(t){return t.contentEditable="true",Ei&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function R$(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function F$(t,e){if(e instanceof ve){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(L$(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else L$(t)}function L$(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function rT(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||bt.between(e,n,i)}function B$(t){return!(t.editable&&!t.hasFocus())&&V$(t)}function V$(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function sT(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&st.findFrom(s,e)}function Cc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function H$(t,e,n){let i=t.state.selection;if(!(i instanceof bt)){if(i instanceof ve&&i.node.isInline)return Cc(t,new bt(e>0?i.$to:i.$from));{let r=sT(t.state,e);return!!r&&Cc(t,r)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let r=sT(t.state,e);return!!(r&&r instanceof ve)&&Cc(t,r)}if(!(Vr&&n.indexOf("m")>-1)){let o,r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText)return!1;let a=e<0?r.pos-s.nodeSize:r.pos;return!!(s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM)&&(ve.isSelectable(s)?Cc(t,new ve(e<0?t.state.doc.resolve(r.pos-s.nodeSize):r)):!!hv&&Cc(t,new bt(t.state.doc.resolve(e<0?a:a+s.nodeSize))))}}function pv(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Rp(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function oT(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,s,o=!1;for(us&&1==n.nodeType&&i<pv(n)&&Rp(n.childNodes[i])&&(o=!0);;)if(i>0){if(1!=n.nodeType)break;{let a=n.childNodes[i-1];if(Rp(a))r=n,s=--i;else{if(3!=a.nodeType)break;n=a,i=n.nodeValue.length}}}else{if($$(n))break;{let a=n.previousSibling;for(;a&&Rp(a);)r=n.parentNode,s=mr(a),a=a.previousSibling;if(a)n=a,i=pv(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}o?lT(t,n,i):r&&lT(t,r,s)}function aT(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let s,o,r=pv(n);for(;;)if(i<r){if(1!=n.nodeType)break;if(!Rp(n.childNodes[i]))break;s=n,o=++i}else{if($$(n))break;{let a=n.nextSibling;for(;a&&Rp(a);)s=a.parentNode,o=mr(a)+1,a=a.nextSibling;if(a)n=a,i=0,r=pv(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}s&&lT(t,s,o)}function $$(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function lT(t,e,n){let i=t.domSelection();if(dv(i)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&qo(t)},50)}function U$(t,e,n){let i=t.state.selection;if(i instanceof bt&&!i.empty||n.indexOf("s")>-1||Vr&&n.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=sT(t.state,e);if(o&&o instanceof ve)return Cc(t,o)}if(!r.parent.inlineContent){let o=e<0?r:s,a=i instanceof gr?st.near(o,e):st.findFrom(o,e);return!!a&&Cc(t,a)}return!1}function j$(t,e){if(!(t.state.selection instanceof bt))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function z$(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function G$(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,s--;let g=i.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),i=g.content}let o=t.someProp("clipboardSerializer")||Gs.fromSchema(t.state.schema),a=X$(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let u,c=l.firstChild,d=0;for(;c&&1==c.nodeType&&(u=J$[c.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let m=a.createElement(u[g]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,"\n\n")}}function W$(t,e,n,i,r){let o,a,s=r.parent.type.spec.code;if(!n&&!e)return null;let l=e&&(i||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||i,t)}),s)return e?new ne(U.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):ne.empty;let d=t.someProp("clipboardTextParser",h=>h(e,r,i,t));if(d)a=d;else{let h=r.marks(),{schema:g}=t.state,m=Gs.fromSchema(g);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let b=o.appendChild(document.createElement("p"));y&&b.appendChild(m.serializeNode(g.text(y,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=function Tae(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r,n=X$().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((r=i&&J$[i[1].toLowerCase()])&&(t=r.map(s=>"<"+s+">").join("")+t+r.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,r)for(let s=0;s<r.length;s++)n=n.querySelector(r[s])||n;return n}(n),hv&&function Sae(t){let e=t.querySelectorAll(Ci?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];1==i.childNodes.length&&"\xa0"==i.textContent&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&1!=h.nodeType;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||mc.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!(!l&&!u),context:r,ruleFromNode:h=>"BR"!=h.nodeName||h.nextSibling||!h.parentNode||Eae.test(h.parentNode.nodeName)?null:{ignore:!0}})),u)a=function Iae(t,e){if(!t.size)return t;let i,n=t.content.firstChild.type.schema;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:s,openEnd:o}=t;for(let a=i.length-2;a>=0;a-=2){let l=n.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=U.from(l.create(i[a+1],r)),s++,o++}return new ne(r,s,o)}(Q$(a,+u[1],+u[2]),u[4]);else if(a=ne.maxOpen(function Dae(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s,r=e.node(n).contentMatchAt(e.index(n)),o=[];if(t.forEach(a=>{if(!o)return;let c,l=r.findWrapping(a.type);if(!l)return o=null;if(c=o.length&&s.length&&K$(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Y$(o[o.length-1],s.length));let u=q$(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return U.from(o)}return t}(a.content,r),!0),a.openStart||a.openEnd){let d=0,h=0;for(let g=a.content.firstChild;d<a.openStart&&!g.type.spec.isolating;d++,g=g.firstChild);for(let g=a.content.lastChild;h<a.openEnd&&!g.type.spec.isolating;h++,g=g.lastChild);a=Q$(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const Eae=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function q$(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,U.from(t));return t}function K$(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let s=K$(t,e,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(U.from(q$(n,t,r+1))))}}function Y$(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Y$(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(U.empty,!0);return t.copy(n.append(i))}function cT(t,e,n,i,r,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return r<i-1&&(a=cT(a,e,n,i,r+1,s)),r>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,t.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(U.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Q$(t,e,n){return e<t.openStart&&(t=new ne(cT(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ne(cT(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const J$={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z$=null;function X$(){return Z$||(Z$=document.implementation.createHTMLDocument("title"))}const Di={},Ti={},Aae={touchstart:!0,touchmove:!0};class Mae{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Wa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function uT(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>dT(t,i))})}function dT(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return!!i&&(i(t,e)||e.defaultPrevented)})}function Oae(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function gv(t){return{left:t.clientX,top:t.clientY}}function hT(t,e,n,i,r){if(-1==i)return!1;let s=t.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),r,!0):a(t,n,s.node(o),s.before(o),r,!1)))return!0;return!1}function Hd(t,e,n){t.focused||t.focus();let i=t.state.tr.setSelection(e);"pointer"==n&&i.setMeta("pointer",!0),t.dispatch(i)}function Bae(t,e,n,i){return hT(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function Vae(t,e,n,i){return hT(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||function Hae(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(Hd(t,bt.create(i,0,i.content.size),"pointer"),!0);let r=i.resolve(e);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)Hd(t,bt.create(i,a+1,a+1+o.content.size),"pointer");else{if(!ve.isSelectable(o))continue;Hd(t,ve.create(i,a),"pointer")}return!0}}(t,n,i)}function fT(t){return mv(t)}Ti.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!tU(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!ds||!Ci||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!Ld||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",i=>i(t,n))||function Cae(t,e){let n=e.keyCode,i=function wae(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||Vr&&72==n&&"c"==i?j$(t,-1)||oT(t):46==n||Vr&&68==n&&"c"==i?j$(t,1)||aT(t):13==n||27==n||(37==n||Vr&&66==n&&"c"==i?H$(t,-1,i)||oT(t):39==n||Vr&&70==n&&"c"==i?H$(t,1,i)||aT(t):38==n||Vr&&80==n&&"c"==i?U$(t,-1,i)||oT(t):40==n||Vr&&78==n&&"c"==i?function bae(t){if(!Ei||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let i=e.firstChild;z$(t,i,"true"),setTimeout(()=>z$(t,i,"false"),20)}return!1}(t)||U$(t,1,i)||aT(t):i==(Vr?"m":"c")&&(66==n||73==n||89==n||90==n))}(t,n)?n.preventDefault():Wa(t,"key");else{let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,yc(13,"Enter"))),t.input.lastIOSEnter=0)},200)}},Ti.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Ti.keypress=(t,e)=>{let n=e;if(tU(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Vr&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n)))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof bt&&i.$from.sameParent(i.$to))){let r=String.fromCharCode(n.charCode);!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",s=>s(t,i.$from.pos,i.$to.pos,r))&&t.dispatch(t.state.tr.insertText(r).scrollIntoView()),n.preventDefault()}};const eU=Vr?"metaKey":"ctrlKey";Di.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=fT(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&function Pae(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}(n,t.input.lastClick)&&!n[eU]&&("singleClick"==t.input.lastClick.type?s="doubleClick":"doubleClick"==t.input.lastClick.type&&(s="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(gv(n));o&&("singleClick"==s?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $ae(t,o,n,!!i)):("doubleClick"==s?Bae:Vae)(t,o.pos,o.inside,n)?n.preventDefault():Wa(t,"pointer"))};class $ae{constructor(e,n,i,r){let s,o;if(this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[eU],this.allowDefault=i.shiftKey,n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=r?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(0==i.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||c instanceof ve&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!us||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(gv(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wa(this.view,"pointer"):function Lae(t,e,n,i,r){return hT(t,"handleClickOn",e,n,i)||t.someProp("handleClick",s=>s(t,e,i))||(r?function Fae(t,e){if(-1==e)return!1;let i,r,n=t.state.selection;n instanceof ve&&(i=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ve.isSelectable(a)){r=i&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?s.before(n.$from.depth):s.before(o);break}}return null!=r&&(Hd(t,ve.create(t.state.doc,r),"pointer"),!0)}(t,n):function Rae(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&ve.isSelectable(i))&&(Hd(t,new ve(n),"pointer"),!0)}(t,n))}(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Ei&&this.mightDrag&&!this.mightDrag.node.isAtom||Ci&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Hd(this.view,st.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Wa(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wa(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function tU(t,e){return!!t.composing||!!(Ei&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Di.touchstart=t=>{t.input.lastTouch=Date.now(),fT(t),Wa(t,"pointer")},Di.touchmove=t=>{t.input.lastTouch=Date.now(),Wa(t,"pointer")},Di.contextmenu=t=>fT(t);const Uae=ds?5e3:-1;function nU(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>mv(t),e))}function iU(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function jae(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function mv(t,e=!1){if(!(ds&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),iU(t),e||t.docView&&t.docView.dirty){let n=nT(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}Ti.compositionstart=Ti.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>!1===i.type.spec.inclusive)))t.markCursor=t.state.storedMarks||n.marks(),mv(t,!0),t.markCursor=null;else if(mv(t),us&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&1==r.nodeType&&0!=s;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(3==o.nodeType){t.domSelection().collapse(o,o.nodeValue.length);break}r=o,s=-1}}t.input.composing=!0}nU(t,Uae)},Ti.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,nU(t,20))};const $d=Yi&&ja<15||Ld&&Goe<604;function Fp(t,e,n,i,r){let s=W$(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,r,s||ne.empty)))return!0;if(!s)return!1;let o=function Gae(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(s),a=o?t.state.tr.replaceSelectionWith(o,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Di.copy=Ti.cut=(t,e)=>{let n=e,i=t.state.selection,r="cut"==n.type;if(i.empty)return;let s=$d?null:n.clipboardData,o=i.content(),{dom:a,text:l}=G$(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):function zae(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Ti.paste=(t,e)=>{let n=e;if(t.composing&&!ds)return;let i=$d?null:n.clipboardData;i&&Fp(t,i.getData("text/plain"),i.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():function Wae(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Fp(t,i.value,null,t.input.shiftKey,e):Fp(t,i.textContent,i.innerHTML,t.input.shiftKey,e)},50)}(t,n)};class qae{constructor(e,n){this.slice=e,this.move=n}}const rU=Vr?"altKey":"ctrlKey";Di.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,s=r.empty?null:t.posAtCoords(gv(n));if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof ve?r.to-1:r.to)))if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(ve.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(ve.create(t.state.doc,c.posBefore)))}let o=t.state.selection.content(),{dom:a,text:l}=G$(t,o);n.dataTransfer.clearData(),n.dataTransfer.setData($d?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",$d||n.dataTransfer.setData("text/plain",l),t.dragging=new qae(o,!n[rU])},Di.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)},Ti.dragover=Ti.dragenter=(t,e)=>e.preventDefault(),Ti.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(gv(n));if(!r)return;let s=t.state.doc.resolve(r.pos),o=i&&i.slice;o?t.someProp("transformPasted",m=>{o=m(o,t)}):o=W$(t,n.dataTransfer.getData($d?"Text":"text/plain"),$d?null:n.dataTransfer.getData("text/html"),!1,s);let a=!(!i||n[rU]);if(t.someProp("handleDrop",m=>m(t,n,o||ne.empty,a)))return void n.preventDefault();if(!o)return;n.preventDefault();let l=o?function Aoe(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let s=0;s<n.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(1==s)u=c.canReplace(l,l,r);else{let d=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return 0==a?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}(t.state.doc,s.pos,o):s.pos;null==l&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let g=c.doc.resolve(u);if(d&&ve.isSelectable(o.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ve(g));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,b,C,E)=>m=E),c.setSelection(rT(t,g,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))},Di.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qo(t)},20))},Di.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Di.beforeinput=(t,e)=>{if(Ci&&ds&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,yc(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in Ti)Di[t]=Ti[t];function Lp(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class pT{constructor(e,n){this.toDOM=e,this.spec=n||Ec,this.side=this.spec.side||0}map(e,n,i,r){let{pos:s,deleted:o}=e.mapResult(n.from+r,this.side<0?-1:1);return o?null:new Hr(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof pT&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Lp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qa{constructor(e,n){this.attrs=e,this.spec=n||Ec}map(e,n,i,r){let s=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,o=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new Hr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof qa&&Lp(this.attrs,e.attrs)&&Lp(this.spec,e.spec)}static is(e){return e.type instanceof qa}destroy(){}}class gT{constructor(e,n){this.attrs=e,this.spec=n||Ec}map(e,n,i,r){let s=e.mapResult(n.from+r,1);if(s.deleted)return null;let o=e.mapResult(n.to+r,-1);return o.deleted||o.pos<=s.pos?null:new Hr(s.pos-i,o.pos-i,this)}valid(e,n){let s,{index:i,offset:r}=e.content.findIndex(n.from);return r==n.from&&!(s=e.child(i)).isText&&r+s.nodeSize==n.to}eq(e){return this==e||e instanceof gT&&Lp(this.attrs,e.attrs)&&Lp(this.spec,e.spec)}destroy(){}}class Hr{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new Hr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new Hr(e,e,new pT(n,i))}static inline(e,n,i,r){return new Hr(e,n,new qa(i,r))}static node(e,n,i,r){return new Hr(e,n,new gT(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof qa}}const Ud=[],Ec={};class gn{constructor(e,n){this.local=e.length?e:Ud,this.children=n.length?n:Ud}static create(e,n){return n.length?_v(n,e,0,Ec):ai}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,i,r+a,s)}}map(e,n,i){return this==ai||0==e.maps.length?this:this.mapInner(e,n,0,0,i||Ec)}mapInner(e,n,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,r);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?function Kae(t,e,n,i,r,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,g,m,y)=>{let b=y-m-(g-h);for(let C=0;C<a.length;C+=3){let E=a[C+1];if(E<0||h>E+u-d)continue;let R=a[C]+u-d;g>=R?a[C+1]=h<=R?-2:-1:m>=r&&b&&(a[C]+=b,a[C+1]+=b)}d+=b}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-r;if(d<0||d>=i.content.size){l=!0;continue}let g=n.map(t[c+1]+s,-1)-r,{index:m,offset:y}=i.content.findIndex(d),b=i.maybeChild(m);if(b&&y==d&&y+b.nodeSize==g){let C=a[c+2].mapInner(n,b,u+1,t[c]+s+1,o);C!=ai?(a[c]=d,a[c+1]=g,a[c+2]=C):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=function Yae(t,e,n,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,r,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+s+1);return n}(a,t,e,n,r,s,o),u=_v(c,i,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let g=u.children[d];for(;h<a.length&&a[h]<g;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new gn(e.sort(Dc),a)}(this.children,o||[],e,n,i,r,s):o?new gn(o.sort(Dc),Ud):ai}add(e,n){return n.length?this==ai?gn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,s=0;e.forEach((a,l)=>{let u,c=l+i;if(u=oU(n,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,_v(u,a,c+1,Ec)),s+=3}});let o=sU(s?aU(n):n,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new gn(o.length?this.local.concat(o).sort(Dc):this.local,r||this.children)}remove(e){return 0==e.length||this==ai?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+n,l=i[s+1]+n;for(let d,u=0;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=ai?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length)for(let o,s=0;s<e.length;s++)if(o=e[s])for(let a=0;a<r.length;a++)r[a].eq(o,n)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1));return i==this.children&&r==this.local?this:r.length||i.length?new gn(r,i):ai}forChild(e,n){if(this==ai)return this;if(n.isLeaf)return gn.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof qa){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new gn(r.sort(Dc),Ud);return i?new Ka([a,i]):a}return i||ai}eq(e){if(this==e)return!0;if(!(e instanceof gn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return mT(this.localsInner(e))}localsInner(e){if(this==ai)return Ud;if(e.inlineContent||!this.local.some(qa.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof qa||n.push(this.local[i]);return n}}gn.empty=new gn([],[]),gn.removeOverlap=mT;const ai=gn.empty;class Ka{constructor(e){this.members=e}map(e,n){const i=this.members.map(r=>r.map(e,n,Ec));return Ka.from(i)}forChild(e,n){if(n.isLeaf)return gn.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,n);s!=ai&&(s instanceof Ka?i=i.concat(s.members):i.push(s))}return Ka.from(i)}eq(e){if(!(e instanceof Ka)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(n){i&&(n=n.slice(),i=!1);for(let o=0;o<s.length;o++)n.push(s[o])}else n=s}return n?mT(i?n:n.sort(Dc)):Ud}static from(e){switch(e.length){case 0:return ai;case 1:return e[0];default:return new Ka(e.every(n=>n instanceof gn)?e:e.reduce((n,i)=>n.concat(i instanceof gn?i:i.members),[]))}}}function sU(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new Hr(r.from+e,r.to+e,r.type))}return n}function oU(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let o,s=0;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<i&&((r||(r=[])).push(o),t[s]=null);return r}function aU(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function _v(t,e,n,i){let r=[],s=!1;e.forEach((a,l)=>{let c=oU(t,a,l+n);if(c){s=!0;let u=_v(c,a,n+l+1,i);u!=ai&&r.push(l,l+a.nodeSize,u)}});let o=sU(s?aU(t):t,-n).sort(Dc);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new gn(o,r):ai}function Dc(t,e){return t.from-e.from||t.to-e.to}function mT(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let s=e[r];if(s.from!=i.from){s.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,s.from),lU(e,r,i.copy(s.from,i.to)));break}s.to!=i.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,i.to),lU(e,r+1,s.copy(i.to,s.to)))}}return e}function lU(t,e,n){for(;e<t.length&&Dc(n,t[e])>0;)e++;t.splice(e,0,n)}function _T(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=ai&&e.push(i)}),t.cursorWrapper&&e.push(gn.create(t.state.doc,[t.cursorWrapper.deco])),Ka.from(e)}const Qae={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Jae=Yi&&ja<=11;class Zae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Xae{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zae,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);Yi&&ja<=11&&i.some(r=>"childList"==r.type&&r.removedNodes.length||"characterData"==r.type&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Jae&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Qae)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(B$(this.view)){if(this.suppressingSelectionUpdates)return qo(this.view);if(Yi&&ja<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&_c(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let i,n=new Set;for(let s=e.focusNode;s;s=Np(s))n.add(s);for(let s=e.anchorNode;s;s=Np(s))if(n.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);return r&&r.ignoreMutation({type:"selection",target:3==i.nodeType?i.parentNode:i})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&B$(e)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(us&&l.length>1){let u=l.filter(d=>"BR"==d.nodeName);if(2==u.length){let d=u[0],h=u[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}let c=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&dv(i)&&(c=nT(e))&&c.eq(st.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qo(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,o),function ele(t){if(!cU.has(t)&&(cU.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=us,uU)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),uU=!0}}(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||qo(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(i==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if("childList"==e.type){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,s=e.nextSibling;if(Yi&&ja<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(r=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=r&&r.parentNode==e.target?mr(r)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?mr(s):e.target.childNodes.length;return{from:a,to:i.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let cU=new WeakMap,uU=!1;function ile(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(Ei&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||Ei&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}function dU(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:rT(t,e.resolve(n.anchor),e.resolve(n.head))}function yT(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let s=t.node(i).maybeChild(t.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}class lle{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Mae,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(mU),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=pU(this),fU(this),this.nodeViews=gU(this),this.docView=S$(this.state.doc,hU(this),_T(this),this.dom,this),this.domObserver=new Xae(this,(i,r,s,o)=>function rle(t,e,n,i,r){if(e<0){let Y=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,Ae=nT(t,Y);if(Ae&&!t.state.selection.eq(Ae)){if(Ci&&ds&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",qt=>qt(t,yc(13,"Enter"))))return;let We=t.state.tr.setSelection(Ae);"pointer"==Y?We.setMeta("pointer",!0):"key"==Y&&We.scrollIntoView(),t.dispatch(We)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(n);e=s.before(o+1),n=t.state.doc.resolve(n).after(o+1);let d,h,a=t.state.selection,l=function nle(t,e,n){let c,{node:i,fromOffset:r,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u=l.anchorNode;if(u&&t.dom.contains(1==u.nodeType?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],dv(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ci&&8===t.input.lastKeyCode)for(let b=s;b>r;b--){let C=i.childNodes[b-1],E=C.pmViewDesc;if("BR"==C.nodeName&&!E){s=b;break}if(!E||E.size)break}let d=t.state.doc,h=t.someProp("domParser")||mc.fromSchema(t.state.schema),g=d.resolve(o),m=null,y=h.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:r,to:s,preserveWhitespace:"pre"!=g.parent.type.whitespace||"full",findPositions:c,ruleFromNode:ile,context:g});if(c&&null!=c[0].pos){let b=c[0].pos,C=c[1]&&c[1].pos;null==C&&(C=b),m={anchor:b+o,head:C+o}}return{doc:y,sel:m,from:o,to:a}}(t,e,n),c=t.state.doc,u=c.slice(l.from,l.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let g=function ale(t,e,n,i,r){let s=t.findDiffStart(e,n);if(null==s)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);return"end"==r&&(i-=o+Math.max(0,s-Math.min(o,a))-s),o<s&&t.size<e.size?(s-=i<=s&&i>=o?s-i:0,a=s+(a-o),o=s):a<s&&(s-=i<=s&&i>=a?s-i:0,o=s+(o-a),a=s),{start:s,endA:o,endB:a}}(u.content,l.doc.content,l.from,d,h);if((Ld&&t.input.lastIOSEnter>Date.now()-225||ds)&&r.some(Y=>"DIV"==Y.nodeName||"P"==Y.nodeName||"LI"==Y.nodeName)&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",Y=>Y(t,yc(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(!g){if(!(i&&a instanceof bt&&!a.empty&&a.$head.sameParent(a.$anchor))||t.composing||l.sel&&l.sel.anchor!=l.sel.head){if(l.sel){let Y=dU(t,t.state.doc,l.sel);Y&&!Y.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(Y))}return}g={start:a.from,endA:a.to,endB:a.to}}if(Ci&&t.cursorWrapper&&l.sel&&l.sel.anchor==t.cursorWrapper.deco.from&&l.sel.head==l.sel.anchor){let Y=g.endB-g.start;l.sel={anchor:l.sel.anchor+Y,head:l.sel.anchor+Y}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof bt&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=l.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=l.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Yi&&ja<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>l.from&&" \xa0"==l.doc.textBetween(g.start-l.from-1,g.start-l.from+1)&&(g.start--,g.endA--,g.endB--);let E,m=l.doc.resolveNoCache(g.start-l.from),y=l.doc.resolveNoCache(g.endB-l.from),b=c.resolve(g.start),C=m.sameParent(y)&&m.parent.inlineContent&&b.end()>=g.endA;if((Ld&&t.input.lastIOSEnter>Date.now()-225&&(!C||r.some(Y=>"DIV"==Y.nodeName||"P"==Y.nodeName))||!C&&m.pos<l.doc.content.size&&(E=st.findFrom(l.doc.resolve(m.pos+1),1,!0))&&E.head==y.pos)&&t.someProp("handleKeyDown",Y=>Y(t,yc(13,"Enter"))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>g.start&&function ole(t,e,n,i,r){if(!i.parent.isTextblock||n-e<=r.pos-i.pos||yT(i,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(yT(s,!0,!0));return!(!o.parent.isTextblock||o.pos>n||yT(o,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(o.parent.content)}(c,g.start,g.endA,m,y)&&t.someProp("handleKeyDown",Y=>Y(t,yc(8,"Backspace"))))return void(ds&&Ci&&t.domObserver.suppressSelectionUpdates());Ci&&ds&&g.endB==g.start&&(t.input.lastAndroidDelete=Date.now()),ds&&!C&&m.start()!=y.start()&&0==y.parentOffset&&m.depth==y.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==g.endA&&(g.endB-=2,y=l.doc.resolveNoCache(g.endB-l.from),setTimeout(()=>{t.someProp("handleKeyDown",function(Y){return Y(t,yc(13,"Enter"))})},20));let j,se,ce,R=g.start,B=g.endA;if(C)if(m.pos==y.pos)Yi&&ja<=11&&0==m.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qo(t),20)),j=t.state.tr.delete(R,B),se=c.resolve(g.start).marksAcross(c.resolve(g.endA));else if(g.endA==g.endB&&(ce=function sle(t,e){let o,a,l,n=t.firstChild.marks,i=e.firstChild.marks,r=n,s=i;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(1==r.length&&0==s.length)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else{if(0!=r.length||1!=s.length)return null;a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks))}let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(U.from(c).eq(t))return{mark:a,type:o}}(m.parent.content.cut(m.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,g.endA-b.start()))))j=t.state.tr,"add"==ce.type?j.addMark(R,B,ce.mark):j.removeMark(R,B,ce.mark);else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){let Y=m.parent.textBetween(m.parentOffset,y.parentOffset);if(t.someProp("handleTextInput",Ae=>Ae(t,R,B,Y)))return;j=t.state.tr.insertText(Y,R,B)}if(j||(j=t.state.tr.replace(R,B,l.doc.slice(g.start-l.from,g.endB-l.from))),l.sel){let Y=dU(t,j.doc,l.sel);Y&&!(Ci&&ds&&t.composing&&Y.empty&&(g.start!=g.endB||t.input.lastAndroidDelete<Date.now()-100)&&(Y.head==R||Y.head==j.mapping.map(B)-1)||Yi&&Y.empty&&Y.head==R)&&j.setSelection(Y)}se&&j.ensureMarks(se),t.dispatch(j.scrollIntoView())}(this,i,r,s,o)),this.domObserver.start(),function xae(t){for(let e in Di){let n=Di[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{Oae(t,i)&&!dT(t,i)&&(t.editable||!(i.type in Ti))&&n(t,i)},Aae[e]?{passive:!0}:void 0)}Ei&&t.dom.addEventListener("input",()=>null),uT(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&uT(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(mU),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let i=this.state,r=!1,s=!1;e.storedMarks&&this.composing&&(iU(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=gU(this);(function ule(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i})(h,this.nodeViews)&&(this.nodeViews=h,r=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&uT(this),this.editable=pU(this),fU(this);let a=_T(this),l=hU(this),c=i.plugins==e.plugins||i.doc.eq(e.doc)?e.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(i.selection))&&(s=!0);let d="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function Koe(t){let i,r,e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top);for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:g$(t.dom)}}(this);if(s){this.domObserver.stop();let h=u&&(Yi||Ci)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&function cle(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}(i.selection,e.selection);if(u){let g=Ci?this.trackWrites=this.domSelectionRange().focusNode:null;(r||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=S$(e.doc,l,a,this.dom,this)),g&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function vae(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return _c(e.node,e.offset,n.anchorNode,n.anchorOffset)}(this))?qo(this,h):(F$(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function Yoe({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;m$(n,0==i?0:i-e)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ve){let n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&p$(this,n.getBoundingClientRect(),e)}else p$(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}}someProp(e,n){let r,i=this._props&&this._props[e];if(null!=i&&(r=n?n(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(null!=a&&(r=n?n(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(null!=a&&(r=n?n(a):a))return r}}hasFocus(){if(Yi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function Qoe(t){if(t.setActive)return t.setActive();if(Bd)return t.focus(Bd);let e=g$(t);t.focus(null==Bd?{get preventScroll(){return Bd={preventScroll:!0},!0}}:void 0),Bd||(Bd=!1,m$(e,0))}(this.dom),qo(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let n=this.dom.parentNode;n;n=n.parentNode)if(9==n.nodeType||11==n.nodeType&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n;return e||document}posAtCoords(e){return tae(this,e)}coordsAtPos(e,n=1){return v$(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return function oae(t,e,n){return w$==e&&C$==n?E$:(w$=e,C$=n,E$="up"==n||"down"==n?function iae(t,e,n){let i=e.selection,r="up"==n?i.$from:i.$to;return b$(t,e,()=>{let{node:s}=t.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=v$(t,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(1==a.nodeType)l=a.getClientRects();else{if(3!=a.nodeType)continue;l=Wo(a,0,a.nodeValue.length).getClientRects()}for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&("up"==n?o.top-u.top>2*(u.bottom-o.top):u.bottom-o.bottom>2*(o.bottom-u.top)))return!1}}return!0})}(t,e,n):function sae(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=t.domSelection();return rae.test(i.parent.textContent)&&a.modify?b$(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let g=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),b=m&&!g.contains(1==m.nodeType?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return null!=h&&(a.caretBidiLevel=h),b}):"left"==n||"backward"==n?s:o}(t,e,n))}(this,n||this.state,e)}pasteHTML(e,n){return Fp(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Fp(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(function Nae(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],_T(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function kae(t,e){!dT(t,e)&&Di[e.type]&&(t.editable||!(e.type in Ti))&&Di[e.type](t,e)}(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Ei&&11===this.root.nodeType&&function joe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom?function tle(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return _c(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function hU(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let i in n)"class"==i&&(e.class+=" "+n[i]),"style"==i?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&"contenteditable"!=i&&"nodeName"!=i&&(e[i]=String(n[i]))}),[Hr.node(0,t.state.doc.content.size,e)]}function fU(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Hr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function pU(t){return!t.someProp("editable",e=>!1===e(t.state))}function gU(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mU(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const dle=["ol",0],hle=["ul",0],fle=["li",0],_U={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1==t.attrs.order?dle:["ol",{start:t.attrs.order},0]};function mle(t){return function(e,n){let{$from:i,$to:r,node:s}=e.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(r))return!1;let o=i.node(-1);if(o.type!=t)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(3==i.depth||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){let u=U.empty,d=i.index(-1)?1:i.index(-2)?2:3;for(let b=i.depth-d;b>=i.depth-3;b--)u=U.from(i.node(b).copy(u));let h=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;u=u.append(U.from(t.createAndFill()));let g=i.before(i.depth-(d-1)),m=e.tr.replace(g,i.after(-h),new ne(u,4-d,0)),y=-1;m.doc.nodesBetween(g,m.doc.content.size,(b,C)=>{if(y>-1)return!1;b.isTextblock&&0==b.content.size&&(y=C+1)}),y>-1&&m.setSelection(st.near(m.doc.resolve(y))),n(m.scrollIntoView())}return!0}let a=r.pos==i.end()?o.contentMatchAt(0).defaultType:null,l=e.tr.delete(i.pos,r.pos),c=a?[null,{type:a}]:void 0;return!!Od(l.doc,i.pos,2,c)&&(n&&n(l.split(i.pos,2,c).scrollIntoView()),!0)}}function bU(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==t);return!!s&&(!n||(i.node(s.depth-1).type==t?function _le(t,e,n,i){let r=t.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new zn(s-1,o,s,o,new ne(U.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new ev(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));const a=Ip(i);if(null==a)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return lv(r.doc,l)&&r.join(l),e(r.scrollIntoView()),!0}(e,n,t,s):function yle(t,e,n){let i=t.tr,r=n.parent;for(let g=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)g-=r.child(m).nodeSize,i.delete(g-1,g+1);let s=i.doc.resolve(n.start),o=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?U.empty:U.from(r))))return!1;let d=s.pos,h=d+o.nodeSize;return i.step(new zn(d-(a?1:0),h+(l?1:0),d+1,h-1,new ne((a?U.empty:U.from(r.copy(U.empty))).append(l?U.empty:U.from(r.copy(U.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}(e,n,s)))}}function wU(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(0==o)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=U.from(c?t.create():null),d=new ne(U.from(t.create(null,U.from(a.type.create(null,u)))),c?3:1,0),h=s.start,g=s.end;n(e.tr.step(new zn(h-(c?3:1),g,h,g,d,1,!0)).scrollIntoView())}return!0}}const vle={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),title:t.getAttribute("title"),target:t.getAttribute("target")})}],toDOM(t){const{href:e,title:n,target:i}=t.attrs;return["a",{href:e,title:n,target:i},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:t=>({color:t})}],toDOM(t){const{color:e}=t.attrs;return["span",{style:`color:${e};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:t=>({backgroundColor:t})}],toDOM(t){const{backgroundColor:e}=t.attrs;return["span",{style:`background-color:${e};`},0]}}},Cle={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(t){const{textAlign:e}=t.style;return{align:t.getAttribute("align")||e||null}}}],toDOM(t){const{align:e}=t.attrs;return["p",{style:bH({textAlign:"left"!==e?e:null})||null},0]}},Tle={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(t){const{textAlign:e}=t.style;return{level:1,align:t.getAttribute("align")||e||null}}},{tag:"h2",getAttrs(t){const{textAlign:e}=t.style;return{level:2,align:t.getAttribute("align")||e||null}}},{tag:"h3",getAttrs(t){const{textAlign:e}=t.style;return{level:3,align:t.getAttribute("align")||e||null}}},{tag:"h4",getAttrs(t){const{textAlign:e}=t.style;return{level:4,align:t.getAttribute("align")||e||null}}},{tag:"h5",getAttrs(t){const{textAlign:e}=t.style;return{level:5,align:t.getAttribute("align")||e||null}}},{tag:"h6",getAttrs(t){const{textAlign:e}=t.style;return{level:6,align:t.getAttribute("align")||e||null}}}],toDOM(t){const{level:e,align:n}=t.attrs;return[`h${e}`,{style:bH({textAlign:"left"!==n?n:null})||null},0]}},Ale={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt"),width:t.getAttribute("width")})}],toDOM(t){const{src:e,alt:n,title:i,width:r}=t.attrs;return["img",{src:e,alt:n,title:i,width:r}]}},Ole={doc:{content:"block+"},text:{group:"inline"},paragraph:Cle,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:Tle,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:Ale,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>fle,defining:!0},content:"paragraph block*"},ordered_list:{..._U,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>hle},content:"list_item+",group:"block"}},yv=new class soe{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=wH.from(e.nodes),n.marks=wH.from(e.marks||{}),this.nodes=nv.compile(this.spec.nodes,this),this.marks=iv.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=i[o]||(i[o]=gc.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==a?null:a?LH(this,a.split(" ")):""!=a&&s.inlineContent?null:[]}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=null==o?[s]:""==o?[]:LH(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof nv))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new tv(i,i.defaultAttrs,e,Ct.setFrom(n))}mark(e,n){return"string"==typeof e&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return zs.fromJSON(this,e)}markFromJSON(e){return Ct.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}({marks:vle,nodes:Ole}),CU=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function jd(t,e,n=!1){for(let i=t;i;i="start"==e?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}function bT(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function wT(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const SU=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(i)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))};function CT(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const IU=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),s=n.indexAfter(-1),o=CT(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(st.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},AU=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof gr||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=CT(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(bt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},MU=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Od(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let i=n.blockRange(),r=i&&Ip(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)},ET=function Ble(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof ve&&e.selection.node.isBlock)return!(!i.parentOffset||!Od(e.doc,i.pos)||(n&&n(e.tr.split(i.pos).scrollIntoView()),0));if(!i.parent.isBlock)return!1;if(n){let s=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof bt||e.selection instanceof gr)&&o.deleteSelection();let a=0==i.depth?null:CT(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=t&&t(r.parent,s),c=l?[l]:s&&a?[{type:a}]:void 0,u=Od(o.doc,o.mapping.map(i.pos),1,c);if(!c&&!u&&Od(o.doc,o.mapping.map(i.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(o.split(o.mapping.map(i.pos),1,c),!s&&!i.parentOffset&&i.parent.type!=a)){let d=o.mapping.map(i.before()),h=o.doc.resolve(d);a&&i.node(-1).canReplaceWith(h.index(),h.index()+1,a)&&o.setNodeMarkup(o.mapping.map(i.before()),a)}n(o.scrollIntoView())}return!0}}();function xU(t,e,n){let s,o,i=e.nodeBefore,r=e.nodeAfter;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(function Hle(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!r.isTextblock&&!lv(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&o.matchType(s[0]||r.type).validEnd){if(n){let d=e.pos+r.nodeSize,h=U.empty;for(let y=s.length-1;y>=0;y--)h=U.from(s[y].create(null,h));h=U.from(i.copy(h));let g=t.tr.step(new zn(e.pos-1,d,e.pos,d,new ne(h,1,0),s.length,!0)),m=d+2*s.length;lv(g.doc,m)&&g.join(m),n(g.scrollIntoView())}return!0}let l=st.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Ip(c);if(null!=u&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&jd(r,"start",!0)&&jd(i,"end")){let d=i,h=[];for(;h.push(d),!d.isTextblock;)d=d.lastChild;let g=r,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(d.canReplace(d.childCount,d.childCount,g.content)){if(n){let y=U.empty;for(let C=h.length-1;C>=0;C--)y=U.from(h[C].copy(y));n(t.tr.step(new zn(e.pos-h.length,e.pos+r.nodeSize,e.pos+m,e.pos+r.nodeSize-m,new ne(y,h.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function NU(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return!!r.node(s).isTextblock&&(n&&n(e.tr.setSelection(bt.create(e.doc,t<0?r.start(s):r.end(s)))),!0)}}const $le=NU(-1),Ule=NU(1);function DT(t,e=null){return function(n,i){let r=!1;for(let s=0;s<n.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(l.isTextblock&&!l.hasMarkup(t,e))if(l.type==t)r=!0;else{let u=n.doc.resolve(c),d=u.index();r=u.parent.canReplaceWith(d,d+1,t)}})}if(!r)return!1;if(i){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}i(s.scrollIntoView())}return!0}}function zd(t,e=null){return function(n,i){let{empty:r,$cursor:s,ranges:o}=n.selection;if(r&&!s||!function zle(t,e,n){for(let i=0;i<e.length;i++){let{$from:r,$to:s}=e[i],o=0==r.depth&&t.inlineContent&&t.type.allowsMarkType(n);if(t.nodesBetween(r.pos,s.pos,a=>{if(o)return!1;o=a.inlineContent&&a.type.allowsMarkType(n)}),o)return!0}return!1}(n.doc,o,t))return!1;if(i)if(s)t.isInSet(n.storedMarks||s.marks())?i(n.tr.removeStoredMark(t)):i(n.tr.addStoredMark(t.create(e)));else{let a=!1,l=n.tr;for(let c=0;!a&&c<o.length;c++){let{$from:u,$to:d}=o[c];a=n.doc.rangeHasMark(u.pos,d.pos,t)}for(let c=0;c<o.length;c++){let{$from:u,$to:d}=o[c];if(a)l.removeMark(u.pos,d.pos,t);else{let h=u.pos,g=d.pos,m=u.nodeAfter,y=d.nodeBefore,b=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,C=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;h+b<g&&(h+=b,g-=C),l.addMark(h,g,t.create(e))}}i(l.scrollIntoView())}return!0}}function Bp(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}let TT=Bp(CU,(t,e,n)=>{let i=function EU(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}(t,n);if(!i)return!1;let r=bT(i);if(!r){let o=i.blockRange(),a=o&&Ip(o);return null!=a&&(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&xU(t,r,e))return!0;if(0==i.parent.content.size&&(jd(s,"end")||ve.isSelectable(s))){let o=$D(t.doc,i.before(),i.after(),ne.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(jd(s,"end")?st.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):ve.create(a.doc,r.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=i.depth-1||(e&&e(t.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),0))},(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=bT(i)}let o=s&&s.nodeBefore;return!(!o||!ve.isSelectable(o)||(e&&e(t.tr.setSelection(ve.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),0))}),OU=Bp(CU,(t,e,n)=>{let i=function TU(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}(t,n);if(!i)return!1;let r=wT(i);if(!r)return!1;let s=r.nodeAfter;if(xU(t,r,e))return!0;if(0==i.parent.content.size&&(jd(s,"start")||ve.isSelectable(s))){let o=$D(t.doc,i.before(),i.after(),ne.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(jd(s,"start")?st.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):ve.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return!(!s.isAtom||r.depth!=i.depth-1||(e&&e(t.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),0))},(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=wT(i)}let o=s&&s.nodeAfter;return!(!o||!ve.isSelectable(o)||(e&&e(t.tr.setSelection(ve.create(t.doc,s.pos)).scrollIntoView()),0))});const Ko={Enter:Bp(SU,AU,MU,ET),"Mod-Enter":IU,Backspace:TT,"Mod-Backspace":TT,"Shift-Backspace":TT,Delete:OU,"Mod-Delete":OU,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new gr(t.doc))),!0)},kU={"Ctrl-h":Ko.Backspace,"Alt-Backspace":Ko["Mod-Backspace"],"Ctrl-d":Ko.Delete,"Ctrl-Alt-Backspace":Ko["Mod-Delete"],"Alt-Delete":Ko["Mod-Delete"],"Alt-d":Ko["Mod-Delete"],"Ctrl-a":$le,"Ctrl-e":Ule};for(let t in Ko)kU[t]=Ko[t];const Wle=(typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&"darwin"==os.platform())?kU:Ko;class Yo{constructor(e,n){this.match=e,this.match=e,this.handler="string"==typeof n?function qle(t){return function(e,n,i,r){let s=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);s+=n[0].slice(o+n[1].length);let a=(i+=o)-r;a>0&&(s=n[0].slice(o-a,o)+s,i=r)}return e.tr.insertText(s,i,r)}}(n):n}}function PU(t,e,n,i,r,s){if(t.composing)return!1;let o=t.state,a=o.doc.resolve(e);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"\ufffc")+i;for(let c=0;c<r.length;c++){let u=r[c].match.exec(l),d=u&&r[c].handler(o,u,e-(u[0].length-i.length),n);if(d)return t.dispatch(d.setMeta(s,{transform:d,from:e,to:n,text:i})),!0}return!1}const Qle=new Yo(/--$/,"\u2014"),Jle=new Yo(/\.\.\.$/,"\u2026"),nce=[new Yo(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new Yo(/"$/,"\u201d"),new Yo(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new Yo(/'$/,"\u2019")];function ST(t,e,n=null,i){return new Yo(t,(r,s,o,a)=>{let l=n instanceof Function?n(s):n,c=r.tr.delete(o,a),d=c.doc.resolve(o).blockRange(),h=d&&HD(d,e,l);if(!h)return null;c.wrap(d,h);let g=c.doc.resolve(o-1).nodeBefore;return g&&g.type==e&&lv(c.doc,o-1)&&(!i||i(s,g))&&c.join(o-1),c})}function RU(t,e,n=null){return new Yo(t,(i,r,s,o)=>{let a=i.doc.resolve(s),l=n instanceof Function?n(r):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?i.tr.delete(s,o).setBlockType(s,s,e,l):null})}const IT=(t,e)=>{const{from:n,$from:i,to:r,empty:s}=t.selection;return s?!!e.isInSet(t.storedMarks||i.marks()):t.doc.rangeHasMark(n,r,e)},FU=(t,e,n={})=>{const{selection:i}=t,{$from:r,to:s}=i,o=((t,e)=>{for(let n=e.depth;n>0;n-=1)if(e.node(n).type===t)return e.node(n).type;return null})(e,r);return Object.entries(n).length&&o?s<=r.end()&&r.parent.hasMarkup(e,n):!!o},LU=t=>{const e=[],{selection:{from:n,to:i}}=t;return t.doc.nodesBetween(n,i,r=>{e.push(r)}),e},BU=(t,e,n)=>{for(const i of e){const{$from:r,$to:s}=i;let o=0===r.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(r.pos,s.pos,a=>!o&&(o=a.inlineContent&&a.type.allowsMarkType(n),!0)),o)return!0}return!1},VU=(t,e,n)=>new Yo(t,(i,r,s,o)=>{const{tr:a}=i,l=s;let c=o;if(r[2]){const u=s+r[0].indexOf(r[2]),d=u+r[2].length;d<o&&a.delete(d,o),u>s&&a.delete(s,u),c=s+r[2].length}return a.addMark(l,c,e.create(n))}),HU=(t,e={})=>(n,i)=>{const{tr:r,selection:s}=n,{empty:o,ranges:a,$from:l,$to:c}=s;if(o&&s instanceof bt){const{$cursor:u}=s;if(!u||!BU(n.doc,a,t)||(r.addStoredMark(t.create(e)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(l.pos,c.pos,t.create(e)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0};for(var Ya={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vv={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lce=typeof navigator<"u"&&/Mac/.test(navigator.platform),cce=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Gn=0;Gn<10;Gn++)Ya[48+Gn]=Ya[96+Gn]=String(Gn);for(Gn=1;Gn<=24;Gn++)Ya[Gn+111]="F"+Gn;for(Gn=65;Gn<=90;Gn++)Ya[Gn]=String.fromCharCode(Gn+32),vv[Gn]=String.fromCharCode(Gn);for(var AT in Ya)vv.hasOwnProperty(AT)||(vv[AT]=Ya[AT]);const dce=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function hce(t){let i,r,s,o,e=t.split(/-(?!$)/),n=e[e.length-1];"Space"==n&&(n=" ");for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);dce?o=!0:r=!0}}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function MT(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function bv(t){return new qs({props:{handleKeyDown:pce(t)}})}function pce(t){let e=function fce(t){let e=Object.create(null);for(let n in t)e[hce(n)]=t[n];return e}(t);return function(n,i){let o,r=function uce(t){var n=!(lce&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||cce&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?vv:Ya)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}(i),s=1==r.length&&" "!=r,a=e[MT(r,i,!s)];if(a&&a(n.state,n.dispatch,n))return!0;if(s&&(i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(o=Ya[i.keyCode])&&o!=r){let l=e[MT(o,i,!0)];if(l&&l(n.state,n.dispatch,n))return!0}else if(s&&i.shiftKey){let l=e[MT(r,i,!0)];if(l&&l(n.state,n.dispatch,n))return!0}return!1}}var Wn=function(){};Wn.prototype.append=function(e){return e.length?(e=Wn.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},Wn.prototype.prepend=function(e){return e.length?Wn.from(e).append(this):this},Wn.prototype.appendInner=function(e){return new gce(this,e)},Wn.prototype.slice=function(e,n){return void 0===e&&(e=0),void 0===n&&(n=this.length),e>=n?Wn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))},Wn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Wn.prototype.forEach=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)},Wn.prototype.map=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(e(s,o))},n,i),r},Wn.from=function(e){return e instanceof Wn?e:e&&e.length?new $U(e):Wn.empty};var $U=function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return 0==r&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(!1===r(this.values[l],a+l))return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(!1===r(this.values[l],a+l))return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=200)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=200)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Wn);Wn.empty=new $U([]);var gce=function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&!1===this.left.forEachInner(i,r,Math.min(s,a),o)||s>a&&!1===this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a))return!1},e.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&!1===this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)||s<a&&!1===this.left.forEachInvertedInner(i,Math.min(r,a),s,o))return!1},e.prototype.sliceInner=function(i,r){if(0==i&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(Wn);const UU=Wn;class fs{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(0==this.eventCount)return null;let r,s,i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}n&&(r=this.remapping(i,this.items.length),s=r.maps.length);let a,l,o=e.tr,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step)return r||(r=this.remapping(i,h+1),s=r.maps.length),s--,void u.push(d);if(r){u.push(new Qs(d.map));let m,g=d.step.map(r.slice(s));g&&o.maybeStep(g).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Qs(m,void 0,void 0,c.length+u.length))),s--,m&&r.appendMap(m,s)}else o.maybeStep(d.step);return d.selection?(a=r?d.selection.map(r.slice(s)):d.selection,l=new fs(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let g,d=e.steps[u].invert(e.docs[u]),h=new Qs(e.mapping.maps[u],d,n);(g=l&&l.merge(h))&&(h=g,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),r||(l=h)}let c=o-i.depth;return c>yce&&(a=function _ce(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&0==e--)return n=r,!1}),t.slice(n)}(a,c),o-=c),new fs(a.append(s),o)}remapping(e,n){let i=new xd;return this.items.forEach((r,s)=>{i.appendMap(r.map,null!=r.mirrorOffset&&s-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0)},e,n),i}addMaps(e){return 0==this.eventCount?this:new fs(this.items.append(e.map(n=>new Qs(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},r);let l=n;this.items.forEach(h=>{let g=s.getMirror(--l);if(null==g)return;o=Math.min(o,g);let m=s.maps[g];if(h.step){let y=e.steps[g].invert(e.docs[g]),b=h.selection&&h.selection.map(s.slice(l+1,g));b&&a++,i.push(new Qs(m,y,b))}else i.push(new Qs(m))},r);let c=[];for(let h=n;h<o;h++)c.push(new Qs(s.maps[h]));let u=this.items.slice(0,r).append(c).append(i),d=new fs(u,a);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(i)),c=l&&l.getMap();if(i--,c&&n.appendMap(c,i),l){let u=o.selection&&o.selection.map(n.slice(i));u&&s++;let h,d=new Qs(c.invert(),l,u),g=r.length-1;(h=r.length&&r[g].merge(d))?r[g]=h:r.push(d)}}else o.map&&i--},this.items.length,0),new fs(UU.from(r.reverse()),s)}}fs.empty=new fs(UU.empty,0);class Qs{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Qs(n.getMap().invert(),n,this.selection)}}}class Qa{constructor(e,n,i,r){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r}}const yce=20;function jU(t){let e=[];return t.forEach((n,i,r,s)=>e.push(r,s)),e}function xT(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),s=e.map(t[i+1],-1);r<=s&&n.push(r,s)}return n}function zU(t,e,n,i){let r=Cv(e),s=Js.get(e).spec.config,o=(i?t.undone:t.done).popEvent(e,r);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(i?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),c=new Qa(i?l:o.remaining,i?o.remaining:l,null,0);n(o.transform.setSelection(a).setMeta(Js,{redo:i,historyState:c}).scrollIntoView())}let NT=!1,GU=null;function Cv(t){let e=t.plugins;if(GU!=e){NT=!1,GU=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){NT=!0;break}}return NT}const Js=new Go("history"),WU=new Go("closeHistory");const qU=(t,e)=>{let n=Js.getState(t);return!(!n||0==n.done.eventCount||(e&&zU(n,t,e,!1),0))},OT=(t,e)=>{let n=Js.getState(t);return!(!n||0==n.undone.eventCount||(e&&zU(n,t,e,!0),0))},Cce=["imgEl"];function Ece(t,e){if(1&t){const n=wt();x(0,"span",4)(1,"span",5),X("mousedown",function(r){return Pe(n),Re(F().startResizing(r,"left"))}),M(),x(2,"span",6),X("mousedown",function(r){return Pe(n),Re(F().startResizing(r,"right"))}),M(),x(3,"span",7),X("mousedown",function(r){return Pe(n),Re(F().startResizing(r,"left"))}),M(),x(4,"span",8),X("mousedown",function(r){return Pe(n),Re(F().startResizing(r,"right"))}),M()()}}const Dce=function(t){return{"NgxEditor__Resizer--Active":t}},Tce=["ngxEditor"],Sce=["*"];function Ice(t,e){if(1&t&&(x(0,"div",12),ee(1),M()),2&t){const n=F(2);I(1),Cn(" ",(null==n.href.errors?null:n.href.errors.pattern)&&"Please enter valid url."," ")}}function Ace(t,e){if(1&t&&(x(0,"div",12),ee(1),M()),2&t){const n=F(2);I(1),Cn(" ",(null==n.text.errors?null:n.text.errors.required)&&"This is required"," ")}}function Mce(t,e){if(1&t){const n=wt();x(0,"div",2)(1,"form",3),X("ngSubmit",function(r){return Pe(n),Re(F().insertLink(r))}),x(2,"div",4)(3,"div",5)(4,"label",6),ee(5),M(),ue(6,"input",7),L(7,Ice,2,1,"div",8),M()(),x(8,"div",4)(9,"div",5)(10,"label",6),ee(11),M(),ue(12,"input",9),L(13,Ace,2,1,"div",8),M()(),x(14,"div",4)(15,"div",5)(16,"label"),ue(17,"input",10),ee(18),M()()(),x(19,"button",11),ee(20),M()()()}if(2&t){const n=F();I(1),A("formGroup",n.form),I(4),Ut(n.getLabel("url")),I(2),A("ngIf",n.href.touched&&n.href.invalid),I(4),Ut(n.getLabel("text")),I(2),A("ngIf",n.text.touched&&n.text.invalid),I(5),Cn(" ",n.getLabel("openInNewTab")," "),I(1),A("disabled",!n.form.valid),I(1),Ut(n.getLabel("insert"))}}const xce=function(t,e){return{"NgxEditor__Dropdown--Active":t,"NgxEditor--Disabled":e}};function Nce(t,e){if(1&t){const n=wt();x(0,"div",4),X("mousedown",function(r){const o=Pe(n).$implicit;return Re(F(2).onClick(r,o))}),ee(1),M()}if(2&t){const n=e.$implicit,i=F(2);A("ngClass",Ma(2,xce,n===i.activeItem,i.disabledItems.includes(n))),I(1),Cn(" ",i.getName(n)," ")}}function Oce(t,e){if(1&t&&(x(0,"div",2),L(1,Nce,2,5,"div",3),M()),2&t){const n=F();I(1),A("ngForOf",n.items)("ngForTrackBy",n.trackByIndex)}}function kce(t,e){if(1&t&&(x(0,"div",12),ee(1),M()),2&t){const n=F(2);I(1),Cn(" ",(null==n.src.errors?null:n.src.errors.pattern)&&"Please enter valid url."," ")}}function Pce(t,e){if(1&t){const n=wt();x(0,"div",2)(1,"form",3),X("ngSubmit",function(r){return Pe(n),Re(F().insertLink(r))}),x(2,"div",4)(3,"div",5)(4,"label",6),ee(5),M(),ue(6,"input",7),L(7,kce,2,1,"div",8),M()(),x(8,"div",4)(9,"div",5)(10,"label",6),ee(11),M(),ue(12,"input",9),M()(),x(13,"div",4)(14,"div",5)(15,"label",6),ee(16),M(),ue(17,"input",10),M()(),x(18,"button",11),ee(19),M()()()}if(2&t){const n=F();I(1),A("formGroup",n.form),I(4),Ut(n.getLabel("url")),I(2),A("ngIf",n.src.touched&&n.src.invalid),I(4),Ut(n.getLabel("altText")),I(5),Ut(n.getLabel("title")),I(2),A("disabled",!n.form.valid||!n.form.dirty),I(1),Ut(n.getLabel("insert"))}}const Rce=function(t,e){return{backgroundColor:t,color:e}},Fce=function(t){return{"NgxEditor__Color--Active":t}};function Lce(t,e){if(1&t){const n=wt();x(0,"button",7),X("mousedown",function(r){const o=Pe(n).$implicit;return Re(F(3).onColorSelect(r,o))}),M()}if(2&t){const n=e.$implicit,i=F(3);A("ngStyle",Ma(3,Rce,n,i.getContrastYIQ(n)))("title",n)("ngClass",Zl(6,Fce,i.activeColors.includes(n)))}}function Bce(t,e){if(1&t&&(x(0,"div",5),L(1,Lce,1,8,"button",6),M()),2&t){const n=e.$implicit,i=F(2);I(1),A("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function Vce(t,e){if(1&t){const n=wt();x(0,"div",2),L(1,Bce,2,2,"div",3),x(2,"button",4),X("mousedown",function(r){return Pe(n),Re(F().remove(r))}),ee(3),M()()}if(2&t){const n=F();I(1),A("ngForOf",n.presets)("ngForTrackBy",n.trackByIndex),I(1),A("disabled",!n.isActive),I(1),Cn(" ",n.getLabel("remove")," ")}}function Hce(t,e){if(1&t&&ue(0,"ngx-toggle-command",7),2&t){const n=F().$implicit;$t(F(2).iconContainerClass),A("toolbarItem",n)}}function $ce(t,e){if(1&t&&ue(0,"ngx-insert-command",7),2&t){const n=F().$implicit;$t(F(2).iconContainerClass),A("toolbarItem",n)}}function Uce(t,e){1&t&&ue(0,"ngx-link"),2&t&&$t(F(3).iconContainerClass)}function jce(t,e){1&t&&ue(0,"ngx-image"),2&t&&$t(F(3).iconContainerClass)}function zce(t,e){if(1&t&&ue(0,"ngx-dropdown",9),2&t){const n=e.$implicit;$t(F(4).dropdownContainerClass),A("group",n.key)("items",n.value)}}function Gce(t,e){if(1&t&&(ur(0),L(1,zce,1,4,"ngx-dropdown",8),Ro(2,"keyvalue"),dr()),2&t){const n=F().$implicit,i=F(2);I(1),A("ngForOf",Fo(2,2,i.getDropdownItems(n)))("ngForTrackBy",i.trackByIndex)}}function Wce(t,e){if(1&t&&ue(0,"ngx-color-picker",10),2&t){const n=F(3);$t(n.iconContainerClass),A("presets",n.presets)}}function qce(t,e){if(1&t&&ue(0,"ngx-color-picker",11),2&t){const n=F(3);$t(n.iconContainerClass),A("presets",n.presets)}}function Kce(t,e){1&t&&ue(0,"div"),2&t&&$t(F(3).seperatorClass)}function Yce(t,e){if(1&t&&(ur(0),L(1,Hce,1,3,"ngx-toggle-command",3),L(2,$ce,1,3,"ngx-insert-command",3),L(3,Uce,1,2,"ngx-link",4),L(4,jce,1,2,"ngx-image",4),L(5,Gce,3,4,"ng-container",2),L(6,Wce,1,3,"ngx-color-picker",5),L(7,qce,1,3,"ngx-color-picker",6),L(8,Kce,1,2,"div",4),dr()),2&t){const n=e.$implicit,i=e.last,r=F().last,s=F();I(1),A("ngIf",s.toggleCommands.includes(n)),I(1),A("ngIf",s.insertCommands.includes(n)),I(1),A("ngIf","link"===n),I(1),A("ngIf","image"===n),I(1),A("ngIf",s.isDropDown(n)),I(1),A("ngIf","text_color"===n),I(1),A("ngIf","background_color"===n),I(1),A("ngIf",i&&!r)}}function Qce(t,e){if(1&t&&(ur(0),L(1,Yce,9,8,"ng-container",1),dr()),2&t){const n=e.$implicit,i=F();I(1),A("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function Jce(t,e){if(1&t&&(ur(0),dC(1,12),dr()),2&t){const n=F();I(1),A("ngTemplateOutlet",n.customMenuRef)}}const Zce=function(t,e){return{"NgxEditor--Disabled":t,"NgxEditor__MenuBar--Reverse":e}},iue=(t=!0)=>new qs({key:new Go("editable"),state:{init:()=>t,apply:(e,n)=>e.getMeta("UPDATE_EDITABLE")??n},props:{editable(e){return this.getState(e)},attributes(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}}),sue=t=>new qs({key:new Go("placeholder"),state:{init:()=>t??"",apply:(e,n)=>e.getMeta("UPDATE_PLACEHOLDER")??n},props:{decorations(e){const{doc:n}=e,{textContent:i,childCount:r}=n,s=this.getState(e);if(!s||r>1)return gn.empty;const o=[];return n.descendants((l,c)=>{if(l.type.isBlock&&0===l.childCount&&0===i.length){const h=Hr.node(c,c+l.nodeSize,{class:"NgxEditor__Placeholder","data-placeholder":s,"data-align":l.attrs.align??null});o.push(h)}return!1}),gn.create(n,o)}}});let cue=(()=>{class t{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new le}startResizing(n,i){n.preventDefault(),this.resizeImage(n,i)}resizeImage(n,i){const r=n.pageX,s=this.imgEl.nativeElement.clientWidth,o="left"===i,{width:a}=window.getComputedStyle(this.view.dom),l=parseInt(a,10),c=d=>{const g=d.pageX-r,m=o?s-g:s+g;m>l||m<20||(this.outerWidth=`${m}px`)},u=d=>{d.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),this.imageResize.emit()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Ze({type:t,selectors:[["ngx-image-view"]],viewQuery:function(n,i){if(1&n&&is(Cce,7),2&n){let r;nt(r=it())&&(i.imgEl=r.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(n,i){1&n&&(x(0,"span",0),L(1,Ece,5,0,"span",1),ue(2,"img",2,3),M()),2&n&&(Yl("width",i.outerWidth),A("ngClass",Zl(7,Dce,i.selected)),I(1),A("ngIf",i.selected),I(1),A("src",i.src,D1)("alt",i.alt)("title",i.title))},dependencies:[wd,pn],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]}),t})();class uue{constructor(e,n,i,r){this.updating=!1,this.handleResize=()=>{if(this.updating)return;const{state:s,dispatch:o}=this.view,{tr:a}=s,l=a.setNodeMarkup(this.getPos(),void 0,{...this.node.attrs,width:this.imageComponentRef.instance.outerWidth}),c=l.doc.resolve(this.getPos()),u=new ve(c);l.setSelection(u),o(l)},this.applicationRef=r.get(Pr),this.imageComponentRef=uy(cue,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(e.attrs),this.imageComponentRef.instance.view=n,this.dom=this.imageComponentRef.location.nativeElement,this.view=n,this.node=e,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(e,n){return JSON.stringify(e)===JSON.stringify(n)}setNodeAttributes(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}update(e){return e.type===this.node.type&&(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}const hue=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,KU=t=>{const e=[];return t.forEach(n=>{if(n.isText){const i=n.text;let r=0;const s=hue.exec(i);if(s){const o=s.index,a=o+s[0].length,{link:l}=n.type.schema.marks;o>0&&e.push(n.cut(r,o));const c=i.slice(o,a);e.push(n.cut(o,a).mark(l.create({href:c}).addToSet(n.marks))),r=a}r<i.length&&e.push(n.cut(r))}else e.push(n.copy(KU(n.content)))}),U.fromArray(e)},pue={type:"doc",content:[{type:"paragraph"}]},Vp=(t,e)=>{if(!t)return e.nodeFromJSON(pue);if("string"!=typeof t)return e.nodeFromJSON(t);const n=((t,e)=>{const n=e??yv,i=document.createElement("div");return i.innerHTML=t,mc.fromSchema(n).parse(i).toJSON()})(t,e);return e.nodeFromJSON(n)};let kT=(()=>{class t{constructor(n,i,r){this.renderer=n,this.injector=i,this.elementRef=r,this.placeholder="Type Here...",this.focusOut=new le,this.focusIn=new le,this.unsubscribe=new ge,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(n){!this.outputFormat&&"string"==typeof n&&(this.outputFormat="html"),this.editor.setContent(n??"")}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.setMeta("UPDATE_EDITABLE",!n),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",n)}handleChange(n){if("html"!==this.outputFormat)this.onChange(n);else{const i=((t,e)=>{const n=this.editor.schema??yv,i=n.nodeFromJSON(t),r=Gs.fromSchema(n).serializeFragment(i.content),s=document.createElement("div");return s.appendChild(r),s.innerHTML})(n);this.onChange(i)}}setMeta(n,i){const{dispatch:r,state:{tr:s}}=this.editor.view;r(s.setMeta(n,i))}setPlaceholder(n){this.setMeta("UPDATE_PLACEHOLDER",n)}registerPlugins(){this.editor.registerPlugin(iue()),this.editor.registerPlugin(sue(this.placeholder)),this.editor.registerPlugin(((t={})=>new qs({key:new Go("attributes"),props:{attributes:t}}))({class:"NgxEditor__Content"})),this.editor.registerPlugin((t=>new qs({key:new Go("focus"),props:{handleDOMEvents:{focus:()=>(t(),!1)}}}))(()=>{this.focusIn.emit()})),this.editor.registerPlugin((t=>new qs({key:new Go("blur"),props:{handleDOMEvents:{blur:()=>(t(),!1)}}}))(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin((t=>new qs({key:new Go("image-resize"),props:{nodeViews:{image:(e,n,i)=>new uue(e,n,i,t)}}}))(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(new qs({key:new Go("linkify"),props:{transformPasted:t=>new ne(KU(t.content),t.openStart,t.openEnd)}}))}ngOnInit(){if(!this.editor)throw new xD("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(cn(this.unsubscribe)).subscribe(n=>{this.handleChange(n)})}ngOnChanges(n){n.placeholder&&!n.placeholder.isFirstChange()&&this.setPlaceholder(n.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return t.\u0275fac=function(n){return new(n||t)(w(ji),w(Rt),w(Ye))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-editor"]],viewQuery:function(n,i){if(1&n&&is(Tce,7),2&n){let r;nt(r=it())&&(i.ngxEditor=r.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[_t([{provide:fr,useExisting:we(()=>t),multi:!0}]),vn],ngContentSelectors:Sce,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(n,i){1&n&&(hC(),x(0,"div",0,1),fC(2),M())},styles:['.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\n'],encapsulation:2}),t})(),Ja=(()=>{class t{constructor(){this.customMenuRefChange=new ge}setCustomMenuRef(n){this.customMenuRefChange.next(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Gd{constructor(e){this.name=e}apply(){return(e,n)=>{const{schema:i}=e,r=i.marks[this.name];return!!r&&HU(r)(e,n)}}toggle(){return(e,n)=>{const{schema:i}=e,r=i.marks[this.name];return!!r&&zd(r)(e,n)}}isActive(e){const{schema:n}=e,i=n.marks[this.name];return!!i&&IT(e,i)}canExecute(e){return this.toggle()(e)}}class Ev{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,n)=>{const{schema:i}=e,r=this.getType(i);return!!r&&(this.isActive(e)?bU(i.nodes.list_item)(e,n):function ple(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(t)&&0==o.startIndex){if(0==r.index(o.depth-1))return!1;let u=n.doc.resolve(o.start-2);l=new ev(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new ev(r,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=HD(l,t,e,o);return!!c&&(i&&i(function gle(t,e,n,i,r){let s=U.empty;for(let u=n.length-1;u>=0;u--)s=U.from(n[u].type.create(n[u].attrs,s));t.step(new zn(e.start-(i?2:0),e.end,e.start,e.end,new ne(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==r&&(o=u+1);let a=n.length-o,l=e.start+n.length-(i?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Od(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}(n.tr,o,c,a,t).scrollIntoView()),!0)}}(r)(e,n))}}isActive(e){const{schema:n}=e,i=this.getType(n);return!!i&&FU(e,i)}canExecute(e){return this.toggle()(e)}}class Tc{constructor(e){this.level=e}apply(){return(e,n)=>{const{schema:i}=e,r=i.nodes.heading;return!!r&&DT(r)(e,n)}}toggle(){return(e,n)=>{const{schema:i,selection:r,doc:s}=e,o=i.nodes.heading;if(!o)return!1;const a=r.$from.before(1),c=s.nodeAt(a)?.attrs??{};return this.isActive(e)?DT(i.nodes.paragraph,c)(e,n):DT(o,{...c,level:this.level})(e,n)}}isActive(e){const{schema:n}=e,i=LU(e),r=n.nodes.heading;if(!r)return!1;const s=[r,n.nodes.text,n.nodes.blockquote];return!!i.filter(l=>s.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}}class Hp{constructor(e){this.align=e}toggle(){return(e,n)=>{const{doc:i,selection:r,tr:s,schema:o}=e,{from:a,to:l}=r;let c=!1;return i.nodesBetween(a,l,(u,d)=>{const h=u.type;return[o.nodes.paragraph,o.nodes.heading].includes(h)&&(c=!0,s.setNodeMarkup(d,h,{...u.attrs,align:this.align})),!0}),!!c&&(s.docChanged&&n?.(s),!0)}}isActive(e){return!!LU(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}}const vue={strict:!0};class PT{update(e){return(n,i)=>{const{schema:r,selection:s}=n,o=r.marks.link;return!(!o||s.empty)&&zd(o,e)(n,i)}}insert(e,n){return(i,r)=>{const{schema:s,tr:o}=i;if(!s.marks.link)return!1;const c=s.text(e,[s.marks.link.create({href:n.href,title:n.title??e,target:n.target??"_blank"})]);return o.replaceSelectionWith(c,!1).scrollIntoView(),!!o.docChanged&&(r?.(o),!0)}}isActive(e,n=vue){if(n.strict)return!0;const{schema:i}=e,r=i.marks.link;return!!r&&IT(e,r)}remove(e,n){return((t,e)=>{const{doc:n,selection:i,tr:r}=t,{$head:{pos:s},from:o,to:a}=i;if(o===a){const l=n.resolve(s),c=s-l.textOffset,u=c+l.parent.child(l.index()).nodeSize;r.removeMark(c,u)}else r.removeMark(o,a);return!!r.docChanged&&(e?.(r),!0)})(e,n)}canExecute(e){const n={href:""};return this.insert("Exec",n)(e)||this.update(n)(e)}}class YU{insert(e,n){return(i,r)=>{const{schema:s,tr:o,selection:a}=i,l=s.nodes.image;if(!l)return!1;const c={width:null,src:e,...n};!c.width&&a instanceof ve&&a.node.type===l&&(c.width=a.node.attrs.width),o.replaceSelectionWith(l.createAndFill(c));const u=o.doc.resolve(o.selection.anchor-o.selection.$anchor.nodeBefore.nodeSize);return o.setSelection(new ve(u)).scrollIntoView(),!!o.docChanged&&(r?.(o),!0)}}isActive(e){const{selection:n}=e;return n instanceof ve&&"image"===n.node.type.name}}class Wd{constructor(e,n="color"){this.name=e,this.attrName=n}apply(e){return(n,i)=>{const{schema:r,selection:s,doc:o}=n,a=r.marks[this.name];if(!a)return!1;const{from:l,to:c,empty:u}=s;if(!u&&l+1===c){const d=o.nodeAt(l);if(d?.isAtom&&!d.isText&&d.isLeaf)return!1}return HU(a,e)(n,i)}}isActive(e){const{schema:n}=e,i=n.marks[this.name];return!!i&&IT(e,i)}getActiveColors(e){if(!this.isActive(e))return[];const{schema:n}=e;return(t=>{let e=[];const{selection:n,storedMarks:i}=t,{from:r,to:s,empty:o,$from:a}=n;return o?e=i||a.marks():t.doc.nodesBetween(r,s,l=>{e=[...e,...l.marks]}),e})(e).filter(s=>s.type===n.marks[this.name]).map(s=>s.attrs[this.attrName]).filter(Boolean)}remove(){return(e,n)=>{const{schema:i}=e,r=i.marks[this.name];return!!r&&(t=r,(e,n)=>{const{tr:i,selection:r,storedMarks:s,doc:o}=e,{empty:a,ranges:l}=r;if(a&&r instanceof bt){const{$cursor:c}=r;if(!c||!BU(e.doc,l,t))return!1;if(t.isInSet(s||c.marks()))return i.removeStoredMark(t),n?.(i),!0}else{for(const c of l){const{$from:u,$to:d}=c;o.rangeHasMark(u.pos,d.pos,t)&&i.removeMark(u.pos,d.pos,t)}if(!i.docChanged)return!1;n?.(i.scrollIntoView())}return!1})(e,n);var t}}canExecute(e){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(e)}}const bue=["link"],Cue=new Gd("strong"),Eue=new Gd("em"),Due=new Gd("code"),Tue=new Gd("u"),Sue=new Gd("s"),Iue=new class _ue{toggle(){return(e,n)=>{const{schema:i}=e,r=i.nodes.blockquote;return!!r&&(this.isActive(e)?((t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),s=r&&Ip(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)})(e,n):function jle(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=o&&HD(o,t,e);return!!a&&(i&&i(n.tr.wrap(o,a).scrollIntoView()),!0)}}(r)(e,n))}}isActive(e){const{schema:n}=e,i=n.nodes.blockquote;return!!i&&FU(e,i)}canExecute(e){return this.toggle()(e)}},Aue=new class yue{insert(){return(e,n)=>{const{schema:i,tr:r}=e,s=i.nodes.horizontal_rule;return!!s&&(n(r.replaceSelectionWith(s.create()).scrollIntoView()),!0)}}canExecute(e){return((t,e)=>{const{$from:n}=t.selection;for(let i=n.depth;i>=0;i-=1){const r=n.index(i);if(n.node(i).canReplaceWith(r,r,e))return!0}return!1})(e,e.schema.nodes.horizontal_rule)}},Mue=new class wue{insert(){return(e,n)=>{const{tr:i}=e,{ranges:r,empty:s}=i.selection;return s||(Object.entries(e.schema.marks).forEach(([o,a])=>{bue.includes(o)||r.forEach(l=>{i.removeMark(l.$from.pos,l.$to.pos,a)})}),n(i)),!0}}canExecute(){return!0}},xue=new Ev(!0),Nue=new Ev(!1),Oue=new Tc(1),kue=new Tc(2),Pue=new Tc(3),Rue=new Tc(4),Fue=new Tc(5),Lue=new Tc(6),Bue=new Hp("left"),Vue=new Hp("center"),Hue=new Hp("right"),$ue=new Hp("justify"),Uue=new PT,jue=new YU,zue=new Wd("text_color","color"),Gue=new Wd("text_background_color","backgroundColor"),Dv={bold:Cue,italic:Eue,code:Due,underline:Tue,strike:Sue,blockquote:Iue,bullet_list:xue,ordered_list:Nue,h1:Oue,h2:kue,h3:Pue,h4:Rue,h5:Fue,h6:Lue,align_left:Bue,align_center:Vue,align_right:Hue,align_justify:$ue},QU={horizontal_rule:Aue,format_clear:Mue},$p=Uue,JU=jue,Wue=zue,que=Gue,RT={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class Kue{constructor(e={}){this.locals=RT,this.get=n=>this.locals[n]??"",this.locals={...RT,...e}}}const ZU={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class XU{static get(e,n="currentColor"){const i=ZU[e];return i&&(i.includes("<path")||i.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${n}\n          height=20\n          width=20\n        >\n          ${i}\n        </svg>\n      `:i}}let FT=(()=>{class t{constructor(){this.locals={},this.icons={}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sc=(()=>{class t{constructor(n){this.config=n}get locals(){return new Kue(this.config.locals)}getIcon(n){return this.config.icons[n]?this.config.icons[n]:XU.get(n)}}return t.\u0275fac=function(n){return new(n||t)($(FT,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ej=t=>({locals:t.locals??{},icons:t.icons??{}});let qd=(()=>{class t{constructor(n){this.sanitizer=n}transform(n){return this.sanitizer.bypassSecurityTrustHtml(n)}}return t.\u0275fac=function(n){return new(n||t)(w(BE,16))},t.\u0275pipe=Tt({name:"sanitizeHtml",type:t,pure:!0}),t})(),_de=(()=>{class t{constructor(n,i){this.ngxeService=n,this.menuService=i,this.isActive=!1,this.disabled=!1,this.update=r=>{const{state:s}=r,o=Dv[this.name];this.isActive=o.isActive(s),this.disabled=!o.canExecute(s)}}get name(){return this.toolbarItem}toggle(n){if(n.preventDefault(),0!==n.button)return;const{state:i,dispatch:r}=this.editorView;Dv[this.name].toggle()(i,r)}getTitle(n){return this.ngxeService.locals.get(n)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Sc),w(Ja))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:8,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.toggle(s)}),Ro(1,"sanitizeHtml"),M()),2&n&&(Ue("NgxEditor__MenuItem--Active",i.isActive)("NgxEditor--Disabled",i.disabled),A("innerHTML",Fo(1,6,i.html),Ls)("title",i.getTitle(i.name)))},dependencies:[qd]}),t})(),yde=(()=>{class t{constructor(n,i){this.ngxeService=n,this.menuService=i,this.disabled=!1,this.update=r=>{const{state:s}=r;this.disabled=!QU[this.name].canExecute(s)}}get name(){return this.toolbarItem}insert(n){if(n.preventDefault(),0!==n.button)return;const{state:i,dispatch:r}=this.editorView;QU[this.name].insert()(i,r)}getTitle(n){return this.ngxeService.locals.get(n)}ngOnInit(){this.html=XU.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Sc),w(Ja))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:6,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.insert(s)}),Ro(1,"sanitizeHtml"),M()),2&n&&(Ue("NgxEditor--Disabled",i.disabled),A("innerHTML",Fo(1,4,i.html),Ls)("title",i.getTitle(i.name)))},dependencies:[qd]}),t})(),vde=(()=>{class t{constructor(n,i,r){this.el=n,this.ngxeService=i,this.menuService=r,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.setText=()=>{const{state:{selection:s,doc:o}}=this.editorView,{empty:a,from:l,to:c}=s,u=a?"":o.textBetween(l,c);u&&(this.text.patchValue(u),this.text.disable())},this.update=s=>{const{state:o}=s;this.isActive=$p.isActive(o,{strict:!1}),this.canExecute=$p.canExecute(o)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(n){!this.el.nativeElement.contains(n.target)&&this.showPopup&&this.hideForm()}getLabel(n){return this.ngxeService.locals.get(n)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(n){if(0!==n.button)return;const{state:i,dispatch:r}=this.editorView;this.isActive?$p.remove(i,r):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}insertLink(n){n.preventDefault();const{text:i,href:r,openInNewTab:s}=this.form.getRawValue(),{dispatch:o,state:a}=this.editorView,{selection:l}=a,c={title:r,href:r,target:s?"_blank":"_self"};l.empty?($p.insert(i,c)(a,o),this.editorView.focus()):$p.update(c)(a,o),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new jo({href:new On("",[pr.required,pr.pattern(this.menuService.editor.linkValidationPattern)]),text:new On("",[pr.required]),openInNewTab:new On(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Ye),w(Sc),w(Ja))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-link"]],hostBindings:function(n,i){1&n&&X("mousedown",function(s){return i.onDocumentClick(s)},0,Tf)},decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.onMouseDown(s)}),Ro(1,"sanitizeHtml"),M(),L(2,Mce,21,8,"div",1)),2&n&&(Ue("NgxEditor__MenuItem--Active",i.isActive||i.showPopup)("NgxEditor--Disabled",!i.canExecute),A("innerHTML",Fo(1,7,i.icon),Ls)("title",i.title),I(2),A("ngIf",i.showPopup))},dependencies:[pn,dc,Uo,dD,lc,cc,zo,Ba,qd]}),t})(),bde=(()=>{class t{constructor(n,i,r){this.ngxeService=n,this.menuService=i,this.el=r,this.isDropdownOpen=!1,this.disabledItems=[],this.update=s=>{const{state:o}=s;this.disabledItems=[];const a=[];this.items.forEach(l=>{const c=Dv[l];c.isActive(o)&&a.push(l),c.canExecute(o)||this.disabledItems.push(l)}),1===a.length?[this.activeItem]=a:this.activeItem=null}}get isSelected(){return!(!this.activeItem&&!this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(n){!this.el.nativeElement.contains(n)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(n){return this.ngxeService.locals.get(n)}toggleDropdown(n){n.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(n){return n}onClick(n,i){if(n.preventDefault(),0!==n.button)return;const r=Dv[i],{state:s,dispatch:o}=this.editorView;r.toggle()(s,o),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Sc),w(Ja),w(Ye))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-dropdown"]],hostBindings:function(n,i){1&n&&X("mousedown",function(s){return i.onDocumentClick(s.target)},0,Tf)},inputs:{group:"group",items:"items"},decls:3,vars:6,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.toggleDropdown(s)}),ee(1),M(),L(2,Oce,2,2,"div",1)),2&n&&(Ue("NgxEditor__Dropdown--Selected",i.isSelected)("NgxEditor--Disabled",i.isDropdownDisabled),I(1),Cn(" ",i.getName(i.activeItem||i.group),"\n"),I(1),A("ngIf",i.isDropdownOpen))},dependencies:[wd,Lr,pn]}),t})(),wde=(()=>{class t{constructor(n,i,r){this.el=n,this.ngxeService=i,this.menuService=r,this.showPopup=!1,this.isActive=!1,this.form=new jo({src:new On("",[pr.required,pr.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new On(""),title:new On("")}),this.update=s=>{const{state:o}=s;this.isActive=JU.isActive(o)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(n){!this.el.nativeElement.contains(n.target)&&this.showPopup&&this.hideForm()}getLabel(n){return this.ngxeService.locals.get(n)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(n){0===n.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){const{state:n}=this.editorView,{selection:i}=n;if(i instanceof ve&&this.isActive){const{src:r,alt:s="",title:o=""}=i.node.attrs;this.form.setValue({src:r,alt:s,title:o})}}insertLink(n){n.preventDefault();const{src:i,alt:r,title:s}=this.form.getRawValue(),{dispatch:o,state:a}=this.editorView;JU.insert(i,{alt:r,title:s})(a,o),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Ye),w(Sc),w(Ja))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-image"]],hostBindings:function(n,i){1&n&&X("mousedown",function(s){return i.onDocumentClick(s)},0,Tf)},decls:3,vars:7,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.onMouseDown(s)}),Ro(1,"sanitizeHtml"),M(),L(2,Pce,20,7,"div",1)),2&n&&(Ue("NgxEditor__MenuItem--Active",i.isActive||i.showPopup),A("innerHTML",Fo(1,5,i.icon),Ls)("title",i.getLabel("insertImage")),I(2),A("ngIf",i.showPopup))},dependencies:[pn,dc,Uo,lc,cc,zo,Ba,qd]}),t})(),Cde=(()=>{class t{constructor(n,i,r){this.el=n,this.menuService=i,this.ngxeService=r,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=s=>{const{state:o}=s;this.canExecute=this.command.canExecute(o),this.isActive=this.command.isActive(o),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(o))}}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?Wue:que}getContrastYIQ(n){const i=n.replace("#","");return(299*parseInt(i.substring(0,2),16)+587*parseInt(i.substring(2,4),16)+114*parseInt(i.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(n){!this.el.nativeElement.contains(n.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(n){n.preventDefault(),0===n.button&&(this.showPopup=!this.showPopup)}remove(n){n.preventDefault();const{state:i,dispatch:r}=this.editorView;this.command.remove()(i,r),this.hidePopup()}trackByIndex(n){return n}onColorSelect(n,i){if(n.preventDefault(),0!==n.button)return;const{state:r,dispatch:s}=this.editorView;"text_color"===this.type?this.command.apply({color:i})(r,s):this.command.apply({backgroundColor:i})(r,s),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(n){return this.ngxeService.locals.get(n)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(n=>{this.update(n)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(w(Ye),w(Ja),w(Sc))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-color-picker"]],hostBindings:function(n,i){1&n&&X("mousedown",function(s){return i.onDocumentClick(s)},0,Tf)},inputs:{presets:"presets",type:"type"},decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(n,i){1&n&&(x(0,"div",0),X("mousedown",function(s){return i.togglePopup(s)}),Ro(1,"sanitizeHtml"),M(),L(2,Vce,4,4,"div",1)),2&n&&(Ue("NgxEditor__MenuItem--Active",i.isActive||i.showPopup)("NgxEditor--Disabled",!i.canExecute),A("innerHTML",Fo(1,7,i.icon),Ls)("title",i.title),I(2),A("ngIf",i.showPopup))},dependencies:[wd,Lr,pn,RB,qd],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']}),t})();const Ede=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],Dde=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];let LT=(()=>{class t{constructor(n){this.menuService=n,this.toolbar=Ede,this.colorPresets=Dde,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule","format_clear"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){const i=[];return this.colorPresets.forEach((r,s)=>{const o=Math.floor(s/8);i[o]||i.push([]),i[o].push(r)}),i}trackByIndex(n){return n}isDropDown(n){return!!n?.heading}getDropdownItems(n){return n}ngOnInit(){if(!this.editor)throw new xD("Required editor instance to initialize menu component");this.menuService.editor=this.editor}}return t.\u0275fac=function(n){return new(n||t)(w(Ja))},t.\u0275cmp=Ze({type:t,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[_t([Ja])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(n,i){1&n&&(x(0,"div",0),L(1,Qce,2,2,"ng-container",1),L(2,Jce,2,1,"ng-container",2),M()),2&n&&(A("ngClass",Ma(4,Zce,i.disabled,"top"===i.dropdownPlacement)),I(1),A("ngForOf",i.toolbar)("ngForTrackBy",i.trackByIndex),I(1),A("ngIf",i.customMenuRef))},dependencies:[wd,Lr,pn,ec,_de,yde,vde,bde,wde,Cde,FB]}),t})(),Tde=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[qd],imports:[SE,vH]}),t})();const Tv=new ie("NgxEditorConfig"),tj={locals:RT,icons:ZU};let Sde=(()=>{class t{static forRoot(n=tj){return{ngModule:t,providers:[{provide:Tv,useValue:n},{provide:FT,useFactory:ej,deps:[Tv]}]}}static forChild(n=tj){return{ngModule:t,providers:[{provide:Tv,useValue:n},{provide:FT,useFactory:ej,deps:[Tv]},Sc]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[SE,Tde]}),t})();const $r=(t,e=!1)=>(n,i)=>{const r=new Gd(t);return e?r.toggle()(n,i):r.apply()(n,i)};class Mde{constructor(e){if(this.applyTrx=n=>{this.state=this.state.apply(n??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=n=>{this.applyTrx(n)},!e)throw new xD("Required view to initialize commands.");this.view=e,this.state=e.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const n=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(n),!0}focus(e="end"){const n="start"===e?st.atStart(this.state.doc):st.atEnd(this.state.doc);return this.tr.setSelection(n),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(e){return this.tr.insertText(e),this.applyTrx(),this}insertNewLine(){return Bp(SU,AU,MU,ET)(this.state,this.dispatch),this}applyMark(e){return $r(e,!1)(this.state,this.dispatch),this}toggleMark(e){return $r(e,!0)(this.state,this.dispatch),this}bold(){return $r("strong")(this.state,this.dispatch),this}toggleBold(){return $r("strong",!0)(this.state,this.dispatch),this}italics(){return $r("em")(this.state,this.dispatch),this}toggleItalics(){return $r("em",!0)(this.state,this.dispatch),this}underline(){return $r("u")(this.state,this.dispatch),this}toggleUnderline(){return $r("u",!0)(this.state,this.dispatch),this}strike(){return $r("s")(this.state,this.dispatch),this}toggleStrike(){return $r("s",!0)(this.state,this.dispatch),this}code(){return $r("code")(this.state,this.dispatch),this}toggleCode(){return $r("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new Ev(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new Ev(!0).toggle()(this.state,this.dispatch),this}toggleHeading(e){return new Tc(e).toggle()(this.state,this.dispatch),this}insertLink(e,n){return(new PT).insert(e,n)(this.state,this.dispatch),this}updateLink(e){return(new PT).update(e)(this.state,this.dispatch),this}insertImage(e,n={}){return(new YU).insert(e,n)(this.state,this.dispatch),this}textColor(e){return new Wd("text_color").apply({color:e})(this.state,this.dispatch),this}backgroundColor(e){return new Wd("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}removeTextColor(){return new Wd("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new Wd("text_background_color").remove()(this.state,this.dispatch),this}align(e){return new Hp(e).toggle()(this.state,this.dispatch),this}insertHTML(e){const{selection:n,schema:i,tr:r}=this.state,{from:s,to:o}=n,a=document.createElement("div");a.innerHTML=e.trim();const l=mc.fromSchema(i).parseSlice(a),c=r.replaceRange(s,o,l);return this.applyTrx(c),this}}const xde=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bde=t=>{const e=nce.concat(Jle,Qle);return e.push((t=>VU(/(?:^|\s)(?:(?:\*\*|__)(?:(?:[^*_]+))(?:\*\*|__))$/,t))(t.marks.strong)),e.push((t=>VU(/(?:^|\s)(?:(?:\*|_)(?:(?:[^*_]+))(?:\*|_))$/,t))(t.marks.em)),e.push((t=>ST(/^\s*>\s$/,t))(t.nodes.blockquote)),e.push((t=>ST(/^(?:\d+)\.\s$/,t,e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])))(t.nodes.ordered_list)),e.push((t=>ST(/^\s*(?:[-+*])\s$/,t))(t.nodes.bullet_list)),e.push((t=>RU(/^```$/,t))(t.nodes.code_block)),e.push(((t,e)=>RU(new RegExp("^(#{1,6})\\s$"),t,n=>({level:n[1].length})))(t.nodes.heading)),function Yle({rules:t}){let e=new qs({state:{init:()=>null,apply(n,i){return n.getMeta(this)||(n.selectionSet||n.docChanged?null:i)}},props:{handleTextInput:(n,i,r,s)=>PU(n,i,r,s,t,e),handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:i}=n.state.selection;i&&PU(n,i.pos,i.pos,"",t,e)})}}},isInputRules:!0});return e}({rules:e})},Hde=(t,e)=>{const n=[];return e.keyboardShortcuts&&n.push(...((t,e)=>{const n={};n["Mod-z"]=qU,xde?n["Shift-Mod-z"]=OT:n["Mod-y"]=OT;const i=[bv({"Mod-b":zd(t.marks.strong),"Mod-i":zd(t.marks.em),"Mod-u":zd(t.marks.u),"Mod-`":zd(t.marks.code)}),bv({Enter:mle(t.nodes.list_item),"Shift-Enter":Bp(IU,(r,s)=>{const{tr:o}=r;return s(o.replaceSelectionWith(t.nodes.hard_break.create()).scrollIntoView()),!0}),"Mod-[":bU(t.nodes.list_item),"Mod-]":wU(t.nodes.list_item),Tab:wU(t.nodes.list_item)}),bv(Wle)];return e.history&&i.push(bv(n)),i})(t,{history:e.history})),e.history&&n.push(function wce(t={}){return new qs({key:Js,state:{init:()=>new Qa(fs.empty,fs.empty,null,0),apply:(e,n,i)=>function vce(t,e,n,i){let s,r=n.getMeta(Js);if(r)return r.historyState;n.getMeta(WU)&&(t=new Qa(t.done,t.undone,null,0));let o=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(o&&o.getMeta(Js))return o.getMeta(Js).redo?new Qa(t.done.addTransform(n,void 0,i,Cv(e)),t.undone,jU(n.mapping.maps[n.steps.length-1]),t.prevTime):new Qa(t.done,t.undone.addTransform(n,void 0,i,Cv(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(s=n.getMeta("rebased"))?new Qa(t.done.rebased(n,s),t.undone.rebased(n,s),xT(t.prevRanges,n.mapping),t.prevTime):new Qa(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),xT(t.prevRanges,n.mapping),t.prevTime);{let a=0==t.prevTime||!o&&(t.prevTime<(n.time||0)-i.newGroupDelay||!function bce(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&r>=e[s]&&(n=!0)}),n}(n,t.prevRanges)),l=o?xT(t.prevRanges,n.mapping):jU(n.mapping.maps[n.steps.length-1]);return new Qa(t.done.addTransform(n,a?e.selection.getBookmark():void 0,i,Cv(e)),fs.empty,l,n.time)}}(n,i,e,t)},config:t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r="historyUndo"==i?qU:"historyRedo"==i?OT:null;return!!r&&(n.preventDefault(),r(e.state,e.dispatch))}}}})}()),e.inputRules&&n.push(Bde(t)),n},ij={linkOnPaste:!0,resizeImage:!0},rj={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:yv,plugins:[],nodeViews:{},attributes:{},features:ij,handleScrollToSelection:null,linkValidationPattern:"(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)|(mailto:.*[@].*)"};class BT{constructor(e=rj){this.valueChangesSubject=new ge,this.updateSubject=new ge,this.options={...rj,...e},this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||yv}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new Mde(this.view)}get features(){return{...ij,...this.options.features}}handleTransactions(e){const n=this.view.state.apply(e);if(this.view.updateState(n),this.updateSubject.next(this.view),!e.docChanged&&!e.getMeta("FORCE_EMIT"))return;const i=n.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){const{options:e,schema:n}=this,{content:i=null,nodeViews:r}=e,{history:s=!0,keyboardShortcuts:o=!0,inputRules:a=!0}=e,l=Vp(i,n),c=e.plugins??[],u=e.attributes??{},d=Hde(n,{history:s,keyboardShortcuts:o,inputRules:a});this.view=new lle(null,{state:Fd.create({doc:l,schema:n,plugins:[...d,...c]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:u,handleScrollToSelection:e.handleScrollToSelection})}setContent(e){if(typeof(t=e)>"u"||null===t)return;var t;const{state:n}=this.view,{tr:i,doc:r}=n,s=Vp(e,this.schema);i.replaceWith(0,n.doc.content.size,s),!r.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(e){const{state:n}=this.view,i=[...n.plugins,e],r=n.reconfigure({plugins:i});this.view.updateState(r)}destroy(){this.view.destroy()}}function sj(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function D(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){sj(s,i,r,o,a,"next",l)}function a(l){sj(s,i,r,o,a,"throw",l)}o(void 0)})}}const q=function(t,e){if(!t)throw Kd(e)},Kd=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},oj=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0;let h=(15&a)<<2|c>>6,g=63&c;l||(g=64,o||(h=64)),i.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const l=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,null==s||null==a||null==c||null==d)throw new Ude;i.push(s<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ude extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aj=function(t){const e=oj(t);return Sv.encodeByteArray(e,!0)},Iv=function(t){return aj(t).replace(/\./g,"")},Av=function(t){try{return Sv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jde(t){return lj(void 0,t)}function lj(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!zde(n)||(t[n]=lj(t[n],e[n]));return t}function zde(t){return"__proto__"!==t}const Mv=()=>{try{return function Gde(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Av(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},cj=t=>{var e,n;return null===(n=null===(e=Mv())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},uj=()=>{var t;return null===(t=Mv())||void 0===t?void 0:t.config},dj=t=>{var e;return null===(e=Mv())||void 0===e?void 0:e[`_${t}`]};class Ic{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,i))}}}function kn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function HT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function $T(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function hj(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ac(){try{return"object"==typeof indexedDB}catch{return!1}}function Up(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e((null===(s=r.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function UT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ps extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?function ehe(t,e){return t.replace(the,(n,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(s,i):"Error";return new ps(r,`${this.serviceName}: ${o} (${r}).`,i)}}const the=/\{\$([^}]+)}/g;function jp(t){return JSON.parse(t)}function Dn(t){return JSON.stringify(t)}const xv=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=jp(Av(s[0])||""),n=jp(Av(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}};function Jo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Yd(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Nv(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Ov(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(fj(s)&&fj(o)){if(!Ov(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function fj(t){return null!==t&&"object"==typeof t}function zp(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Gp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Wp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class rhe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(0===o)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&n,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}class ohe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(void 0===e&&void 0===n&&void 0===i)throw new Error("Missing Observer.");r=function ahe(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:i},void 0===r.next&&(r.next=zT),void 0===r.error&&(r.error=zT),void 0===r.complete&&(r.complete=zT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zT(){}function Qd(t,e){return`${t} failed: ${e} argument `}const kv=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},che=1e3,uhe=2,dhe=144e5,hhe=.5;function GT(t,e=che,n=uhe){const i=e*Math.pow(n,t),r=Math.round(hhe*i*(Math.random()-.5)*2);return Math.min(dhe,i+r)}function qn(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Mc="[DEFAULT]";class phe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ic;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),r=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function mhe(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Mc})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Mc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return D(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...n.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Mc){return this.instances.has(e)}getOptions(e=Mc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(s)&&o.resolve(r);return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Mc?void 0:t),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var t;return i||null}normalizeInstanceIdentifier(e=Mc){return this.component?this.component.multipleInstances?e:Mc:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _he{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new phe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const WT=[];var vt=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(vt||{});const pj={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},yhe=vt.INFO,vhe={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},bhe=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=vhe[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class Jd{constructor(e){this.name=e,this._logLevel=yhe,this._logHandler=bhe,this._userLogHandler=null,WT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?pj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}}const whe=(t,e)=>e.some(n=>t instanceof n);let gj,mj;const _j=new WeakMap,qT=new WeakMap,yj=new WeakMap,KT=new WeakMap,YT=new WeakMap;let QT={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return qT.get(t);if("objectStoreNames"===e)return t.objectStoreNames||yj.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Za(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ahe(t){return"function"==typeof t?function Ihe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ehe(){return mj||(mj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(JT(this),e),Za(_j.get(this))}:function(...e){return Za(t.apply(JT(this),e))}:function(e,...n){const i=t.call(JT(this),e,...n);return yj.set(i,e.sort?e.sort():[e]),Za(i)}}(t):(t instanceof IDBTransaction&&function The(t){if(qT.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qT.set(t,e)}(t),whe(t,function Che(){return gj||(gj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,QT):t)}function Za(t){if(t instanceof IDBRequest)return function Dhe(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Za(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_j.set(n,t)}).catch(()=>{}),YT.set(e,t),e}(t);if(KT.has(t))return KT.get(t);const e=Ahe(t);return e!==t&&(KT.set(t,e),YT.set(e,t)),e}const JT=t=>YT.get(t),xhe=["get","getKey","getAll","getAllKeys","count"],Nhe=["put","add","delete","clear"],ZT=new Map;function vj(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ZT.get(e))return ZT.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Nhe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!xhe.includes(n))return;const s=function(){var o=D(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return ZT.set(e,s),s}!function She(t){QT=t(QT)}(t=>({...t,get:(e,n,i)=>vj(e,n)||t.get(e,n,i),has:(e,n)=>!!vj(e,n)||t.has(e,n)}));class Ohe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function khe(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}return null}).filter(n=>n).join(" ")}}const XT="@firebase/app",xc=new Jd("@firebase/app"),Pv="[DEFAULT]",sfe={[XT]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nc=new Map,Rv=new Map;function ofe(t,e){try{t.container.addComponent(e)}catch(n){xc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Si(t){const e=t.name;if(Rv.has(e))return xc.debug(`There were multiple attempts to register component ${e}.`),!1;Rv.set(e,t);for(const n of Nc.values())ofe(n,t);return!0}function Zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Zo=new Zs("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class lfe{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}const Oc="9.23.0";function wj(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Pv,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Zo.create("bad-app-name",{appName:String(r)});if(n||(n=uj()),!n)throw Zo.create("no-options");const s=Nc.get(r);if(s){if(Ov(n,s.options)&&Ov(i,s.config))return s;throw Zo.create("duplicate-app",{appName:r})}const o=new _he(r);for(const l of Rv.values())o.addComponent(l);const a=new lfe(n,i,o);return Nc.set(r,a),a}function eS(t=Pv){const e=Nc.get(t);if(!e&&t===Pv&&uj())return wj();if(!e)throw Zo.create("no-app",{appName:t});return e}function Cj(){return Array.from(Nc.values())}function Xt(t,e,n){var i;let r=null!==(i=sfe[t])&&void 0!==i?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];return s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void xc.warn(a.join(" "))}Si(new li(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const cfe="firebase-heartbeat-database",ufe=1,qp="firebase-heartbeat-store";let nS=null;function Ej(){return nS||(nS=function Mhe(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Za(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Za(o.result),l.oldVersion,l.newVersion,Za(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}(cfe,ufe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(qp)}}).catch(t=>{throw Zo.create("idb-open",{originalErrorMessage:t.message})})),nS}function iS(){return(iS=D(function*(t){try{return yield(yield Ej()).transaction(qp).objectStore(qp).get(Tj(t))}catch(e){if(e instanceof ps)xc.warn(e.message);else{const n=Zo.create("idb-get",{originalErrorMessage:e?.message});xc.warn(n.message)}}})).apply(this,arguments)}function Dj(t,e){return rS.apply(this,arguments)}function rS(){return(rS=D(function*(t,e){try{const i=(yield Ej()).transaction(qp,"readwrite");yield i.objectStore(qp).put(e,Tj(t)),yield i.done}catch(n){if(n instanceof ps)xc.warn(n.message);else{const i=Zo.create("idb-set",{originalErrorMessage:n?.message});xc.warn(i.message)}}})).apply(this,arguments)}function Tj(t){return`${t.name}!${t.options.appId}`}class pfe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mfe(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return D(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Sj();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(s=>s.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return D(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=Sj(),{heartbeatsToSend:i,unsentEntries:r}=function gfe(t,e=1024){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ij(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Ij(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(e._heartbeatsCache.heartbeats),s=Iv(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function Sj(){return(new Date).toISOString().substring(0,10)}class mfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(function*(){return!!Ac()&&Up().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return D(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function dfe(t){return iS.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return D(function*(){var i;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Dj(n.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return D(function*(){var i;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return Dj(n.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function Ij(t){return Iv(JSON.stringify({version:2,heartbeats:t})).length}!function _fe(t){Si(new li("platform-logger",e=>new Ohe(e),"PRIVATE")),Si(new li("heartbeat",e=>new pfe(e),"PRIVATE")),Xt(XT,"0.9.13",t),Xt(XT,"0.9.13","esm2017"),Xt("fire-js","")}(""),Xt("firebase","9.23.0","app");const bfe=(t,e)=>e.some(n=>t instanceof n);let Aj,Mj;const xj=new WeakMap,sS=new WeakMap,Nj=new WeakMap,oS=new WeakMap,aS=new WeakMap;let lS={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return sS.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Nj.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xa(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ife(t){return"function"==typeof t?function Sfe(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Cfe(){return Mj||(Mj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(cS(this),e),Xa(xj.get(this))}:function(...e){return Xa(t.apply(cS(this),e))}:function(e,...n){const i=t.call(cS(this),e,...n);return Nj.set(i,e.sort?e.sort():[e]),Xa(i)}}(t):(t instanceof IDBTransaction&&function Dfe(t){if(sS.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sS.set(t,e)}(t),bfe(t,function wfe(){return Aj||(Aj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,lS):t)}function Xa(t){if(t instanceof IDBRequest)return function Efe(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xa(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xj.set(n,t)}).catch(()=>{}),aS.set(e,t),e}(t);if(oS.has(t))return oS.get(t);const e=Ife(t);return e!==t&&(oS.set(t,e),aS.set(e,t)),e}const cS=t=>aS.get(t),Mfe=["get","getKey","getAll","getAllKeys","count"],xfe=["put","add","delete","clear"],uS=new Map;function Oj(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(uS.get(e))return uS.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xfe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Mfe.includes(n))return;const s=function(){var o=D(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return uS.set(e,s),s}!function Tfe(t){lS=t(lS)}(t=>({...t,get:(e,n,i)=>Oj(e,n)||t.get(e,n,i),has:(e,n)=>!!Oj(e,n)||t.has(e,n)}));const kj="@firebase/installations",dS="0.6.4",Pj=1e4,Rj=`w:${dS}`,Fj="FIS_v2",Nfe="https://firebaseinstallations.googleapis.com/v1",Ofe=36e5,Xo=new Zs("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Lj(t){return t instanceof ps&&t.code.includes("request-failed")}function hS({projectId:t}){return`${Nfe}/projects/${t}/installations`}function Bj(t){return{token:t.token,requestStatus:2,expiresIn:Ffe(t.expiresIn),creationTime:Date.now()}}function fS(t,e){return pS.apply(this,arguments)}function pS(){return(pS=D(function*(t,e){const i=(yield e.json()).error;return Xo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function Vj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function gS(t){return mS.apply(this,arguments)}function mS(){return(mS=D(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Ffe(t){return Number(t.replace("s","000"))}function _S(){return(_S=D(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=hS(t),r=Vj(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:Fj,appId:t.appId,sdkVersion:Rj})},l=yield gS(()=>fetch(i,a));if(l.ok){const c=yield l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Bj(c.authToken)}}throw yield fS("Create Installation",l)})).apply(this,arguments)}function $j(t){return new Promise(e=>{setTimeout(e,t)})}const Hfe=/^[cdef][\w-]{21}$/,yS="";function $fe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Ufe(t){return function Vfe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Hfe.test(n)?n:yS}catch{return yS}}function Xd(t){return`${t.appName}!${t.appId}`}const eh=new Map;function Uj(t,e){const n=Xd(t);jj(n,e),function Gfe(t,e){const n=function zj(){return!kc&&"BroadcastChannel"in self&&(kc=new BroadcastChannel("[Firebase] FID Change"),kc.onmessage=t=>{jj(t.data.key,t.data.fid)}),kc}();n&&n.postMessage({key:t,fid:e}),function Gj(){0===eh.size&&kc&&(kc.close(),kc=null)}()}(n,e)}function jj(t,e){const n=eh.get(t);if(n)for(const i of n)i(e)}let kc=null;const Wfe="firebase-installations-database",qfe=1,Pc="firebase-installations-store";let vS=null;function bS(){return vS||(vS=function Afe(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Xa(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Xa(o.result),l.oldVersion,l.newVersion,Xa(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}(Wfe,qfe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Pc)}})),vS}function Fv(t,e){return wS.apply(this,arguments)}function wS(){return(wS=D(function*(t,e){const n=Xd(t),r=(yield bS()).transaction(Pc,"readwrite"),s=r.objectStore(Pc),o=yield s.get(n);return yield s.put(e,n),yield r.done,(!o||o.fid!==e.fid)&&Uj(t,e.fid),e})).apply(this,arguments)}function CS(t){return ES.apply(this,arguments)}function ES(){return(ES=D(function*(t){const e=Xd(t),i=(yield bS()).transaction(Pc,"readwrite");yield i.objectStore(Pc).delete(e),yield i.done})).apply(this,arguments)}function Kp(t,e){return DS.apply(this,arguments)}function DS(){return(DS=D(function*(t,e){const n=Xd(t),r=(yield bS()).transaction(Pc,"readwrite"),s=r.objectStore(Pc),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield r.done,a&&(!o||o.fid!==a.fid)&&Uj(t,a.fid),a})).apply(this,arguments)}function TS(t){return SS.apply(this,arguments)}function SS(){return SS=D(function*(t){let e;const n=yield Kp(t.appConfig,i=>{const r=function Kfe(t){return qj(t||{fid:$fe(),registrationStatus:0})}(i),s=function Yfe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Xo.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Qfe(t,e){return IS.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Jfe(t)}:{installationEntry:e}}(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===yS?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),SS.apply(this,arguments)}function IS(){return IS=D(function*(t,e){try{const n=yield function Bfe(t,e){return _S.apply(this,arguments)}(t,e);return Fv(t.appConfig,n)}catch(n){throw Lj(n)&&409===n.customData.serverCode?yield CS(t.appConfig):yield Fv(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),IS.apply(this,arguments)}function Jfe(t){return AS.apply(this,arguments)}function AS(){return(AS=D(function*(t){let e=yield Wj(t.appConfig);for(;1===e.registrationStatus;)yield $j(100),e=yield Wj(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:i}=yield TS(t);return i||n}return e})).apply(this,arguments)}function Wj(t){return Kp(t,e=>{if(!e)throw Xo.create("installation-not-found");return qj(e)})}function qj(t){return function Zfe(t){return 1===t.registrationStatus&&t.registrationTime+Pj<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function MS(){return(MS=D(function*({appConfig:t,heartbeatServiceProvider:e},n){const i=function epe(t,{fid:e}){return`${hS(t)}/${e}/authTokens:generate`}(t,n),r=function Hj(t,{refreshToken:e}){const n=Vj(t);return n.append("Authorization",function Lfe(t){return`${Fj} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:Rj,appId:t.appId}})},l=yield gS(()=>fetch(i,a));if(l.ok)return Bj(yield l.json());throw yield fS("Generate Auth Token",l)})).apply(this,arguments)}function xS(t){return NS.apply(this,arguments)}function NS(){return NS=D(function*(t,e=!1){let n;const i=yield Kp(t.appConfig,s=>{if(!Yj(s))throw Xo.create("not-registered");const o=s.authToken;if(!e&&function ipe(t){return 2===t.requestStatus&&!function rpe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ofe}(t)}(o))return s;if(1===o.requestStatus)return n=function tpe(t,e){return OS.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Xo.create("app-offline");const a=function spe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function npe(t,e){return kS.apply(this,arguments)}(t,a),a}});return n?yield n:i.authToken}),NS.apply(this,arguments)}function OS(){return(OS=D(function*(t,e){let n=yield Kj(t.appConfig);for(;1===n.authToken.requestStatus;)yield $j(100),n=yield Kj(t.appConfig);const i=n.authToken;return 0===i.requestStatus?xS(t,e):i})).apply(this,arguments)}function Kj(t){return Kp(t,e=>{if(!Yj(e))throw Xo.create("not-registered");return function ope(t){return 1===t.requestStatus&&t.requestTime+Pj<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function kS(){return kS=D(function*(t,e){try{const n=yield function Xfe(t,e){return MS.apply(this,arguments)}(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield Fv(t.appConfig,i),n}catch(n){if(!Lj(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Fv(t.appConfig,i)}else yield CS(t.appConfig);throw n}}),kS.apply(this,arguments)}function Yj(t){return void 0!==t&&2===t.registrationStatus}function PS(){return(PS=D(function*(t){const e=t,{installationEntry:n,registrationPromise:i}=yield TS(e);return i?i.catch(console.error):xS(e).catch(console.error),n.fid})).apply(this,arguments)}function RS(){return RS=D(function*(t,e=!1){const n=t;return yield function cpe(t){return FS.apply(this,arguments)}(n),(yield xS(n,e)).token}),RS.apply(this,arguments)}function FS(){return(FS=D(function*(t){const{registrationPromise:e}=yield TS(t);e&&(yield e)})).apply(this,arguments)}function VS(t){return Xo.create("missing-app-config-values",{valueName:t})}const Qj="installations",ppe=t=>{const e=t.getProvider("app").getImmediate(),n=function hpe(t){if(!t||!t.options)throw VS("App Configuration");if(!t.name)throw VS("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw VS(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Zd(e,"heartbeat"),_delete:()=>Promise.resolve()}},gpe=t=>{const n=Zd(t.getProvider("app").getImmediate(),Qj).getImmediate();return{getId:()=>function ape(t){return PS.apply(this,arguments)}(n),getToken:r=>function lpe(t){return RS.apply(this,arguments)}(n,r)}};(function mpe(){Si(new li(Qj,ppe,"PUBLIC")),Si(new li("installations-internal",gpe,"PRIVATE"))})(),Xt(kj,dS),Xt(kj,dS,"esm2017");const HS="@firebase/remote-config",Qi=new Zs("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ipe{constructor(e,n,i,r){this.client=e,this.storage=n,this.storageCache=i,this.logger=r}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const i=Date.now()-n,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var n=this;return D(function*(){const[i,r]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(r&&n.isCachedDataFresh(e.cacheMaxAgeMillis,i))return r;e.eTag=r&&r.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Ape(t=navigator){return t.languages&&t.languages[0]||t.language}class Mpe{constructor(e,n,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){var n=this;return D(function*(){const[i,r]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:n.sdkVersion,app_instance_id:i,app_instance_id_token:r,app_id:n.appId,language_code:Ape()},c={method:"POST",headers:a,body:JSON.stringify(l)},u=fetch(o,c),d=new Promise((C,E)=>{e.signal.addEventListener(()=>{const R=new Error("The operation was aborted.");R.name="AbortError",E(R)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(C){let E="fetch-client-network";throw"AbortError"===C?.name&&(E="fetch-timeout"),Qi.create(E,{originalErrorMessage:C?.message})}let g=h.status;const m=h.headers.get("ETag")||void 0;let y,b;if(200===h.status){let C;try{C=yield h.json()}catch(E){throw Qi.create("fetch-client-parse",{originalErrorMessage:E?.message})}y=C.entries,b=C.state}if("INSTANCE_STATE_UNSPECIFIED"===b?g=500:"NO_CHANGE"===b?g=304:("NO_TEMPLATE"===b||"EMPTY_CONFIG"===b)&&(y={}),304!==g&&200!==g)throw Qi.create("fetch-status",{httpStatus:g});return{status:g,eTag:m,config:y}})()}}class Ope{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return D(function*(){const i=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,i)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:i}){var r=this;return D(function*(){yield function xpe(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Qi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield r.client.fetch(e);return yield r.storage.deleteThrottleMetadata(),s}catch(s){if(!function Npe(t){if(!(t instanceof ps&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+GT(i),backoffCount:i+1};return yield r.storage.setThrottleMetadata(o),r.attemptFetch(e,o)}})()}}class Rpe{constructor(e,n,i,r,s){this.app=e,this._client=n,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Bv(t,e){const n=t.target.error||void 0;return Qi.create(e,{originalErrorMessage:n&&n?.message})}const Rc="app_namespace_store";class Vpe{constructor(e,n,i,r=function Bpe(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=i=>{e(Bv(i,"storage-open"))},n.onsuccess=i=>{t(i.target.result)},n.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Rc,{keyPath:"compositeKey"})}}catch(n){e(Qi.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return D(function*(){const i=yield n.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Rc],"readonly").objectStore(Rc),l=n.createCompositeKey(e);try{const c=a.get(l);c.onerror=u=>{s(Bv(u,"storage-get"))},c.onsuccess=u=>{const d=u.target.result;r(d?d.value:void 0)}}catch(c){s(Qi.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var i=this;return D(function*(){const r=yield i.openDbPromise;return new Promise((s,o)=>{const l=r.transaction([Rc],"readwrite").objectStore(Rc),c=i.createCompositeKey(e);try{const u=l.put({compositeKey:c,value:n});u.onerror=d=>{o(Bv(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(Qi.create("storage-set",{originalErrorMessage:u?.message}))}})})()}delete(e){var n=this;return D(function*(){const i=yield n.openDbPromise;return new Promise((r,s)=>{const a=i.transaction([Rc],"readwrite").objectStore(Rc),l=n.createCompositeKey(e);try{const c=a.delete(l);c.onerror=u=>{s(Bv(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){s(Qi.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Hpe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return D(function*(){const n=e.storage.getLastFetchStatus(),i=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield i;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield r;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Upe(){return GS.apply(this,arguments)}function GS(){return(GS=D(function*(){if(!Ac())return!1;try{return yield Up()}catch{return!1}})).apply(this,arguments)}!function $pe(){Si(new li("remote-config",function t(e,{instanceIdentifier:n}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Qi.create("registration-window");if(!Ac())throw Qi.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw Qi.create("registration-project-id");if(!o)throw Qi.create("registration-api-key");if(!a)throw Qi.create("registration-app-id");const l=new Vpe(a,i.name,n=n||"firebase"),c=new Hpe(l),u=new Jd(HS);u.logLevel=vt.ERROR;const d=new Mpe(r,Oc,n,s,o,a),h=new Ope(d,l),g=new Ipe(h,l,c,u),m=new Rpe(i,g,c,l,u);return function Dpe(t){const e=qn(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),Xt(HS,"0.4.4"),Xt(HS,"0.4.4","esm2017")}();const jpe=(t,e)=>e.some(n=>t instanceof n);let e5,t5;const n5=new WeakMap,WS=new WeakMap,i5=new WeakMap,qS=new WeakMap,KS=new WeakMap;let YS={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return WS.get(t);if("objectStoreNames"===e)return t.objectStoreNames||i5.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ea(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Qpe(t){return"function"==typeof t?function Ype(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Gpe(){return t5||(t5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(QS(this),e),ea(n5.get(this))}:function(...e){return ea(t.apply(QS(this),e))}:function(e,...n){const i=t.call(QS(this),e,...n);return i5.set(i,e.sort?e.sort():[e]),ea(i)}}(t):(t instanceof IDBTransaction&&function qpe(t){if(WS.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});WS.set(t,e)}(t),jpe(t,function zpe(){return e5||(e5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,YS):t)}function ea(t){if(t instanceof IDBRequest)return function Wpe(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ea(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&n5.set(n,t)}).catch(()=>{}),KS.set(e,t),e}(t);if(qS.has(t))return qS.get(t);const e=Qpe(t);return e!==t&&(qS.set(t,e),KS.set(e,t)),e}const QS=t=>KS.get(t);function r5(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=ea(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ea(o.result),l.oldVersion,l.newVersion,ea(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}function JS(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),ea(n).then(()=>{})}const Jpe=["get","getKey","getAll","getAllKeys","count"],Zpe=["put","add","delete","clear"],ZS=new Map;function s5(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ZS.get(e))return ZS.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Zpe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Jpe.includes(n))return;const s=function(){var o=D(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[n](...l),r&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return ZS.set(e,s),s}!function Kpe(t){YS=t(YS)}(t=>({...t,get:(e,n,i)=>s5(e,n)||t.get(e,n,i),has:(e,n)=>!!s5(e,n)||t.has(e,n)}));const Xpe="/firebase-messaging-sw.js",ege="/firebase-cloud-messaging-push-scope",o5="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tge="https://fcmregistrations.googleapis.com/v1",a5="google.c.a.c_id",nge="google.c.a.c_l",ige="google.c.a.ts";var Vv=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Vv||{});function ta(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oge(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}const XS="fcm_token_details_db",age=5,l5="fcm_token_object_Store";function eI(){return eI=D(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(XS))return null;let e=null;return(yield r5(XS,age,{upgrade:(i=D(function*(r,s,o,a){var l;if(s<2||!r.objectStoreNames.contains(l5))return;const c=a.objectStore(l5),u=yield c.index("fcmSenderId").get(t);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:ta(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ta(d.auth),p256dh:ta(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ta(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ta(d.auth),p256dh:ta(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ta(d.vapidKey)}}}}),function(s,o,a,l){return i.apply(this,arguments)})})).close(),yield JS(XS),yield JS("fcm_vapid_details_db"),yield JS("undefined"),function cge(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var i}),eI.apply(this,arguments)}const uge="firebase-messaging-database",dge=1,Fc="firebase-messaging-store";let tI=null;function nI(){return tI||(tI=r5(uge,dge,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Fc)}})),tI}function c5(t){return iI.apply(this,arguments)}function iI(){return iI=D(function*(t){const e=aI(t),i=yield(yield nI()).transaction(Fc).objectStore(Fc).get(e);if(i)return i;{const r=yield function lge(t){return eI.apply(this,arguments)}(t.appConfig.senderId);if(r)return yield rI(t,r),r}}),iI.apply(this,arguments)}function rI(t,e){return sI.apply(this,arguments)}function sI(){return(sI=D(function*(t,e){const n=aI(t),r=(yield nI()).transaction(Fc,"readwrite");return yield r.objectStore(Fc).put(e,n),yield r.done,e})).apply(this,arguments)}function oI(){return(oI=D(function*(t){const e=aI(t),i=(yield nI()).transaction(Fc,"readwrite");yield i.objectStore(Fc).delete(e),yield i.done})).apply(this,arguments)}function aI({appConfig:t}){return t.appId}const Kn=new Zs("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pge(t,e){return lI.apply(this,arguments)}function lI(){return(lI=D(function*(t,e){const n=yield hI(t),i=d5(e),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(dI(t.appConfig),r)).json()}catch(o){throw Kn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Kn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Kn.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function cI(){return(cI=D(function*(t,e){const n=yield hI(t),i=d5(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=yield(yield fetch(`${dI(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw Kn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Kn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Kn.create("token-update-no-token");return s.token})).apply(this,arguments)}function u5(t,e){return uI.apply(this,arguments)}function uI(){return(uI=D(function*(t,e){const i={method:"DELETE",headers:yield hI(t)};try{const s=yield(yield fetch(`${dI(t.appConfig)}/${e}`,i)).json();if(s.error)throw Kn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(r){throw Kn.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})).apply(this,arguments)}function dI({projectId:t}){return`${tge}/projects/${t}/registrations`}function hI(t){return fI.apply(this,arguments)}function fI(){return(fI=D(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function d5({p256dh:t,auth:e,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:e,p256dh:t}};return i!==o5&&(r.web.applicationPubKey=i),r}const mge=6048e5;function pI(){return pI=D(function*(t){const e=yield function vge(t,e){return yI.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ta(e.getKey("auth")),p256dh:ta(e.getKey("p256dh"))},i=yield c5(t.firebaseDependencies);if(i){if(function bge(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(i.subscriptionOptions,n))return Date.now()>=i.createTime+mge?function yge(t,e){return mI.apply(this,arguments)}(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield u5(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return f5(t.firebaseDependencies,n)}return f5(t.firebaseDependencies,n)}),pI.apply(this,arguments)}function gI(){return gI=D(function*(t){const e=yield c5(t.firebaseDependencies);e&&(yield u5(t.firebaseDependencies,e.token),yield function hge(t){return oI.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),gI.apply(this,arguments)}function mI(){return mI=D(function*(t,e){try{const n=yield function gge(t,e){return cI.apply(this,arguments)}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield rI(t.firebaseDependencies,i),n}catch(n){throw yield function h5(t){return gI.apply(this,arguments)}(t),n}}),mI.apply(this,arguments)}function f5(t,e){return _I.apply(this,arguments)}function _I(){return(_I=D(function*(t,e){const i={token:yield pge(t,e),createTime:Date.now(),subscriptionOptions:e};return yield rI(t,i),i.token})).apply(this,arguments)}function yI(){return(yI=D(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oge(e)})})).apply(this,arguments)}function p5(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function wge(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const i=e.notification.body;i&&(t.notification.body=i);const r=e.notification.image;r&&(t.notification.image=r);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function Cge(t,e){e.data&&(t.data=e.data)}(e,t),function Ege(t,e){var n,i,r,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(r=null===(i=e.fcmOptions)||void 0===i?void 0:i.link)&&void 0!==r?r:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}(e,t),e}function g5(t,e){const n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function vI(t){return Kn.create("missing-app-config-values",{valueName:t})}g5("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),g5("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sge{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function Tge(t){if(!t||!t.options)throw vI("App Configuration Object");if(!t.name)throw vI("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const i of e)if(!n[i])throw vI(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}function bI(){return(bI=D(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Xpe,{scope:ege}),t.swRegistration.update().catch(()=>{})}catch(e){throw Kn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function wI(){return(wI=D(function*(t,e){if(!e&&!t.swRegistration&&(yield function m5(t){return bI.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Kn.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function CI(){return(CI=D(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=o5)})).apply(this,arguments)}function EI(){return EI=D(function*(t,e){if(!navigator)throw Kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Kn.create("permission-blocked");return yield function Age(t,e){return CI.apply(this,arguments)}(t,e?.vapidKey),yield function Ige(t,e){return wI.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function _ge(t){return pI.apply(this,arguments)}(t)}),EI.apply(this,arguments)}function DI(){return(DI=D(function*(t,e,n){const i=function xge(t){switch(t){case Vv.NOTIFICATION_CLICKED:return"notification_open";case Vv.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[a5],message_name:n[nge],message_time:n[ige],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function TI(){return TI=D(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Vv.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(p5(n)):t.onMessageHandler.next(p5(n)));const i=n.data;(function Dge(t){return"object"==typeof t&&!!t&&a5 in t})(i)&&"1"===i["google.c.a.e"]&&(yield function Mge(t,e,n){return DI.apply(this,arguments)}(t,n.messageType,i))}),TI.apply(this,arguments)}const y5="@firebase/messaging",Oge=t=>{const e=new Sge(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Nge(t,e){return TI.apply(this,arguments)}(e,n)),e},kge=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:i=>function _5(t,e){return EI.apply(this,arguments)}(e,i)}};function b5(){return SI.apply(this,arguments)}function SI(){return(SI=D(function*(){try{yield Up()}catch{return!1}return typeof window<"u"&&Ac()&&UT()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pge(){Si(new li("messaging",Oge,"PUBLIC")),Si(new li("messaging-internal",kge,"PRIVATE")),Xt(y5,"0.12.4"),Xt(y5,"0.12.4","esm2017")}();const Hv="analytics",Lge="firebase_id",Bge="origin",Vge=6e4,Hge="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",MI="https://www.googletagmanager.com/gtag/js",Pn=new Jd("@firebase/analytics"),Ii=new Zs("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Uge(t){if(!t.startsWith(MI)){const e=Ii.create("invalid-gtag-resource",{gtagURL:t});return Pn.warn(e.message),""}return t}function w5(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xI(){return(xI=D(function*(t,e,n,i,r,s){const o=i[r];try{if(o)yield e[o];else{const l=(yield w5(n)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){Pn.error(a)}t("config",r,s)})).apply(this,arguments)}function NI(){return(NI=D(function*(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=yield w5(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",i,r||{})}catch(s){Pn.error(s)}})).apply(this,arguments)}const Jge=30,C5=new class Xge{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function eme(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function OI(){return(OI=D(function*(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:eme(i)},s=Hge.replace("{app-id}",n),o=yield fetch(s,r);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw Ii.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function kI(){return(kI=D(function*(t,e=C5,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Ii.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Ii.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sme;return setTimeout(D(function*(){a.abort()}),void 0!==n?n:Vge),E5({appId:i,apiKey:r,measurementId:s},o,a,e)})).apply(this,arguments)}function E5(t,e,n){return PI.apply(this,arguments)}function PI(){return PI=D(function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=C5){var s;const{appId:o,measurementId:a}=t;try{yield function ime(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Ii.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(l){if(a)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield function tme(t){return OI.apply(this,arguments)}(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!function rme(t){if(!(t instanceof ps&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(r.deleteThrottleMetadata(o),a)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?GT(n,r.intervalMillis,Jge):GT(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return r.setThrottleMetadata(o,d),Pn.debug(`Calling attemptFetch again in ${u} millis`),E5(t,d,i,r)}}),PI.apply(this,arguments)}class sme{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let RI,UI;function FI(){return(FI=D(function*(t,e,n,i,r){if(r&&r.global)t("event",n,i);else{const s=yield e;t("event",n,Object.assign(Object.assign({},i),{send_to:s}))}})).apply(this,arguments)}function jI(){return(jI=D(function*(){if(!Ac())return Pn.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Up()}catch(t){return Pn.warn(Ii.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function zI(){return zI=D(function*(t,e,n,i,r,s,o){var a;const l=function nme(t){return kI.apply(this,arguments)}(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Pn.error(g)),e.push(l);const c=function hme(){return jI.apply(this,arguments)}().then(g=>{if(g)return i.getId()}),[u,d]=yield Promise.all([l,c]);(function Qge(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(MI)&&n.src.includes(t))return n;return null})(s)||function zge(t,e){const n=function jge(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Uge}),i=document.createElement("script"),r=`${MI}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(s,u.measurementId),UI&&(r("consent","default",UI),function D5(t){UI=t}(void 0)),r("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Bge]="firebase",h.update=!0,null!=d&&(h[Lge]=d),r("config",u.measurementId,h),RI&&(r("set",RI),function T5(t){RI=t}(void 0)),u.measurementId}),zI.apply(this,arguments)}class pme{constructor(e){this.app=e}_delete(){return delete Xs[this.app.options.appId],Promise.resolve()}}let Xs={},S5=[];const I5={};let M5,eo,$v="dataLayer",GI=!1;function mme(t,e,n){!function gme(){const t=[];if($T()&&t.push("This is a browser extension environment."),UT()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Ii.create("invalid-analytics-context",{errorInfo:e});Pn.warn(n.message)}}();const i=t.options.appId;if(!i)throw Ii.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Ii.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xs[i])throw Ii.create("already-exists",{id:i});if(!GI){!function Gge(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}($v);const{wrappedGtag:s,gtagCore:o}=function Yge(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(s=window[r]),window[r]=function Kge(t,e,n,i){function s(){return s=D(function*(o,...a){try{if("event"===o){const[l,c]=a;yield function qge(t,e,n,i,r){return NI.apply(this,arguments)}(t,e,n,l,c)}else if("config"===o){const[l,c]=a;yield function Wge(t,e,n,i,r,s){return xI.apply(this,arguments)}(t,e,n,i,l,c)}else if("consent"===o){const[l]=a;t("consent","update",l)}else if("get"===o){const[l,c,u]=a;t("get",l,c,u)}else if("set"===o){const[l]=a;t("set",l)}else t(o,...a)}catch(l){Pn.error(l)}}),s.apply(this,arguments)}return function r(o){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}(Xs,S5,I5,$v,"gtag");eo=s,M5=o,GI=!0}return Xs[i]=function fme(t,e,n,i,r,s,o){return zI.apply(this,arguments)}(t,S5,I5,e,M5,$v,n),new pme(t)}function yme(){return WI.apply(this,arguments)}function WI(){return(WI=D(function*(){if($T()||!UT()||!Ac())return!1;try{return yield Up()}catch{return!1}})).apply(this,arguments)}const x5="@firebase/analytics";!function bme(){Si(new li(Hv,(e,{options:n})=>mme(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Si(new li("analytics-internal",function t(e){try{const n=e.getProvider(Hv).getImmediate();return{logEvent:(i,r,s)=>function vme(t,e,n,i){t=qn(t),function ome(t,e,n,i,r){return FI.apply(this,arguments)}(eo,Xs[t.app.options.appId],e,n,i).catch(r=>Pn.error(r))}(n,i,r,s)}}catch(n){throw Ii.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Xt(x5,"0.10.0"),Xt(x5,"0.10.0","esm2017")}();const O5=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function Uv(t){return"function"==typeof t}const jv=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,i)=>`${i+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class Ur{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof Ur)n.remove(this);else if(null!==n)for(let o=0;o<n.length;++o)n[o].remove(this);if(Uv(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(o){e=o instanceof jv?k5(o.errors):[o]}}if(O5(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(null!==(t=l)&&"object"==typeof t)try{l.unsubscribe()}catch(c){e=e||[],c instanceof jv?e=e.concat(k5(c.errors)):e.push(c)}}}var t;if(e)throw new jv(e)}add(e){let n=e;if(!e)return Ur.EMPTY;switch(typeof e){case"function":n=new Ur(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof Ur)){const s=n;n=new Ur,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof Ur){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(e){const n=this._subscriptions;if(n){const i=n.indexOf(e);-1!==i&&n.splice(i,1)}}}var t;function k5(t){return t.reduce((e,n)=>e.concat(n instanceof jv?n.errors:n),[])}Ur.EMPTY=((t=new Ur).closed=!0,t);class Cme extends Ur{constructor(e,n){super()}schedule(e,n=0){return this}}class KI extends Cme{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this}requestAsyncId(e,n,i=0){return setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),r}_unsubscribe(){const e=this.id,n=this.scheduler,i=n.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}class Eme extends KI{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,n,i):e.flush(this)}}let P5=(()=>{class t{constructor(n,i=t.now){this.SchedulerAction=n,this.now=i}schedule(n,i=0,r){return new this.SchedulerAction(this,n).schedule(r,i)}}return t.now=()=>Date.now(),t})();class to extends P5{constructor(e,n=P5.now){super(e,()=>to.delegate&&to.delegate!==this?to.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,i){return to.delegate&&to.delegate!==this?to.delegate.schedule(e,n,i):super.schedule(e,n,i)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let i;this.active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}class Dme extends to{}const Tme=new Dme(Eme),Sme=new to(KI);let YI=!1;const gs={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else YI&&console.log("RxJS: Back to a better error behavior. Thank you. <3");YI=t},get useDeprecatedSynchronousErrorHandling(){return YI}};function Yp(t){setTimeout(()=>{throw t},0)}const zv={closed:!0,next(t){},error(t){if(gs.useDeprecatedSynchronousErrorHandling)throw t;Yp(t)},complete(){}},QI=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class no extends Ur{constructor(e,n,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=zv;break;case 1:if(!e){this.destination=zv;break}if("object"==typeof e){e instanceof no?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new R5(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new R5(this,e,n,i)}}[QI](){return this}static create(e,n,i){const r=new no(e,n,i);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class R5 extends no{constructor(e,n,i,r){super(),this._parentSubscriber=e;let s,o=this;Uv(n)?s=n:n&&(s=n.next,i=n.error,r=n.complete,n!==zv&&(o=Object.create(n),Uv(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=i,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;gs.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:i}=gs;if(this._error)i&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):Yp(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Yp(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);gs.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),gs.useDeprecatedSynchronousErrorHandling)throw i;Yp(i)}}__tryOrSetError(e,n,i){if(!gs.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(r){return gs.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Yp(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const Mme=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function xme(t){return t}let na=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const{operator:s}=this,o=function Ame(t,e,n){if(t){if(t instanceof no)return t;if(t[QI])return t[QI]()}return t||e||n?new no(t,e,n):new no(zv)}(n,i,r);if(o.add(s?s.call(o,this.source):this.source||gs.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),gs.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){gs.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=i),function Ime(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof no?n:null}return!0}(n)?n.error(i):console.warn(i)}}forEach(n,i){return new(i=L5(i))((r,s)=>{let o;o=this.subscribe(a=>{try{n(a)}catch(l){s(l),o&&o.unsubscribe()}},s,r)})}_subscribe(n){const{source:i}=this;return i&&i.subscribe(n)}[Mme](){return this}pipe(...n){return 0===n.length?this:function F5(t){return 0===t.length?xme:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=L5(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function L5(t){if(t||(t=gs.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function el(){}class Ome{constructor(e,n,i){this.nextOrObserver=e,this.error=n,this.complete=i}call(e,n){return n.subscribe(new kme(e,this.nextOrObserver,this.error,this.complete))}}class kme extends no{constructor(e,n,i,r){super(e),this._tapNext=el,this._tapError=el,this._tapComplete=el,this._tapError=i||el,this._tapComplete=r||el,Uv(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||el,this._tapError=n.error||el,this._tapComplete=n.complete||el)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}let Pme=1;const Rme=(()=>Promise.resolve())(),Gv={};function B5(t){return t in Gv&&(delete Gv[t],!0)}const V5={setImmediate(t){const e=Pme++;return Gv[e]=!0,Rme.then(()=>B5(e)&&t()),e},clearImmediate(t){B5(t)}};class Fme extends KI{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=V5.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,n,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,n,i);0===e.actions.length&&(V5.clearImmediate(n),e.scheduled=void 0)}}class Lme extends to{flush(e){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let i,r=-1,s=n.length;e=e||n.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<s&&(e=n.shift()));if(this.active=!1,i){for(;++r<s&&(e=n.shift());)e.unsubscribe();throw i}}}const JI=new Lme(Fme);class Wv extends na{constructor(e,n=0,i=JI){super(),this.source=e,this.delayTime=n,this.scheduler=i,(!function Bme(t){return!O5(t)&&t-parseFloat(t)+1>=0}(n)||n<0)&&(this.delayTime=0),(!i||"function"!=typeof i.schedule)&&(this.scheduler=JI)}static create(e,n=0,i=JI){return new Wv(e,n,i)}static dispatch(e){const{source:n,subscriber:i}=e;return this.add(n.subscribe(i))}_subscribe(e){return this.scheduler.schedule(Wv.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function H5(t,e=0){return function(i){return i.lift(new Vme(t,e))}}class Vme{constructor(e,n){this.scheduler=e,this.delay=n}call(e,n){return new Wv(n,this.delay,this.scheduler).subscribe(e)}}const Hme=new na(t=>t.complete());function $5(t,e){return new na(n=>{const i=new Ur;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function Kme({error:t,subscriber:e}){e.error(t)}class jr{constructor(e,n,i){this.kind=e,this.value=n,this.error=i,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,i){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return i&&i()}}accept(e,n,i){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,i)}toObservable(){switch(this.kind){case"N":return function Wme(...t){let e=t[t.length-1];return function jme(t){return t&&"function"==typeof t.schedule}(e)?(t.pop(),$5(t,e)):function Gme(t,e){return e?$5(t,e):new na((t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()})(t))}(t)}(this.value);case"E":return function qme(t,e){return new na(e?n=>e.schedule(Kme,0,{error:t,subscriber:n}):n=>n.error(t))}(this.error);case"C":return function $me(t){return t?function Ume(t){return new na(e=>t.schedule(()=>e.complete()))}(t):Hme}()}throw new Error("unexpected notification kind value")}static createNext(e){return typeof e<"u"?new jr("N",e):jr.undefinedValueNotification}static createError(e){return new jr("E",void 0,e)}static createComplete(){return jr.completeNotification}}function U5(t,e=0){return function(i){return i.lift(new Qme(t,e))}}jr.completeNotification=new jr("C"),jr.undefinedValueNotification=new jr("N",void 0);class Qme{constructor(e,n=0){this.scheduler=e,this.delay=n}call(e,n){return n.subscribe(new ZI(e,this.scheduler,this.delay))}}class ZI extends no{constructor(e,n,i=0){super(e),this.scheduler=n,this.delay=i}static dispatch(e){const{notification:n,destination:i}=e;n.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(ZI.dispatch,this.delay,new Jme(e,this.destination)))}_next(e){this.scheduleMessage(jr.createNext(e))}_error(e){this.scheduleMessage(jr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(jr.createComplete()),this.unsubscribe()}}class Jme{constructor(e,n){this.notification=e,this.destination=n}}const qv=new td("7.6.1"),XI="__angularfire_symbol__analyticsIsSupportedValue",eA="__angularfire_symbol__analyticsIsSupported",tA="__angularfire_symbol__remoteConfigIsSupportedValue",nA="__angularfire_symbol__remoteConfigIsSupported",iA="__angularfire_symbol__messagingIsSupportedValue",rA="__angularfire_symbol__messagingIsSupported";function oA(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[eA]||(globalThis[eA]=yme().then(t=>globalThis[XI]=t).catch(()=>globalThis[XI]=!1)),globalThis[rA]||(globalThis[rA]=b5().then(t=>globalThis[iA]=t).catch(()=>globalThis[iA]=!1)),globalThis[nA]||(globalThis[nA]=Upe().then(t=>globalThis[tA]=t).catch(()=>globalThis[tA]=!1));const aA=(t,e)=>{const n=e?[e]:Cj(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i};function th(){}class j5{constructor(e,n=Tme){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){const r=this.zone;return this.delegate.schedule(function(o){r.runGuarded(()=>{e.apply(this,[o])})},n,i)}}class Zme{constructor(e){this.zone=e,this.task=null}call(e,n){const i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",th,{},th,th)),n.pipe(function Nme(t,e,n){return function(r){return r.lift(new Ome(t,e,n))}}({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lA=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new j5(Zone.current)),this.insideAngular=n.run(()=>new j5(Zone.current,Sme)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)($(Fe))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Lc(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Bc(t){return Lc().ngZone.run(()=>t())}function e_e(t){return Lc(),function t_e(t){return function(n){return(n=n.lift(new Zme(t.ngZone))).pipe(H5(t.outsideAngular),U5(t.insideAngular))}}(Lc())(t)}const n_e=(t,e)=>function(){const i=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Bc(()=>t.apply(void 0,i))},ms=(t,e)=>function(){let n;const i=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof i[s]&&(e&&(n||(n=Bc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",th,{},th,th)))),i[s]=n_e(i[s],n));const r=function Xme(t){return Lc().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,i));if(!e){if(r instanceof na){const s=Lc();return r.pipe(H5(s.outsideAngular),U5(s.insideAngular))}return Bc(()=>r)}return r instanceof na?r.pipe(e_e):r instanceof Promise?Bc(()=>new Promise((s,o)=>r.then(a=>Bc(()=>s(a)),a=>Bc(()=>o(a))))):"function"==typeof r&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),r.apply(this,arguments)}:Bc(()=>r)};class nh{constructor(e){return e}}class cA{constructor(){return Cj()}}const uA=new ie("angularfire2._apps"),r_e={provide:nh,useFactory:function i_e(t){return t&&1===t.length?t[0]:new nh(eS())},deps:[[new yi,uA]]},s_e={provide:cA,deps:[[new yi,uA]]};function o_e(t){return(e,n)=>{const i=e.runOutsideAngular(()=>t(n));return new nh(i)}}let a_e=(()=>{class t{constructor(n){Xt("angularfire",qv.full,"core"),Xt("angularfire",qv.full,"app"),Xt("angular",fR.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)($(Ia))},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[r_e,s_e]}),t})();function l_e(t,...e){return{ngModule:a_e,providers:[{provide:uA,useFactory:o_e(t),multi:!0,deps:[Fe,Rt,lA,...e]}]}}const c_e=ms(wj,!0),dA=new Map,z5={activated:!1,tokenObservers:[]},u_e={initialized:!1,enabled:!1};function en(t){return dA.get(t)||Object.assign({},z5)}function Kv(){return u_e}const hA="https://content-firebaseappcheck.googleapis.com/v1",p_e="exchangeDebugToken",G5={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class m_e{constructor(e,n,i,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return D(function*(){n.stop();try{n.pending=new Ic,yield function __e(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new Ic,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(i){n.retryPolicy(i)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Yn=new Zs("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fA(t){if(!en(t).activated)throw Yn.create("use-before-activation",{appName:t.name})}function Jv(t,e){return gA.apply(this,arguments)}function gA(){return gA=D(function*({url:t,body:e},n){const i={"Content-Type":"application/json"},r=n.getImmediate({optional:!0});if(r){const d=yield r.getHeartbeatsHeader();d&&(i["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:i};let o,a;try{o=yield fetch(t,s)}catch(d){throw Yn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Yn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Yn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Yn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}}),gA.apply(this,arguments)}function W5(t,e){const{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${hA}/projects/${n}/apps/${i}:${p_e}?key=${r}`,body:{debug_token:e}}}const w_e="firebase-app-check-database",C_e=1,Qp="firebase-app-check-store";let Zv=null;function mA(){return mA=D(function*(t,e){const i=(yield function K5(){return Zv||(Zv=new Promise((t,e)=>{try{const n=indexedDB.open(w_e,C_e);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Yn.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},n.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Qp,{keyPath:"compositeKey"})}}catch(n){e(Yn.create("storage-open",{originalErrorMessage:n?.message}))}}),Zv)}()).transaction(Qp,"readwrite"),s=i.objectStore(Qp).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Yn.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),mA.apply(this,arguments)}const Jp=new Jd("@firebase/app-check");function vA(t,e){return Ac()?function D_e(t,e){return function Y5(t,e){return mA.apply(this,arguments)}(function J5(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Jp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function wA(){return Kv().enabled}function CA(){return EA.apply(this,arguments)}function EA(){return EA=D(function*(){const t=Kv();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),EA.apply(this,arguments)}const x_e={error:"UNKNOWN_ERROR"};function N_e(t){return Sv.encodeString(JSON.stringify(t),!1)}function Xv(t){return DA.apply(this,arguments)}function DA(){return DA=D(function*(t,e=!1){const n=t.app;fA(n);const i=en(n);let s,r=i.token;if(r&&!ih(r)&&(i.token=void 0,r=void 0),!r){const l=yield i.cachedTokenPromise;l&&(ih(l)?r=l:yield vA(n,void 0))}if(!e&&r&&ih(r))return{token:r.token};let a,o=!1;if(wA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Jv(W5(n,yield CA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const l=yield i.exchangeTokenPromise;return yield vA(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield en(n).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Jp.warn(l.message):Jp.error(l),s=l}return r?s?a=ih(r)?{token:r.token,internalError:s}:t4(s):(a={token:r.token},i.token=r,yield vA(n,r)):a=t4(s),o&&function e4(t,e){const n=en(t).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(n,a),a}),DA.apply(this,arguments)}function TA(){return TA=D(function*(t){const e=t.app;fA(e);const{provider:n}=en(e);if(wA()){const i=yield CA(),{token:r}=yield Jv(W5(e,i),t.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield n.getToken();return{token:i}}}),TA.apply(this,arguments)}function IA(t,e){const n=en(t),i=n.tokenObservers.filter(r=>r.next!==e);0===i.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function X5(t){const{app:e}=t,n=en(e);let i=n.tokenRefresher;i||(i=function O_e(t){const{app:e}=t;return new m_e(D(function*(){let i;if(i=en(e).token?yield Xv(t,!0):yield Xv(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const n=en(e);if(n.token){let i=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,n.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},G5.RETRIAL_MIN_WAIT,G5.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function ih(t){return t.expireTimeMillis-Date.now()>0}function t4(t){return{token:N_e(x_e),error:t}}class k_e{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=en(this.app);for(const n of e)IA(this.app,n.next);return Promise.resolve()}}const c4="app-check-internal";!function q_e(){Si(new li("app-check",t=>function P_e(t,e){return new k_e(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(c4).initialize()})),Si(new li(c4,t=>function R_e(t){return{getToken:e=>Xv(t,e),getLimitedUseToken:()=>function Z5(t){return TA.apply(this,arguments)}(t),addTokenListener:e=>function SA(t,e,n,i){const{app:r}=t,s=en(r);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:i,type:e}],s.token&&ih(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),X5(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>X5(t))}(t,"INTERNAL",e),removeTokenListener:e=>IA(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Xt("@firebase/app-check","0.8.0")}();class NA{constructor(){return aA("app-check")}}typeof window<"u"&&window;const Z_e=function d4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},h4=new Zs("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tb=new Jd("@firebase/auth");function nb(t,...e){tb.logLevel<=vt.ERROR&&tb.error(`Auth (${Oc}): ${t}`,...e)}function Ji(t,...e){throw kA(t,...e)}function io(t,...e){return kA(t,...e)}function kA(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return h4.create(t,...e)}function Q(t,e,...n){if(!t)throw kA(e,...n)}function ro(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nb(e),new Error(e)}function tl(t,e){t||ro(e)}function Zp(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function p4(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Xp{constructor(e,n){this.shortDelay=e,this.longDelay=n,tl(n>e,"Short delay should be less than long delay!"),this.isMobile=HT()||hj()}get(){return function eye(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function PA(){return"http:"===p4()||"https:"===p4()}()||$T()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function RA(t,e){tl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class g4{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},iye=new Xp(3e4,6e4);function Gt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function tn(t,e,n,i){return FA.apply(this,arguments)}function FA(){return FA=D(function*(t,e,n,i,r={}){return m4(t,r,D(function*(){let s={},o={};i&&("GET"===e?o=i:s={body:JSON.stringify(i)});const a=zp(Object.assign({key:t.config.apiKey},o)).slice(1),l=yield t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),g4.fetch()(_4(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),FA.apply(this,arguments)}function m4(t,e,n){return LA.apply(this,arguments)}function LA(){return LA=D(function*(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},nye),e);try{const r=new rye(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw eg(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw eg(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw eg(t,"email-already-in-use",o);if("USER_DISABLED"===l)throw eg(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function f4(t,e,n){const i=Object.assign(Object.assign({},Z_e()),{[e]:n});return new Zs("auth","Firebase",i).create(e,{appName:t.name})}(t,u,c);Ji(t,u)}}catch(r){if(r instanceof ps)throw r;Ji(t,"network-request-failed",{message:String(r)})}}),LA.apply(this,arguments)}function ia(t,e,n,i){return BA.apply(this,arguments)}function BA(){return BA=D(function*(t,e,n,i,r={}){const s=yield tn(t,e,n,i,r);return"mfaPendingCredential"in s&&Ji(t,"multi-factor-auth-required",{_serverResponse:s}),s}),BA.apply(this,arguments)}function _4(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?RA(t.config,r):`${t.config.apiScheme}://${r}`}class rye{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(io(this.auth,"network-request-failed")),iye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function eg(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=io(t,e,i);return r.customData._tokenResponse=n,r}function VA(){return VA=D(function*(t,e){return tn(t,"POST","/v1/accounts:delete",e)}),VA.apply(this,arguments)}function $A(){return $A=D(function*(t,e){return tn(t,"POST","/v1/accounts:lookup",e)}),$A.apply(this,arguments)}function tg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function UA(){return UA=D(function*(t,e=!1){const n=qn(t),i=yield n.getIdToken(e),r=ib(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:tg(jA(r.auth_time)),issuedAtTime:tg(jA(r.iat)),expirationTime:tg(jA(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}),UA.apply(this,arguments)}function jA(t){return 1e3*Number(t)}function ib(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return nb("JWT malformed, contained fewer than 3 sections"),null;try{const r=Av(n);return r?JSON.parse(r):(nb("Failed to decode base64 JWT payload"),null)}catch(r){return nb("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ra(t,e){return zA.apply(this,arguments)}function zA(){return zA=D(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(i){throw i instanceof ps&&function uye({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}}),zA.apply(this,arguments)}class dye{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(D(function*(){yield n.iteration()}),i)}iteration(){var e=this;return D(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class y4{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tg(this.lastLoginAt),this.creationTime=tg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ng(t){return GA.apply(this,arguments)}function GA(){return GA=D(function*(t){var e;const n=t.auth,i=yield t.getIdToken(),r=yield ra(t,function aye(t,e){return $A.apply(this,arguments)}(n,{idToken:i}));Q(r?.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function pye(t){return t.map(e=>{var{providerId:n}=e,i=wo(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}(s.providerUserInfo):[],a=function fye(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new y4(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}),GA.apply(this,arguments)}function WA(){return WA=D(function*(t){const e=qn(t);yield ng(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),WA.apply(this,arguments)}function qA(){return qA=D(function*(t,e){const n=yield m4(t,{},D(function*(){const i=zp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=_4(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",g4.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}),qA.apply(this,arguments)}class ig{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function cye(t){const e=ib(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var i=this;return D(function*(){return Q(!i.accessToken||i.refreshToken,e,"user-token-expired"),n||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var i=this;return D(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function gye(t,e){return qA.apply(this,arguments)}(e,n);i.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ig;return i&&(Q("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(Q("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(Q("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ig,this.toJSON())}_performRefresh(){return ro("not implemented")}}function nl(t,e){Q("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Vc{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=wo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new y4(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return D(function*(){const i=yield ra(n,n.stsTokenManager.getToken(n.auth,e));return Q(i,n.auth,"internal-error"),n.accessToken!==i&&(n.accessToken=i,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),i})()}getIdTokenResult(e){return function lye(t){return UA.apply(this,arguments)}(this,e)}reload(){return function hye(t){return WA.apply(this,arguments)}(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var i=this;return D(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ng(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return D(function*(){const n=yield e.getIdToken();return yield ra(e,function sye(t,e){return VA.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const d=null!==(i=n.displayName)&&void 0!==i?i:void 0,h=null!==(r=n.email)&&void 0!==r?r:void 0,g=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,m=null!==(o=n.photoURL)&&void 0!==o?o:void 0,y=null!==(a=n.tenantId)&&void 0!==a?a:void 0,b=null!==(l=n._redirectEventId)&&void 0!==l?l:void 0,C=null!==(c=n.createdAt)&&void 0!==c?c:void 0,E=null!==(u=n.lastLoginAt)&&void 0!==u?u:void 0,{uid:R,emailVerified:B,isAnonymous:j,providerData:se,stsTokenManager:ce}=n;Q(R&&ce,e,"internal-error");const Y=ig.fromJSON(this.name,ce);Q("string"==typeof R,e,"internal-error"),nl(d,e.name),nl(h,e.name),Q("boolean"==typeof B,e,"internal-error"),Q("boolean"==typeof j,e,"internal-error"),nl(g,e.name),nl(m,e.name),nl(y,e.name),nl(b,e.name),nl(C,e.name),nl(E,e.name);const Ae=new Vc({uid:R,auth:e,email:h,emailVerified:B,displayName:d,isAnonymous:j,photoURL:m,phoneNumber:g,tenantId:y,stsTokenManager:Y,createdAt:C,lastLoginAt:E});return se&&Array.isArray(se)&&(Ae.providerData=se.map(We=>Object.assign({},We))),b&&(Ae._redirectEventId=b),Ae}static _fromIdTokenResponse(e,n,i=!1){return D(function*(){const r=new ig;r.updateFromServerResponse(n);const s=new Vc({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ng(s),s})()}}const v4=new Map;function sa(t){tl(t instanceof Function,"Expected a class definition");let e=v4.get(t);return e?(tl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v4.set(t,e),e)}const b4=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(function*(){return!0})()}_set(n,i){var r=this;return D(function*(){r.storage[n]=i})()}_get(n){var i=this;return D(function*(){const r=i.storage[n];return void 0===r?null:r})()}_remove(n){var i=this;return D(function*(){delete i.storage[n]})()}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})();function rb(t,e,n){return`firebase:${t}:${e}:${n}`}class sh{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=rb(this.userKey,r.apiKey,s),this.fullPersistenceKey=rb("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return D(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Vc._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return D(function*(){if(n.persistence===e)return;const i=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,i?n.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return D(function*(){if(!n.length)return new sh(sa(b4),e,i);const r=(yield Promise.all(n.map(function(){var c=D(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=r[0]||sa(b4);const o=rb(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=yield c._get(o);if(u){const d=Vc._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=D(function*(u){if(u!==s)try{yield u._remove(o)}catch{}});return function(u){return c.apply(this,arguments)}}())),new sh(s,e,i)):new sh(s,e,i)})()}}function w4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S4(e))return"Blackberry";if(I4(e))return"Webos";if(KA(e))return"Safari";if((e.includes("chrome/")||E4(e))&&!e.includes("edge/"))return"Chrome";if(T4(e))return"Android";{const i=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function C4(t=kn()){return/firefox\//i.test(t)}function KA(t=kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E4(t=kn()){return/crios\//i.test(t)}function D4(t=kn()){return/iemobile/i.test(t)}function T4(t=kn()){return/android/i.test(t)}function S4(t=kn()){return/blackberry/i.test(t)}function I4(t=kn()){return/webos/i.test(t)}function sb(t=kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A4(t=kn()){return sb(t)||T4(t)||I4(t)||S4(t)||/windows phone/i.test(t)||D4(t)}function M4(t,e=[]){let n;switch(t){case"Browser":n=w4(kn());break;case"Worker":n=`${w4(kn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oc}/${i}`}function x4(t,e){return QA.apply(this,arguments)}function QA(){return QA=D(function*(t,e){return tn(t,"GET","/v2/recaptchaConfig",Gt(t,e))}),QA.apply(this,arguments)}function O4(t){return void 0!==t&&void 0!==t.enterprise}class k4{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>"EMAIL_PASSWORD_PROVIDER"===n.provider&&"OFF"!==n.enforcementState)}}function JA(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=io("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",function bye(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)})}function P4(t){return`__${t}${Math.floor(1e6*Math.random())}`}class R4{constructor(e){this.type="recaptcha-enterprise",this.auth=Rn(e)}verify(e="verify",n=!1){var i=this;return D(function*(){function s(){return s=D(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var l=D(function*(c,u){x4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new k4(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(c,u){return l.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,l,c){const u=window.grecaptcha;O4(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{(function r(a){return s.apply(this,arguments)})(i.auth).then(c=>{if(!n&&O4(window.grecaptcha))o(c,a,l);else{if(typeof window>"u")return void l(new Error("RecaptchaVerifier is only supported in browser"));JA("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,l)}).catch(u=>{l(u)})}}).catch(c=>{l(c)})})})()}}function il(t,e,n){return ZA.apply(this,arguments)}function ZA(){return ZA=D(function*(t,e,n,i=!1){const r=new R4(t);let s;try{s=yield r.verify(n)}catch{s=yield r.verify(n,!0)}const o=Object.assign({},e);return Object.assign(o,i?{captchaResp:s}:{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}),ZA.apply(this,arguments)}class Dye{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return D(function*(){if(n.auth.currentUser===e)return;const i=[];try{for(const r of n.queue)yield r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}class Tye{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F4(this),this.idTokenSubscription=new F4(this),this.beforeStateQueue=new Dye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var i=this;return n&&(this._popupRedirectResolver=sa(n)),this._initializationPromise=this.queue(D(function*(){var r,s;if(!i._deleted&&(i.persistenceManager=yield sh.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(n),i.lastNotifiedUid=(null===(s=i.currentUser)||void 0===s?void 0:s.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return D(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return D(function*(){var i;const r=yield n.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,l=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=r,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return Q(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return D(function*(){let i=null;try{i=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var n=this;return D(function*(){try{yield ng(e)}catch(i){if("auth/network-request-failed"!==i?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function tye(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return D(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return D(function*(){const i=e?qn(e):null;return i&&Q(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(i&&i._clone(n))})()}_updateCurrentUser(e,n=!1){var i=this;return D(function*(){if(!i._deleted)return e&&Q(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),n||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(D(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return D(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(D(function*(){yield n.assertedPersistence.setPersistence(sa(e))}))}initializeRecaptchaConfig(){var e=this;return D(function*(){const n=yield x4(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new k4(n);null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.emailPasswordEnabled&&new R4(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var i=this;return D(function*(){const r=yield i.getOrInitRedirectPersistenceManager(n);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return D(function*(){if(!n.redirectPersistenceManager){const i=e&&sa(e)||n._popupRedirectResolver;Q(i,n,"argument-error"),n.redirectPersistenceManager=yield sh.create(n,[sa(i._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return D(function*(){var i,r;return n._isInitialized&&(yield n.queue(D(function*(){}))),(null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)===e?n._currentUser:(null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return D(function*(){if(e===n.currentUser)return n.queue(D(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Q(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,i,r):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return D(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return D(function*(){var n;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();r&&(i["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(i["X-Firebase-AppCheck"]=s),i})()}_getAppCheckToken(){var e=this;return D(function*(){var n;const i=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return i?.error&&function X_e(t,...e){tb.logLevel<=vt.WARN&&tb.warn(`Auth (${Oc}): ${t}`,...e)}(`Error while retrieving App Check token: ${i.error}`),i?.token})()}}function Rn(t){return qn(t)}class F4{constructor(e){this.auth=e,this.observer=null,this.addObserver=function she(t,e){const n=new ohe(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function L4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class V4{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ro("not implemented")}_getIdTokenResponse(e){return ro("not implemented")}_linkToIdToken(e,n){return ro("not implemented")}_getReauthenticationResolver(e){return ro("not implemented")}}function eM(){return eM=D(function*(t,e){return tn(t,"POST","/v1/accounts:update",e)}),eM.apply(this,arguments)}function nM(t,e){return iM.apply(this,arguments)}function iM(){return iM=D(function*(t,e){return ia(t,"POST","/v1/accounts:signInWithPassword",Gt(t,e))}),iM.apply(this,arguments)}function dM(){return dM=D(function*(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}),dM.apply(this,arguments)}function hM(){return hM=D(function*(t,e){return ia(t,"POST","/v1/accounts:signInWithEmailLink",Gt(t,e))}),hM.apply(this,arguments)}class rg extends V4{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new rg(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new rg(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return D(function*(){var i;switch(n.signInMethod){case"password":const r={returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.emailPasswordEnabled){const s=yield il(e,r,"signInWithPassword");return nM(e,s)}return nM(e,r).catch(function(){var s=D(function*(o){if("auth/missing-recaptcha-token"===o.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const a=yield il(e,r,"signInWithPassword");return nM(e,a)}return Promise.reject(o)});return function(o){return s.apply(this,arguments)}}());case"emailLink":return function Pye(t,e){return dM.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:Ji(e,"internal-error")}})()}_linkToIdToken(e,n){var i=this;return D(function*(){switch(i.signInMethod){case"password":return function $4(t,e){return eM.apply(this,arguments)}(e,{idToken:n,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function Rye(t,e){return hM.apply(this,arguments)}(e,{idToken:n,email:i._email,oobCode:i._password});default:Ji(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function oa(t,e){return fM.apply(this,arguments)}function fM(){return fM=D(function*(t,e){return ia(t,"POST","/v1/accounts:signInWithIdp",Gt(t,e))}),fM.apply(this,arguments)}class ag{constructor(e){var n,i,r,s,o,a;const l=Gp(Wp(e)),c=null!==(n=l.apiKey)&&void 0!==n?n:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function Uye(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);Q(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function jye(t){const e=Gp(Wp(t)).link,n=e?Gp(Wp(e)).deep_link_id:null,i=Gp(Wp(t)).deep_link_id;return(i?Gp(Wp(i)).link:null)||i||n||e||t}(e);try{return new ag(n)}catch{return null}}}let U4=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,i){return rg._fromEmailAndPassword(n,i)}static credentialWithLink(n,i){const r=ag.parseLink(i);return Q(r,"argument-error"),rg._fromEmailAndCode(n,r.code,r.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class rl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zye extends rl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return D(function*(){const s=yield Vc._fromIdTokenResponse(e,i,r),o=j4(i);return new zr({user:s,providerId:o,_tokenResponse:i,operationType:n})})()}static _forOperation(e,n,i){return D(function*(){yield e._updateTokensIfNecessary(i,!0);const r=j4(i);return new zr({user:e,providerId:r,_tokenResponse:i,operationType:n})})()}}function j4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class cb extends ps{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cb.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new cb(e,n,i,r)}}function z4(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?cb._fromErrorAndOperation(t,s,e,i):s})}function EM(){return EM=D(function*(t,e,n=!1){const i=yield ra(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return zr._forOperation(t,"link",i)}),EM.apply(this,arguments)}function TM(){return TM=D(function*(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=yield ra(t,z4(i,r,e,t),n);Q(s.idToken,i,"internal-error");const o=ib(s.idToken);Q(o,i,"internal-error");const{sub:a}=o;return Q(t.uid===a,i,"user-mismatch"),zr._forOperation(t,r,s)}catch(s){throw"auth/user-not-found"===s?.code&&Ji(i,"user-mismatch"),s}}),TM.apply(this,arguments)}function q4(t,e){return SM.apply(this,arguments)}function SM(){return SM=D(function*(t,e,n=!1){const i="signIn",r=yield z4(t,i,e),s=yield zr._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s}),SM.apply(this,arguments)}function AM(){return AM=D(function*(t,e){return q4(Rn(t),e)}),AM.apply(this,arguments)}function Jye(t,e,n){return function IM(t,e){return AM.apply(this,arguments)}(qn(t),U4.credential(e,n))}function ave(t,e,n,i){return qn(t).onAuthStateChanged(e,n,i)}function lve(t){return qn(t).signOut()}const db="__sak";class Y4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(db,"1"),this.storage.removeItem(db),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const mve=(()=>{class t extends Y4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fve(){const t=kn();return KA(t)||sb(t)}()&&function yye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=A4(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}const s=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);!function _ye(){return function Zde(){const t=kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,i){this.localCache[n]=i;const r=this.listeners[n];if(r)for(const s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,i){var r=()=>super._set,s=this;return D(function*(){yield r().call(s,n,i),s.localCache[n]=JSON.stringify(i)})()}_get(n){var i=()=>super._get,r=this;return D(function*(){const s=yield i().call(r,n);return r.localCache[n]=JSON.stringify(s),s})()}_remove(n){var i=()=>super._remove,r=this;return D(function*(){yield i().call(r,n),delete r.localCache[n]})()}}return t.type="LOCAL",t})(),Q4=(()=>{class t extends Y4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})();let yve=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;const r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){var i=this;return D(function*(){const r=n,{eventId:s,eventType:o,data:a}=r.data,l=i.handlersMap[o];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=D(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function _ve(t){return Promise.all(t.map(function(){var e=D(function*(n){try{return{fulfilled:!0,value:yield n}}catch(i){return{fulfilled:!1,reason:i}}});return function(n){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(n,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function nx(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}class vve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){var r=this;return D(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=nx("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(h){const g=h;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},r.handlers.add(a),s.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function mn(){return window}function ix(){return typeof mn().WorkerGlobalScope<"u"&&"function"==typeof mn().importScripts}function rx(){return(rx=D(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const J4="firebaseLocalStorageDb",hb="firebaseLocalStorage",Z4="fbase_key";class cg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fb(t,e){return t.transaction([hb],e?"readwrite":"readonly").objectStore(hb)}function sx(){const t=indexedDB.open(J4,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(hb,{keyPath:Z4})}catch(r){n(r)}}),t.addEventListener("success",D(function*(){const i=t.result;i.objectStoreNames.contains(hb)?e(i):(i.close(),yield function Tve(){const t=indexedDB.deleteDatabase(J4);return new cg(t).toPromise()}(),e(yield sx()))}))})}function X4(t,e,n){return ox.apply(this,arguments)}function ox(){return ox=D(function*(t,e,n){const i=fb(t,!0).put({[Z4]:e,value:n});return new cg(i).toPromise()}),ox.apply(this,arguments)}function ax(){return ax=D(function*(t,e){const n=fb(t,!1).get(e),i=yield new cg(n).toPromise();return void 0===i?null:i.value}),ax.apply(this,arguments)}function ez(t,e){const n=fb(t,!0).delete(e);return new cg(n).toPromise()}const Mve=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return D(function*(){return n.db||(n.db=yield sx()),n.db})()}_withRetries(n){var i=this;return D(function*(){let r=0;for(;;)try{const s=yield i._openDb();return yield n(s)}catch(s){if(r++>3)throw s;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return D(function*(){return ix()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return D(function*(){n.receiver=yve._getInstance(function Eve(){return ix()?self:null}()),n.receiver._subscribe("keyChanged",function(){var i=D(function*(r,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(r,s){return i.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var i=D(function*(r,s){return["keyChanged"]});return function(r,s){return i.apply(this,arguments)}}())})()}initializeSender(){var n=this;return D(function*(){var i,r;if(n.activeServiceWorker=yield function wve(){return rx.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new vve(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(i=s[0])&&void 0!==i&&i.fulfilled&&null!==(r=s[0])&&void 0!==r&&r.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var i=this;return D(function*(){if(i.sender&&i.activeServiceWorker&&function Cve(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:n},i.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return D(function*(){try{if(!indexedDB)return!1;const n=yield sx();return yield X4(n,db,"1"),yield ez(n,db),!0}catch{}return!1})()}_withPendingWrite(n){var i=this;return D(function*(){i.pendingWrites++;try{yield n()}finally{i.pendingWrites--}})()}_set(n,i){var r=this;return D(function*(){return r._withPendingWrite(D(function*(){return yield r._withRetries(s=>X4(s,n,i)),r.localCache[n]=i,r.notifyServiceWorker(n)}))})()}_get(n){var i=this;return D(function*(){const r=yield i._withRetries(s=>function Sve(t,e){return ax.apply(this,arguments)}(s,n));return i.localCache[n]=r,r})()}_remove(n){var i=this;return D(function*(){return i._withPendingWrite(D(function*(){return yield i._withRetries(r=>ez(r,n)),delete i.localCache[n],i.notifyServiceWorker(n)}))})()}_poll(){var n=this;return D(function*(){const i=yield n._withRetries(o=>{const a=fb(o,!1).getAll();return new cg(a).toPromise()});if(!i)return[];if(0!==n.pendingWrites)return[];const r=[],s=new Set;for(const{fbase_key:o,value:a}of i)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),r.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),r.push(o));return r})()}notifyListeners(n,i){this.localCache[n]=i;const r=this.listeners[n];if(r)for(const s of Array.from(r))s(i)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(D(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();P4("rcb"),new Xp(3e4,6e4);class mx extends V4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gve(t){return q4(t.auth,new mx(t),t.bypassAuthState)}function Wve(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),function W4(t,e){return TM.apply(this,arguments)}(n,new mx(t),t.bypassAuthState)}function qve(t){return _x.apply(this,arguments)}function _x(){return _x=D(function*(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),function CM(t,e){return EM.apply(this,arguments)}(n,new mx(t),t.bypassAuthState)}),_x.apply(this,arguments)}class Kve{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=D(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(i,r){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return D(function*(){const{urlResponse:i,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:i,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(l)(c))}catch(u){n.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gve;case"linkViaPopup":case"linkViaRedirect":return qve;case"reauthViaPopup":case"reauthViaRedirect":return Wve;default:Ji(this.auth,"internal-error")}}resolve(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Xp(2e3,1e4);const Yve="pendingRedirect",ug=new Map;class Qve extends Kve{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,n=this;return D(function*(){let i=ug.get(n.auth._key());if(!i){try{const s=(yield function Jve(t,e){return Cx.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;i=()=>Promise.resolve(s)}catch(r){i=()=>Promise.reject(r)}ug.set(n.auth._key(),i)}return n.bypassAuthState||ug.set(n.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,i=this;return D(function*(){if("signInViaRedirect"===e.type)return n().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,n().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return D(function*(){})()}cleanUp(){}}function Cx(){return Cx=D(function*(t,e){const n=function iz(t){return rb(Yve,t.config.apiKey,t.name)}(e),i=function nz(t){return sa(t._redirectPersistence)}(t);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(n));return yield i._remove(n),r}),Cx.apply(this,arguments)}function Zve(t,e){ug.set(t._key(),e)}function rz(t,e){return Mx.apply(this,arguments)}function Mx(){return Mx=D(function*(t,e,n=!1){const i=Rn(t),r=function $c(t,e){return e?sa(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(i,e),o=yield new Qve(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o}),Mx.apply(this,arguments)}class ibe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function rbe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return az(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!az(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";n.onError(io(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oz(e))}saveEventToCache(e){this.cachedEventUids.add(oz(e)),this.lastProcessedEventTime=Date.now()}}function oz(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function az({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function Nx(){return Nx=D(function*(t,e={}){return tn(t,"GET","/v1/projects",e)}),Nx.apply(this,arguments)}const obe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,abe=/^https?/;function Ox(){return Ox=D(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function sbe(t){return Nx.apply(this,arguments)}(t);for(const n of e)try{if(cbe(n))return}catch{}Ji(t,"unauthorized-domain")}),Ox.apply(this,arguments)}function cbe(t){const e=Zp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===i}if(!abe.test(n))return!1;if(obe.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const ube=new Xp(3e4,6e4);function lz(){const t=mn().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let gb=null;const fbe=new Xp(5e3,15e3),pbe="__/auth/iframe",gbe="emulator/auth/iframe",mbe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_be=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ybe(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RA(e,gbe):`https://${t.config.authDomain}/${pbe}`,i={apiKey:e.apiKey,appName:t.name,v:Oc},r=_be.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${zp(i).slice(1)}`}function kx(){return kx=D(function*(t){const e=yield function hbe(t){return gb=gb||function dbe(t){return new Promise((e,n)=>{var i,r,s;function o(){lz(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lz(),n(io(t,"network-request-failed"))},timeout:ube.get()})}if(null!==(r=null===(i=mn().gapi)||void 0===i?void 0:i.iframes)&&void 0!==r&&r.Iframe)e(gapi.iframes.getContext());else{if(null===(s=mn().gapi)||void 0===s||!s.load){const a=P4("iframefcb");return mn()[a]=()=>{gapi.load?o():n(io(t,"network-request-failed"))},JA(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}o()}}).catch(e=>{throw gb=null,e})}(t),gb}(t),n=mn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:ybe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mbe,dontclear:!0},i=>new Promise(function(){var r=D(function*(s,o){yield i.restyle({setHideOnLeave:!1});const a=io(t,"network-request-failed"),l=mn().setTimeout(()=>{o(a)},fbe.get());function c(){mn().clearTimeout(l),s(i)}i.ping(c).then(c,()=>{o(a)})});return function(s,o){return r.apply(this,arguments)}}()))}),kx.apply(this,arguments)}const bbe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cz{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ibe="__/auth/handler",Abe="emulator/auth/handler",Mbe=encodeURIComponent("fac");function uz(t,e,n,i,r,s){return Px.apply(this,arguments)}function Px(){return Px=D(function*(t,e,n,i,r,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Oc,eventId:r};if(e instanceof rl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof zye){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield t._getAppCheckToken(),c=l?`#${Mbe}=${encodeURIComponent(l)}`:"";return`${function xbe({config:t}){return t.emulator?RA(t,Abe):`https://${t.authDomain}/${Ibe}`}(t)}?${zp(a).slice(1)}${c}`}),Px.apply(this,arguments)}const Rx="webStorageSupport",Obe=class Nbe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q4,this._completeRedirectFn=rz,this._overrideRedirectResult=Zve}_openPopup(e,n,i,r){var s=this;return D(function*(){var o;tl(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield uz(e,n,i,Zp(),r);return function Tbe(t,e,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},bbe),{width:i.toString(),height:r.toString(),top:s,left:o}),c=kn().toLowerCase();n&&(a=E4(c)?"_blank":n),C4(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[g,m])=>`${h}${g}=${m},`,"");if(function mye(t=kn()){var e;return sb(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function Sbe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",a),new cz(null);const d=window.open(e||"",a,u);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new cz(d)}(e,a,nx())})()}_openRedirect(e,n,i,r){var s=this;return D(function*(){return yield s._originValidation(e),function bve(t){mn().location.href=t}(yield uz(e,n,i,Zp(),r)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(tl(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){var n=this;return D(function*(){const i=yield function vbe(t){return kx.apply(this,arguments)}(e),r=new ibe(e);return i.register("authEvent",s=>(Q(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:r},n.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rx,{type:Rx},r=>{var s;const o=null===(s=r?.[0])||void 0===s?void 0:s[Rx];void 0!==o&&n(!!o),Ji(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function lbe(t){return Ox.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return A4()||KA()||sb()}};var fz="@firebase/auth";class kbe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return D(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Lbe=dj("authIdTokenMaxAge")||300;let gz=null;const Bbe=t=>function(){var e=D(function*(n){const i=n&&(yield n.getIdTokenResult()),r=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>Lbe)return;const s=i?.token;gz!==s&&(gz=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function Vbe(t=eS()){const e=Zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Sye(t,e){const n=Zd(t,"auth");if(n.isInitialized()){const r=n.getImmediate();if(Ov(n.getOptions(),e??{}))return r;Ji(r,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Obe,persistence:[Mve,mve,Q4]}),i=dj("authTokenSyncURL");if(i){const s=Bbe(i);(function ove(t,e,n){qn(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function sve(t,e,n,i){qn(t).onIdTokenChanged(e,n,i)}(n,o=>s(o))}const r=cj("auth");return r&&function Aye(t,e,n){const i=Rn(t);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!n?.disableWarnings,s=L4(e),{host:o,port:a}=function Mye(t){const e=L4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:B4(i.substr(s.length+1))}}{const[s,o]=i.split(":");return{host:s,port:B4(o)}}}(e);i.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function xye(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${r}`),n}!function Rbe(t){Si(new li("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M4(t)},c=new Tye(i,r,s,l);return function Iye(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(sa);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Si(new li("auth-internal",e=>{const n=Rn(e.getProvider("auth").getImmediate());return new kbe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xt(fz,"0.23.2",function Pbe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Xt(fz,"0.23.2","esm2017")}("Browser");class _b{constructor(e){return e}}class _z{constructor(){return aA("auth")}}const Lx=new ie("angularfire2.auth-instances");function $be(t){return(e,n)=>{const i=e.runOutsideAngular(()=>t(n));return new _b(i)}}const Ube={provide:_z,deps:[[new yi,Lx]]},jbe={provide:_b,useFactory:function Hbe(t,e){const n=oA("auth",t,e);return n&&new _b(n)},deps:[[new yi,Lx],nh]};let zbe=(()=>{class t{constructor(){Xt("angularfire",qv.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[jbe,Ube]}),t})();function Gbe(t,...e){return{ngModule:zbe,providers:[{provide:Lx,useFactory:$be(t),multi:!0,deps:[Fe,Rt,lA,cA,[new yi,NA],...e]}]}}const Wbe=ms(Vbe,!0),qbe=ms(ave,!0),Kbe=ms(Jye,!0),Ybe=ms(lve,!0),yz="@firebase/database";let Bx="";class Jbe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:jp(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Zbe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return Jo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const bz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jbe(e)}}catch{}return new Zbe},Uc=bz("localStorage"),Vx=bz("sessionStorage"),ah=new Jd("@firebase/database"),wz=function(){let t=1;return function(){return t++}}(),Cz=function(t){const e=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,q(i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e}(t),n=new rhe;n.update(e);const i=n.digest();return Sv.encodeByteArray(i)},dg=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=dg.apply(null,i):e+="object"==typeof i?Dn(i):i,e+=" "}return e};let jc=null,Ez=!0;const Fn=function(...t){if(!0===Ez&&(Ez=!1,null===jc&&!0===Vx.get("logging_enabled")&&function(t,e){q(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ah.logLevel=vt.VERBOSE,jc=ah.log.bind(ah),e&&Vx.set("logging_enabled",!0)):"function"==typeof t?jc=t:(jc=null,Vx.remove("logging_enabled"))}(!0)),jc){const e=dg.apply(null,t);jc(e)}},hg=function(t){return function(...e){Fn(t,...e)}},Hx=function(...t){const e="FIREBASE INTERNAL ERROR: "+dg(...t);ah.error(e)},so=function(...t){const e=`FIREBASE FATAL ERROR: ${dg(...t)}`;throw ah.error(e),new Error(e)},ci=function(...t){const e="FIREBASE WARNING: "+dg(...t);ah.warn(e)},yb=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},sl="[MIN_NAME]",aa="[MAX_NAME]",zc=function(t,e){if(t===e)return 0;if(t===sl||e===aa)return-1;if(e===sl||t===aa)return 1;{const n=Iz(t),i=Iz(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}},t0e=function(t,e){return t===e?0:t<e?-1:1},fg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Dn(e))},$x=function(t){if("object"!=typeof t||null===t)return Dn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)0!==i&&(n+=","),n+=Dn(e[i]),n+=":",n+=$x(t[e[i]]);return n+="}",n},Tz=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i};function Ln(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Sz=function(t){q(!yb(t),"Invalid JSON number");const i=1023;let r,s,o,a,l;0===t?(s=0,o=0,r=1/t==-1/0?1:0):(r=t<0,(t=Math.abs(t))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},s0e=new RegExp("^-?(0*)\\d{1,10}$"),Iz=function(t){if(s0e.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},lh=function(t){try{t()}catch(e){setTimeout(()=>{throw ci("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pg=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class c0e{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ci(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class u0e{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ci(e)}}let gg=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const Oz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rz="websocket",Fz="long_polling";class jx{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Uc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Lz(t,e,n){let i;if(q("string"==typeof e,"typeof type must == string"),q("object"==typeof n,"typeof params must == object"),e===Rz)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Fz)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function d0e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const r=[];return Ln(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}class h0e{constructor(){this.counters_={}}incrementCounter(e,n=1){Jo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return jde(this.counters_)}}const zx={},Gx={};function Wx(t){const e=t.toString();return zx[e]||(zx[e]=new h0e),zx[e]}class p0e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&lh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ol{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hg(e),this.stats_=Wx(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Lz(n,Fz,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new p0e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qx((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Oz.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ol.forceAllow_=!0}static forceDisallow(){ol.forceDisallow_=!0}static isAvailable(){return!(!ol.forceAllow_&&(ol.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Dn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=aj(n),r=Tz(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Dn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qx{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=qx.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Fn("frame writing exception"),a.stack&&Fn(a.stack),Fn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return n+=i,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Fn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let bb=null;typeof MozWebSocket<"u"?bb=MozWebSocket:typeof WebSocket<"u"&&(bb=WebSocket);let ch=(()=>{class t{constructor(n,i,r,s,o,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hg(this.connId),this.stats_=Wx(i),this.connURL=t.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&Oz.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),s&&(a.ac=s),o&&(a.p=o),Lz(n,Rz,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uc.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new bb(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&null!==bb&&!t.forceDisallow_}static previouslyFailed(){return Uc.isInMemoryStorage||!0===Uc.get("previous_websocket_failure")}markConnectionHealthy(){Uc.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=jp(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(q(null===this.frames,"We already have a frame buffer"),n.length<=6){const i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();const i=Dn(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Tz(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),zz=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ol,ch]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const i=ch&&ch.isAvailable();let r=i&&!ch.previouslyFailed();if(n.webSocketOnly&&(i||ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ch];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class Jz{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hg("c:"+this.id+":"),this.transportManager_=new zz(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=pg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=fg("t",e),i=fg("d",e);if("c"===n)this.onSecondaryControl_(i);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=fg("t",e),i=fg("d",e);"c"===n?this.onControl_(i):"d"===n&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=fg("t",e);if("d"in e){const i=e.d;if("h"===n){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(i):"r"===n?this.onReset_(i):"e"===n?Hx("Server Error: "+i):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hx("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==i&&ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),pg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zz{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}class Xz{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class wb extends Xz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!HT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wb}getInitialEvent(e){return q("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ft{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function ot(){return new ft("")}function Ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function al(t){return t.pieces_.length-t.pieceNum_}function Et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ft(t.pieces_,e)}function Yx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function n8(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ft(e,0)}function Ft(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ft)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ft(n,0)}function He(t){return t.pieceNum_>=t.pieces_.length}function Ai(t,e){const n=Ve(t),i=Ve(e);if(null===n)return e;if(n===i)return Ai(Et(t),Et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Qx(t,e){if(al(t)!==al(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Gr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(al(t)>al(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class L0e{constructor(e,n){this.errorPrefix_=n,this.parts_=mg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=kv(this.parts_[i]);i8(this)}}function i8(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gc(t))}function Gc(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Jx extends Xz{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Jx}getInitialEvent(e){return q("visible"===e,"Unknown event type: "+e),[this.visible_]}}const _g=1e3;let Eb,Wc=(()=>{class t extends Zz{constructor(n,i,r,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=hg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_g,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jx.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&wb.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){const s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(Dn(o)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();const i=new Ic,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(n,i,r,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){const i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&"object"==typeof n&&Jo(n,"w")){const r=Yd(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=xv(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,i=function(t){const n=xv(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",r={cred:n};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const i=n.s,r=n.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){const r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);const o={p:n};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){const o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();const a={p:i,d:r};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(n){const i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Dn(n));const i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),"d"===n?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===n?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===n?this.onListenRevoked_(i.p,i.q):"ac"===n?this.onAuthRevoked_(i.s,i.d):"apc"===n?this.onAppCheckRevoked_(i.s,i.d):"sd"===n?this.onSecurityDebugPacket_(i):Hx("Unrecognized action received from server: "+Dn(n)+"\nAre you using the latest client?")}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_g),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return D(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const i=n.onDataMessage_.bind(n),r=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};n.realtime_={close:u,sendRequest:function(g){q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[g,m]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);l?Fn("getToken() completed but was canceled"):(Fn("getToken() completed. Creating connection."),n.authToken_=g&&g.accessToken,n.appCheckToken_=m&&m.token,c=new Jz(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,i,r,s,y=>{ci(y+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(g){n.log_("Failed to get token: "+g),l||(n.repoInfo_.nodeAdmin&&ci(g),u())}}})()}interrupt(n){Fn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Fn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],jT(this.interruptReasons_)&&(this.reconnectDelay_=_g,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const i=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;r=i?i.map(o=>$x(o)).join("$"):"default";const s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){const r=new ft(n).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){Fn("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Fn("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let i="js";n["sdk."+i+"."+Bx.replace(/\./g,"-")]=1,HT()?n["framework.cordova"]=1:hj()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=wb.getInstance().currentlyOnline();return jT(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new je(e,n)}}class Cb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new je(sl,e),r=new je(sl,n);return 0!==this.compare(i,r)}minPost(){return je.MIN}}class o8 extends Cb{static get __EMPTY_NODE(){return Eb}static set __EMPTY_NODE(e){Eb=e}compare(e,n){return zc(e.name,n.name)}isDefinedOn(e){throw Kd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return je.MIN}maxPost(){return new je(aa,Eb)}makePost(e,n){return q("string"==typeof e,"KeyIndex indexValue must always be a string."),new je(e,Eb)}toString(){return".key"}}const oo=new o8;class Db{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Xx,_s=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??Zi.EMPTY_NODE,this.right=o??Zi.EMPTY_NODE}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this;const o=r(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,i,r),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zi.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(n,r.key)){if(r.right.isEmpty())return Zi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Zi{constructor(e,n=Zi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Zi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_s.BLACK,null,null))}remove(e){return new Zi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_s.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),0===n)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),0===n){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}n<0?i=i.left:n>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Db(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Db(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Db(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Db(this.root_,null,this.comparator_,!0,e)}}function G0e(t,e){return zc(t.name,e.name)}function Zx(t,e){return zc(t,e)}Zi.EMPTY_NODE=new class z0e{copy(e,n,i,r,s){return this}insert(e,n,i){return new _s(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const a8=function(t){return"number"==typeof t?"number:"+Sz(t):"string:"+t},l8=function(t){if(t.isLeafNode()){const e=t.val();q("string"==typeof e||"number"==typeof e||"object"==typeof e&&Jo(e,".sv"),"Priority must be a string or number.")}else q(t===Xx||t.isEmpty(),"priority of unexpected type.");q(t===Xx||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let c8,u8,d8,uh=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,q(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),l8(this.priorityNode_)}static set __childrenNodeConstructor(n){c8=n}static get __childrenNodeConstructor(){return c8}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return He(n)?this:".priority"===Ve(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return".priority"===n?this.updatePriority(i):i.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){const r=Ve(n);return null===r?i:i.isEmpty()&&".priority"!==r?this:(q(".priority"!==r||1===al(n),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Et(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+a8(this.priorityNode_.val())+":");const i=typeof this.value_;n+=i+":",n+="number"===i?Sz(this.value_):this.value_,this.lazyHash_=Cz(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(q(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const i=typeof n.value_,r=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(r);return q(s>=0,"Unknown leaf type: "+i),q(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const xt=new class Y0e extends Cb{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return 0===s?zc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return je.MIN}maxPost(){return new je(aa,new uh("[PRIORITY-POST]",d8))}makePost(e,n){const i=u8(e);return new je(n,new uh("[PRIORITY-POST]",i))}toString(){return".priority"}},Q0e=Math.log(2);class J0e{constructor(e){this.count=parseInt(Math.log(e+1)/Q0e,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Tb=function(t,e,n,i){t.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=t[l],h=n?n(d):d,new _s(h,d.node,_s.BLACK,null,null);{const g=parseInt(u/2,10)+l,m=r(l,g),y=r(g+1,c);return d=t[g],h=n?n(d):d,new _s(h,d.node,_s.BLACK,m,y)}},a=function(l){let c=null,u=null,d=t.length;const h=function(m,y){const b=d-m,C=d;d-=m;const E=r(b+1,C),R=t[b],B=n?n(R):R;g(new _s(B,R.node,y,null,E))},g=function(m){c?(c.left=m,c=m):(u=m,c=m)};for(let m=0;m<l.count;++m){const y=l.nextBitIsOne(),b=Math.pow(2,l.count-(m+1));y?h(b,_s.BLACK):(h(b,_s.BLACK),h(b,_s.RED))}return u}(new J0e(t.length));return new Zi(i||e,a)};let eN;const dh={};class la{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(dh&&xt,"ChildrenNode.ts has not been loaded"),eN=eN||new la({".priority":dh},{".priority":xt}),eN}get(e){const n=Yd(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Zi?n:null}hasIndex(e){return Jo(this.indexSet_,e.toString())}addIndex(e,n){q(e!==oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(je.Wrap);let a,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();a=r?Tb(i,e.getCompare()):dh;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new la(u,c)}addToIndexes(e,n){const i=Nv(this.indexes_,(r,s)=>{const o=Yd(this.indexSet_,s);if(q(o,"Missing index implementation for "+s),r===dh){if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Tb(a,o.getCompare())}return dh}{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new je(e.name,a))),l.insert(e,e.node)}});return new la(i,this.indexSet_)}removeFromIndexes(e,n){const i=Nv(this.indexes_,r=>{if(r===dh)return r;{const s=n.get(e.name);return s?r.remove(new je(e.name,s)):r}});return new la(i,this.indexSet_)}}let yg,De=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&l8(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yg||(yg=new t(new Zi(Zx),null,la.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yg}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const i=this.children_.get(n);return null===i?yg:i}}getChild(n){const i=Ve(n);return null===i?this:this.getImmediateChild(i).getChild(Et(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,i){if(q(i,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(i);{const r=new je(n,i);let s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?yg:this.priorityNode_;return new t(s,a,o)}}updateChild(n,i){const r=Ve(n);if(null===r)return i;{q(".priority"!==Ve(n)||1===al(n),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Et(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const i={};let r=0,s=0,o=!0;if(this.forEachChild(xt,(a,l)=>{i[a]=l.val(n),r++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+a8(this.getPriority().val())+":"),this.forEachChild(xt,(i,r)=>{const s=r.hash();""!==s&&(n+=":"+i+":"+s)}),this.lazyHash_=""===n?"":Cz(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new je(n,i));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const i=this.resolveIndex_(n);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(n){const i=this.getFirstChildName(n);return i?new je(i,this.children_.get(i)):null}getLastChildName(n){const i=this.resolveIndex_(n);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(n){const i=this.getLastChildName(n);return i?new je(i,this.children_.get(i)):null}forEachChild(n,i){const r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,je.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,je.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===vg?-1:0}withIndex(n){if(n===oo||this.indexMap_.hasIndex(n))return this;{const i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===oo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const i=n;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(xt),s=i.getIterator(xt);let o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===oo?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const vg=new class Z0e extends De{constructor(){super(new Zi(Zx),De.EMPTY_NODE,la.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return De.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(je,{MIN:{value:new je(sl,De.EMPTY_NODE)},MAX:{value:new je(aa,vg)}}),o8.__EMPTY_NODE=De.EMPTY_NODE,uh.__childrenNodeConstructor=De,function W0e(t){Xx=t}(vg),function K0e(t){d8=t}(vg);const X0e=!0;function Wt(t,e=null){if(null===t)return De.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),q(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new uh(t,Wt(e));if(t instanceof Array||!X0e){let n=De.EMPTY_NODE;return Ln(t,(i,r)=>{if(Jo(t,i)&&"."!==i.substring(0,1)){const s=Wt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Wt(e))}{const n=[];let i=!1;if(Ln(t,(o,a)=>{if("."!==o.substring(0,1)){const l=Wt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new je(o,l)))}}),0===n.length)return De.EMPTY_NODE;const s=Tb(n,G0e,o=>o.name,Zx);if(i){const o=Tb(n,xt.getCompare());return new De(s,Wt(e),new la({".priority":o},{".priority":xt}))}return new De(s,Wt(e),la.Default)}}!function q0e(t){u8=t}(Wt);class tN extends Cb{constructor(e){super(),this.indexPath_=e,q(!He(e)&&".priority"!==Ve(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return 0===s?zc(e.name,n.name):s}makePost(e,n){const i=Wt(e),r=De.EMPTY_NODE.updateChild(this.indexPath_,i);return new je(n,r)}maxPost(){const e=De.EMPTY_NODE.updateChild(this.indexPath_,vg);return new je(aa,e)}toString(){return mg(this.indexPath_,0).join("/")}}const nN=new class ewe extends Cb{compare(e,n){const i=e.node.compareTo(n.node);return 0===i?zc(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,n){const i=Wt(e);return new je(n,i)}toString(){return".value"}};function h8(t){return{type:"value",snapshotNode:t}}function hh(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function bg(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wg(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class iN{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(bg(n,a)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(hh(n,i)):o.trackChildChange(wg(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return null!=i&&(e.isLeafNode()||e.forEachChild(xt,(r,s)=>{n.hasChild(r)||i.trackChildChange(bg(r,s))}),n.isLeafNode()||n.forEachChild(xt,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(wg(r,s,o))}else i.trackChildChange(hh(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?De.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Cg{constructor(e){this.indexedFilter_=new iN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Cg.getStartPost_(e),this.endPost_=Cg.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new je(n,i))||(i=De.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=De.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(De.EMPTY_NODE);const s=this;return n.forEachChild(xt,(o,a)=>{s.matches(new je(o,a))||(r=r.updateImmediateChild(o,De.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class nwe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Cg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new je(n,i))||(i=De.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=De.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;r=De.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{let s;r=n.withIndex(this.index_),r=r.updatePriority(De.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,De.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,g)=>d(g,h)}else o=this.index_.getCompare();const a=e;q(a.numChildren()===this.limit_,"");const l=new je(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===n||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const g=null==h?1:o(h,l);if(u&&!i.isEmpty()&&g>=0)return s?.trackChildChange(wg(n,i,d)),a.updateImmediateChild(n,i);{s?.trackChildChange(bg(n,d));const y=a.updateImmediateChild(n,De.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(s?.trackChildChange(hh(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}return i.isEmpty()?e:u&&o(c,l)>=0?(null!=s&&(s.trackChildChange(bg(c.name,c.node)),s.trackChildChange(hh(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,De.EMPTY_NODE)):e}}class rN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sl}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:aa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xt}copy(){const e=new rN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function f8(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xt?n="$priority":t.index_===nN?n="$value":t.index_===oo?n="$key":(q(t.index_ instanceof tN,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Dn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Dn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Dn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Dn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Dn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function p8(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==xt&&(e.i=t.index_.toString()),e}class Ib extends Zz{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ib.getListenId_(e,i),a={};this.listens_[o]=a;const l=f8(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,i),Yd(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,n){const i=Ib.getListenId_(e,n);delete this.listens_[i]}get(e){const n=f8(e._queryParams),i=e._path.toString(),r=new Ic;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zp(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=jp(a.responseText)}catch{ci("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&ci("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class lwe{constructor(){this.rootNode_=De.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Ab(){return{value:null,children:new Map}}function fh(t,e,n){if(He(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const i=Ve(e);t.children.has(i)||t.children.set(i,Ab()),fh(t.children.get(i),e=Et(e),n)}}function lN(t,e,n){null!==t.value?n(e,t.value):function cwe(t,e){t.children.forEach((n,i)=>{e(i,n)})}(t,(i,r)=>{lN(r,new ft(e.toString()+"/"+i),n)})}class uwe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ln(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}class fwe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uwe(e);const i=1e4+2e4*Math.random();pg(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Ln(e,(r,s)=>{s>0&&Jo(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),pg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ao=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(ao||{});function dN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Mb{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ao.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(He(this.path)){if(null!=this.affectedTree.value)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ft(e));return new Mb(ot(),n,this.revert)}}return q(Ve(this.path)===e,"operationForChild called for unrelated child."),new Mb(Et(this.path),this.affectedTree,this.revert)}}class Eg{constructor(e,n){this.source=e,this.path=n,this.type=ao.LISTEN_COMPLETE}operationForChild(e){return He(this.path)?new Eg(this.source,ot()):new Eg(this.source,Et(this.path))}}class qc{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ao.OVERWRITE}operationForChild(e){return He(this.path)?new qc(this.source,ot(),this.snap.getImmediateChild(e)):new qc(this.source,Et(this.path),this.snap)}}class ph{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ao.MERGE}operationForChild(e){if(He(this.path)){const n=this.children.subtree(new ft(e));return n.isEmpty()?null:n.value?new qc(this.source,ot(),n.value):new ph(this.source,ot(),n)}return q(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ph(this.source,Et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ll{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(He(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pwe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Dg(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>function _we(t,e,n){if(null==e.childName||null==n.childName)throw Kd("Should only compare child_ events.");const i=new je(e.childName,e.snapshotNode),r=new je(n.childName,n.snapshotNode);return t.index_.compare(i,r)}(t,a,l)),o.forEach(a=>{const l=function mwe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function xb(t,e){return{eventCache:t,serverCache:e}}function Tg(t,e,n,i){return xb(new ll(e,n,i),t.serverCache)}function m8(t,e,n,i){return xb(t.eventCache,new ll(e,n,i))}function Nb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let hN;class Nt{constructor(e,n=(()=>(hN||(hN=new Zi(t0e)),hN))()){this.value=e,this.children=n}static fromObject(e){let n=new Nt(null);return Ln(e,(i,r)=>{n=n.set(new ft(i),r)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:ot(),value:this.value};if(He(e))return null;{const i=Ve(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Et(e),n);return null!=s?{path:Ft(new ft(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(He(e))return this;{const n=Ve(e),i=this.children.get(n);return null!==i?i.subtree(Et(e)):new Nt(null)}}set(e,n){if(He(e))return new Nt(n,this.children);{const i=Ve(e),s=(this.children.get(i)||new Nt(null)).set(Et(e),n),o=this.children.insert(i,s);return new Nt(this.value,o)}}remove(e){if(He(e))return this.children.isEmpty()?new Nt(null):new Nt(null,this.children);{const n=Ve(e),i=this.children.get(n);if(i){const r=i.remove(Et(e));let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&s.isEmpty()?new Nt(null):new Nt(this.value,s)}return this}}get(e){if(He(e))return this.value;{const n=Ve(e),i=this.children.get(n);return i?i.get(Et(e)):null}}setTree(e,n){if(He(e))return n;{const i=Ve(e),s=(this.children.get(i)||new Nt(null)).setTree(Et(e),n);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Nt(this.value,o)}}fold(e){return this.fold_(ot(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ft(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ot(),n)}findOnPath_(e,n,i){const r=!!this.value&&i(n,this.value);if(r)return r;if(He(e))return null;{const s=Ve(e),o=this.children.get(s);return o?o.findOnPath_(Et(e),Ft(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ot(),n)}foreachOnPath_(e,n,i){if(He(e))return this;{this.value&&i(n,this.value);const r=Ve(e),s=this.children.get(r);return s?s.foreachOnPath_(Et(e),Ft(n,r),i):new Nt(null)}}foreach(e){this.foreach_(ot(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Ft(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}class ys{constructor(e){this.writeTree_=e}static empty(){return new ys(new Nt(null))}}function Sg(t,e,n){if(He(e))return new ys(new Nt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=Ai(r,e);return s=s.updateChild(o,n),new ys(t.writeTree_.set(r,s))}{const r=new Nt(n),s=t.writeTree_.setTree(e,r);return new ys(s)}}}function fN(t,e,n){let i=t;return Ln(n,(r,s)=>{i=Sg(i,Ft(e,r),s)}),i}function _8(t,e){if(He(e))return ys.empty();{const n=t.writeTree_.setTree(e,new Nt(null));return new ys(n)}}function pN(t,e){return null!=Yc(t,e)}function Yc(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ai(n.path,e)):null}function y8(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(xt,(i,r)=>{e.push(new je(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new je(i,r.value))}),e}function cl(t,e){if(He(e))return t;{const n=Yc(t,e);return new ys(null!=n?new Nt(n):t.writeTree_.subtree(e))}}function gN(t){return t.writeTree_.isEmpty()}function gh(t,e){return v8(ot(),t.writeTree_,e)}function v8(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?(q(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):n=v8(Ft(t,r),s,n)}),!n.getChild(t).isEmpty()&&null!==i&&(n=n.updateChild(Ft(t,".priority"),i)),n}}function Ob(t,e){return D8(e,t)}function Ewe(t,e){if(t.snap)return Gr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Gr(Ft(t.path,n),e))return!0;return!1}function Twe(t){return t.visible}function b8(t,e,n){let i=ys.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)Gr(n,o)?(a=Ai(n,o),i=Sg(i,a,s.snap)):Gr(o,n)&&(a=Ai(o,n),i=Sg(i,ot(),s.snap.getChild(a)));else{if(!s.children)throw Kd("WriteRecord should have .snap or .children");if(Gr(n,o))a=Ai(n,o),i=fN(i,a,s.children);else if(Gr(o,n))if(a=Ai(o,n),He(a))i=fN(i,ot(),s.children);else{const l=Yd(s.children,Ve(a));if(l){const c=l.getChild(Et(a));i=Sg(i,ot(),c)}}}}}return i}function w8(t,e,n,i,r){if(i||r){const s=cl(t.visibleWrites,e);return!r&&gN(s)?n:r||null!=n||pN(s,ot())?gh(b8(t.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Gr(c.path,e)||Gr(e,c.path))},e),n||De.EMPTY_NODE):null}{const s=Yc(t.visibleWrites,e);if(null!=s)return s;{const o=cl(t.visibleWrites,e);return gN(o)?n:null!=n||pN(o,ot())?gh(o,n||De.EMPTY_NODE):null}}}function kb(t,e,n,i){return w8(t.writeTree,t.treePath,e,n,i)}function mN(t,e){return function Swe(t,e,n){let i=De.EMPTY_NODE;const r=Yc(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(xt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=cl(t.visibleWrites,e);return n.forEachChild(xt,(o,a)=>{const l=gh(cl(s,new ft(o)),a);i=i.updateImmediateChild(o,l)}),y8(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return y8(cl(t.visibleWrites,e)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(t.writeTree,t.treePath,e)}function C8(t,e,n,i){return function Iwe(t,e,n,i,r){q(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ft(e,n);if(pN(t.visibleWrites,s))return null;{const o=cl(t.visibleWrites,s);return gN(o)?r.getChild(n):gh(o,r.getChild(n))}}(t.writeTree,t.treePath,e,n,i)}function Pb(t,e){return function Mwe(t,e){return Yc(t.visibleWrites,e)}(t.writeTree,Ft(t.treePath,e))}function _N(t,e,n){return function Awe(t,e,n,i){const r=Ft(e,n),s=Yc(t.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?gh(cl(t.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function E8(t,e){return D8(Ft(t.treePath,e),t.writeTree)}function D8(t,e){return{treePath:t,writeTree:e}}class kwe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;q("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),q(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(i,wg(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(i,bg(i,r.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(i,hh(i,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw Kd("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,wg(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const T8=new class Pwe{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}};class yN{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new ll(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _N(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kc(this.viewCache_),s=function Owe(t,e,n,i,r,s){return function xwe(t,e,n,i,r,s,o){let a;const l=cl(t.visibleWrites,e),c=Yc(l,ot());if(null!=c)a=c;else{if(null==n)return[];a=gh(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let g=h.getNext();for(;g&&u.length<r;)0!==d(g,i)&&u.push(g),g=h.getNext();return u}}(t.writeTree,t.treePath,e,n,i,r,s)}(this.writes_,r,n,1,i,e);return 0===s.length?null:s[0]}}function S8(t,e,n,i,r,s){const o=e.eventCache;if(null!=Pb(i,n))return e;{let a,l;if(He(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Kc(e),d=mN(i,c instanceof De?c:De.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=kb(i,Kc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ve(n);if(".priority"===c){q(1===al(n),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=C8(i,n,u,l);a=null!=d?t.filter.updatePriority(u,d):o.getNode()}else{const u=Et(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=C8(i,n,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=_N(i,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,u,r,s):o.getNode()}}return Tg(e,a,o.isFullyInitialized()||He(n),t.filter.filtersNodes())}}function Rb(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(He(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),g,null)}else{const g=Ve(n);if(!l.isCompleteForPath(n)&&al(n)>1)return e;const m=Et(n),b=l.getNode().getImmediateChild(g).updateChild(m,i);c=".priority"===g?u.updatePriority(l.getNode(),b):u.updateChild(l.getNode(),g,b,m,T8,null)}const d=m8(e,c,l.isFullyInitialized()||He(n),u.filtersNodes());return S8(t,d,n,r,new yN(r,d,s),a)}function vN(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const u=new yN(r,e,s);if(He(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Tg(e,c,!0,t.filter.filtersNodes());else{const d=Ve(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Tg(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Et(n),g=a.getNode().getImmediateChild(d);let m;if(He(h))m=i;else{const y=u.getCompleteChild(d);m=null!=y?".priority"===Yx(h)&&y.getChild(n8(h)).isEmpty()?y:y.updateChild(h,i):De.EMPTY_NODE}l=g.equals(m)?e:Tg(e,t.filter.updateChild(a.getNode(),d,m,h,u,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function I8(t,e){return t.eventCache.isCompleteForChild(e)}function A8(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function bN(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=He(n)?i:new Nt(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const m=A8(0,e.serverCache.getNode().getImmediateChild(d),h);l=Rb(t,l,new ft(d),m,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const g=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!g){const y=A8(0,e.serverCache.getNode().getImmediateChild(d),h);l=Rb(t,l,new ft(d),y,r,s,o,a)}}),l}class jwe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new iN(i.getIndex()),s=function iwe(t){return t.loadsAllData()?new iN(t.getIndex()):t.hasLimit()?new nwe(t):new Cg(t)}(i);this.processor_=function Rwe(t){return{filter:t}}(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(De.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(De.EMPTY_NODE,a.getNode(),null),u=new ll(l,o.isFullyInitialized(),r.filtersNodes()),d=new ll(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=xb(d,u),this.eventGenerator_=new pwe(this.query_)}get query(){return this.query_}}function Wwe(t,e){const n=Kc(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!He(e)&&!n.getImmediateChild(Ve(e)).isEmpty())?n.getChild(e):null}function M8(t){return 0===t.eventRegistrations_.length}function x8(t,e,n){const i=[];if(n){q(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}else r.push(o)}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function N8(t,e,n,i){e.type===ao.MERGE&&null!==e.source.queryId&&(q(Kc(t.viewCache_),"We should always have a full cache before handling merges"),q(Nb(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=function Lwe(t,e,n,i,r){const s=new kwe;let o,a;if(n.type===ao.OVERWRITE){const c=n;c.source.fromUser?o=vN(t,e,c.path,c.snap,i,r,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!He(c.path),o=Rb(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===ao.MERGE){const c=n;c.source.fromUser?o=function Vwe(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=Ft(n,l);I8(e,Ve(u))&&(a=vN(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=Ft(n,l);I8(e,Ve(u))||(a=vN(t,a,u,c,r,s,o))}),a}(t,e,c.path,c.children,i,r,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=bN(t,e,c.path,c.children,i,r,a,s))}else if(n.type===ao.ACK_USER_WRITE){const c=n;o=c.revert?function Uwe(t,e,n,i,r,s){let o;if(null!=Pb(i,n))return e;{const a=new yN(i,e,r),l=e.eventCache.getNode();let c;if(He(n)||".priority"===Ve(n)){let u;if(e.serverCache.isFullyInitialized())u=kb(i,Kc(e));else{const d=e.serverCache.getNode();q(d instanceof De,"serverChildren would be complete if leaf node"),u=mN(i,d)}c=t.filter.updateFullNode(l,u,s)}else{const u=Ve(n);let d=_N(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?t.filter.updateChild(l,u,d,Et(n),a,s):e.eventCache.getNode().hasChild(u)?t.filter.updateChild(l,u,De.EMPTY_NODE,Et(n),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=kb(i,Kc(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Pb(i,ot()),Tg(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,i,r,s):function Hwe(t,e,n,i,r,s,o){if(null!=Pb(r,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(He(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Rb(t,e,n,l.getNode().getChild(n),r,s,a,o);if(He(n)){let c=new Nt(null);return l.getNode().forEachChild(oo,(u,d)=>{c=c.set(new ft(u),d)}),bN(t,e,n,c,r,s,a,o)}return e}{let c=new Nt(null);return i.foreach((u,d)=>{const h=Ft(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),bN(t,e,n,c,r,s,a,o)}}(t,e,c.path,c.affectedTree,i,r,s)}else{if(n.type!==ao.LISTEN_COMPLETE)throw Kd("Unknown operation type: "+n.type);o=function $we(t,e,n,i,r){const s=e.serverCache;return S8(t,m8(e,s.getNode(),s.isFullyInitialized()||He(n),s.isFiltered()),n,i,T8,r)}(t,e,n.path,i,s)}const l=s.getChanges();return function Bwe(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Nb(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(h8(Nb(e)))}}(e,o,l),{viewCache:o,changes:l}}(t.processor_,r,e,n,i);return function Fwe(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),q(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,O8(t,s.changes,s.viewCache.eventCache.getNode(),null)}function O8(t,e,n,i){return function gwe(t,e,n,i){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function twe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),Dg(t,r,"child_removed",e,i,n),Dg(t,r,"child_added",e,i,n),Dg(t,r,"child_moved",s,i,n),Dg(t,r,"child_changed",e,i,n),Dg(t,r,"value",e,i,n),r}(t.eventGenerator_,e,n,i?[i]:t.eventRegistrations_)}let Fb,Bb;class k8{constructor(){this.views=new Map}}function wN(t,e,n,i){const r=e.source.queryId;if(null!==r){const s=t.views.get(r);return q(null!=s,"SyncTree gave us an op for an invalid query."),N8(s,e,n,i)}{let s=[];for(const o of t.views.values())s=s.concat(N8(o,e,n,i));return s}}function P8(t,e,n,i,r){const o=t.views.get(e._queryIdentifier);if(!o){let a=kb(n,r?i:null),l=!1;a?l=!0:i instanceof De?(a=mN(n,i),l=!1):(a=De.EMPTY_NODE,l=!1);const c=xb(new ll(a,l,!1),new ll(i,r,!1));return new jwe(e,c)}return o}function R8(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ul(t,e){let n=null;for(const i of t.views.values())n=n||Wwe(i,e);return n}function F8(t,e){return e._queryParams.loadsAllData()?Lb(t):t.views.get(e._queryIdentifier)}function L8(t,e){return null!=F8(t,e)}function dl(t){return null!=Lb(t)}function Lb(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let n1e=1;class B8{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nt(null),this.pendingWriteTree_=function Nwe(){return{visibleWrites:ys.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CN(t,e,n,i,r){return function vwe(t,e,n,i,r){q(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Sg(t.visibleWrites,e,n)),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i,r),r?mh(t,new qc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function hl(t,e,n=!1){const i=function wwe(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}(t.pendingWriteTree_,e);if(function Cwe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Ewe(a,i.path)?r=!1:Gr(i.path,a.path)&&(s=!0)),o--}return!!r&&(s?(function Dwe(t){t.visibleWrites=b8(t.allWrites,Twe,ot()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(i.snap?t.visibleWrites=_8(t.visibleWrites,i.path):Ln(i.children,l=>{t.visibleWrites=_8(t.visibleWrites,Ft(i.path,l))}),!0))}(t.pendingWriteTree_,e)){let s=new Nt(null);return null!=i.snap?s=s.set(ot(),!0):Ln(i.children,o=>{s=s.set(new ft(o),!0)}),mh(t,new Mb(i.path,s,n))}return[]}function Ig(t,e,n){return mh(t,new qc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Vb(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||L8(o,e))){const l=function Xwe(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=dl(t);if("default"===r)for(const[l,c]of t.views.entries())o=o.concat(x8(c,n,i)),M8(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(x8(l,n,i)),M8(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!dl(t)&&s.push(new(function Qwe(){return q(Fb,"Reference.ts has not been loaded"),Fb}())(e._repo,e._path)),{removed:s,events:o}}(o,e,n,i);(function Jwe(t){return 0===t.views.size})(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=t.syncPointTree_.findOnPath(s,(h,g)=>dl(g));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const g=function c1e(t){return t.fold((e,n,i)=>{if(n&&dl(n))return[Lb(n)];{let r=[];return n&&(r=R8(n)),Ln(i,(s,o)=>{r=r.concat(o)}),r}})}(h);for(let m=0;m<g.length;++m){const y=g[m],b=y.query,C=U8(t,y);t.listenProvider_.startListening(Mg(b),Ag(t,b),C.hashFn,C.onComplete)}}}!d&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(Mg(e),null):c.forEach(h=>{const g=t.queryToTagMap.get($b(h));t.listenProvider_.stopListening(Mg(h),g)}))}!function u1e(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=$b(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}(t,c)}return a}function V8(t,e,n,i){const r=DN(t,i);if(null!=r){const s=TN(r),o=s.path,a=s.queryId,l=Ai(o,e);return SN(t,o,new qc(dN(a),l,n))}return[]}function EN(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(h,g)=>{const m=Ai(h,r);s=s||ul(g,m),o=o||dl(g)});let l,a=t.syncPointTree_.get(r);a?(o=o||dl(a),s=s||ul(a,ot())):(a=new k8,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=s?l=!0:(l=!1,s=De.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((g,m)=>{const y=ul(m,ot());y&&(s=s.updateImmediateChild(g,y))}));const c=L8(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=$b(e);q(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const g=function d1e(){return n1e++}();t.queryToTagMap.set(h,g),t.tagToQueryMap.set(g,h)}let d=function Zwe(t,e,n,i,r,s){const o=P8(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function qwe(t,e){t.eventRegistrations_.push(e)}(o,n),function Kwe(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xt,(s,o)=>{i.push(hh(s,o))}),n.isFullyInitialized()&&i.push(h8(n.getNode())),O8(t,i,n.getNode(),e)}(o,n)}(a,e,n,Ob(t.pendingWriteTree_,r),s,l);if(!c&&!o&&!i){const h=F8(a,e);d=d.concat(function h1e(t,e,n){const i=e._path,r=Ag(t,e),s=U8(t,n),o=t.listenProvider_.startListening(Mg(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)q(!dl(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!He(c)&&u&&dl(u))return[Lb(u).query];{let h=[];return u&&(h=h.concat(R8(u).map(g=>g.query))),Ln(d,(g,m)=>{h=h.concat(m)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Mg(u),Ag(t,u))}}return o}(t,e,h))}return d}function Hb(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=ul(a,Ai(o,e));if(c)return c});return w8(r,e,s,n,!0)}function mh(t,e){return H8(e,t.syncPointTree_,null,Ob(t.pendingWriteTree_,ot()))}function H8(t,e,n,i){if(He(t.path))return $8(t,e,n,i);{const r=e.get(ot());null==n&&null!=r&&(n=ul(r,ot()));let s=[];const o=Ve(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=E8(i,o);s=s.concat(H8(a,l,c,u))}return r&&(s=s.concat(wN(r,t,i,n))),s}}function $8(t,e,n,i){const r=e.get(ot());null==n&&null!=r&&(n=ul(r,ot()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=E8(i,o),u=t.operationForChild(o);u&&(s=s.concat($8(u,a,l,c)))}),r&&(s=s.concat(wN(r,t,i,n))),s}function U8(t,e){const n=e.query,i=Ag(t,n);return{hashFn:()=>(function zwe(t){return t.viewCache_.serverCache.getNode()}(e)||De.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function o1e(t,e,n){const i=DN(t,n);if(i){const r=TN(i),s=r.path,o=r.queryId,a=Ai(s,e);return SN(t,s,new Eg(dN(o),a))}return[]}(t,n._path,i):function s1e(t,e){return mh(t,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const s=function r0e(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}(r,n);return Vb(t,n,null,s)}}}}function Ag(t,e){const n=$b(e);return t.queryToTagMap.get(n)}function $b(t){return t._path.toString()+"$"+t._queryIdentifier}function DN(t,e){return t.tagToQueryMap.get(e)}function TN(t){const e=t.indexOf("$");return q(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ft(t.substr(0,e))}}function SN(t,e,n){const i=t.syncPointTree_.get(e);return q(i,"Missing sync point for query tag that we're tracking"),wN(i,n,Ob(t.pendingWriteTree_,e),null)}function Mg(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function t1e(){return q(Bb,"Reference.ts has not been loaded"),Bb}())(t._repo,t._path):t}class IN{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new IN(n)}node(){return this.node_}}class AN{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ft(this.path_,e);return new AN(this.syncTree_,n)}node(){return Hb(this.syncTree_,this.path_)}}const f1e=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},j8=function(t,e,n){return t&&"object"==typeof t?(q(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?p1e(t[".sv"],e,n):"object"==typeof t[".sv"]?g1e(t[".sv"],e):void q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},p1e=function(t,e,n){if("timestamp"===t)return n.timestamp;q(!1,"Unexpected server value: "+t)},g1e=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&q(!1,"Unexpected increment value: "+i);const r=e.node();if(q(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},z8=function(t,e,n,i){return xN(e,new AN(n,t),i)},MN=function(t,e,n){return xN(t,new IN(e),n)};function xN(t,e,n){const i=t.getPriority().val(),r=j8(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=j8(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new uh(a,Wt(r)):t}{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new uh(r))),o.forEachChild(xt,(a,l)=>{const c=xN(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class NN{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Ub(t,e){let n=e instanceof ft?e:new ft(e),i=t,r=Ve(n);for(;null!==r;){const s=Yd(i.node.children,r)||{children:{},childCount:0};i=new NN(r,i,s),n=Et(n),r=Ve(n)}return i}function Qc(t){return t.node.value}function ON(t,e){t.node.value=e,kN(t)}function G8(t){return t.node.childCount>0}function jb(t,e){Ln(t.node.children,(n,i)=>{e(new NN(n,t,i))})}function W8(t,e,n,i){n&&!i&&e(t),jb(t,r=>{W8(r,e,!0,i)}),n&&i&&e(t)}function xg(t){return new ft(null===t.parent?t.name:xg(t.parent)+"/"+t.name)}function kN(t){null!==t.parent&&function y1e(t,e,n){const i=function m1e(t){return void 0===Qc(t)&&!G8(t)}(n),r=Jo(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,kN(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,kN(t))}(t.parent,t.name,t)}const v1e=/[\[\].#$\/\u0000-\u001F\u007F]/,b1e=/[\[\].#$\u0000-\u001F\u007F]/,PN=10485760,zb=function(t){return"string"==typeof t&&0!==t.length&&!v1e.test(t)},q8=function(t){return"string"==typeof t&&0!==t.length&&!b1e.test(t)},lo=function(t,e,n,i){i&&void 0===e||Og(Qd(t,"value"),e,n)},Og=function(t,e,n){const i=n instanceof ft?new L0e(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Gc(i));if("function"==typeof e)throw new Error(t+"contains a function "+Gc(i)+" with contents = "+e.toString());if(yb(e))throw new Error(t+"contains "+e.toString()+" "+Gc(i));if("string"==typeof e&&e.length>PN/3&&kv(e)>PN)throw new Error(t+"contains a string greater than "+PN+" utf8 bytes "+Gc(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Ln(e,(o,a)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!zb(o)))throw new Error(t+" contains an invalid key ("+o+") "+Gc(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function B0e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=kv(e),i8(t)})(i,o),Og(t,a,i),function V0e(t){const e=t.parts_.pop();t.byteLength_-=kv(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)}),r&&s)throw new Error(t+' contains ".value" child '+Gc(i)+" in addition to actual children.")}},FN=function(t,e,n,i){if(!(i&&void 0===n||q8(n)))throw new Error(Qd(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},E1e=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),FN(t,e,n,i)},co=function(t,e){if(".info"===Ve(e))throw new Error(t+" failed = Can't modify data under /.info/")};class D1e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gb(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==n&&!Qx(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function _r(t,e,n){Gb(t,n),function J8(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];r&&(e(r.path)?(T1e(t.eventLists_[i]),t.eventLists_[i]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,i=>Gr(i,e)||Gr(e,i))}function T1e(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const i=n.getEventRunner();jc&&Fn("event: "+n.toString()),lh(i)}}}const S1e=25;class I1e{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new D1e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ab(),this.transactionQueueTree_=new NN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X8(t){const n=t.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Pg(t){return f1e({timestamp:X8(t)})}function e6(t,e,n,i,r){t.dataUpdateCount++;const s=new ft(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=Nv(n,c=>Wt(c));o=function a1e(t,e,n,i){const r=DN(t,i);if(r){const s=TN(r),o=s.path,a=s.queryId,l=Ai(o,e),c=Nt.fromObject(n);return SN(t,o,new ph(dN(a),l,c))}return[]}(t.serverSyncTree_,s,l,r)}else{const l=Wt(n);o=V8(t.serverSyncTree_,s,l,r)}else if(i){const l=Nv(n,c=>Wt(c));o=function r1e(t,e,n){const i=Nt.fromObject(n);return mh(t,new ph({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,s,l)}else{const l=Wt(n);o=Ig(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=yh(t,s)),_r(t.eventQueue_,a,o)}function t6(t,e){LN(t,"connected",e),!1===e&&function O1e(t){_h(t,"onDisconnectEvents");const e=Pg(t),n=Ab();lN(t.onDisconnect_,ot(),(r,s)=>{const o=z8(r,s,t.serverSyncTree_,e);fh(n,r,o)});let i=[];lN(n,ot(),(r,s)=>{i=i.concat(Ig(t.serverSyncTree_,r,s));const o=$N(t,r);yh(t,o)}),t.onDisconnect_=Ab(),_r(t.eventQueue_,ot(),i)}(t)}function LN(t,e,n){const i=new ft("/.info/"+e),r=Wt(n);t.infoData_.updateSnapshot(i,r);const s=Ig(t.infoSyncTree_,i,r);_r(t.eventQueue_,i,s)}function Wb(t){return t.nextWriteId_++}function BN(t,e,n,i,r){_h(t,"set",{path:e.toString(),value:n,priority:i});const s=Pg(t),o=Wt(n,i),a=Hb(t.serverSyncTree_,e),l=MN(o,a,s),c=Wb(t),u=CN(t.serverSyncTree_,e,l,c,!0);Gb(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,g)=>{const m="ok"===h;m||ci("set at "+e+" failed: "+h);const y=hl(t.serverSyncTree_,c,!m);_r(t.eventQueue_,e,y),function fl(t,e,n,i){e&&lh(()=>{if("ok"===n)e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}(0,r,h,g)});const d=$N(t,e);yh(t,d),_r(t.eventQueue_,d,[])}function _h(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Fn(n,...e)}function HN(t,e,n){return Hb(t.serverSyncTree_,e,n)||De.EMPTY_NODE}function qb(t,e=t.transactionQueueTree_){if(e||Kb(t,e),Qc(e)){const n=s6(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(r=>0===r.status)&&function V1e(t,e,n){const i=n.map(c=>c.currentWriteId),r=HN(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];q(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ai(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{_h(t,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(hl(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Kb(t,Ub(t.transactionQueueTree_,e)),qb(t,t.transactionQueueTree_),_r(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)lh(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{ci("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}yh(t,e)}},o)}(t,xg(e),n)}else G8(e)&&jb(e,n=>{qb(t,n)})}function yh(t,e){const n=r6(t,e),i=xg(n);return function H1e(t,e,n){if(0===e.length)return;const i=[];let r=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ai(n,l.path);let d,u=!1;if(q(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(hl(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=S1e)u=!0,d="maxretry",r=r.concat(hl(t.serverSyncTree_,l.currentWriteId,!0));else{const h=HN(t,l.path,o);l.currentInputSnapshot=h;const g=e[a].update(h.val());if(void 0!==g){Og("transaction failed: Data returned ",g,l.path);let m=Wt(g);"object"==typeof g&&null!=g&&Jo(g,".priority")||(m=m.updatePriority(h.getPriority()));const b=l.currentWriteId,C=Pg(t),E=MN(m,h,C);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=E,l.currentWriteId=Wb(t),o.splice(o.indexOf(b),1),r=r.concat(CN(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),r=r.concat(hl(t.serverSyncTree_,b,!0))}else u=!0,d="nodata",r=r.concat(hl(t.serverSyncTree_,l.currentWriteId,!0))}_r(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Kb(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)lh(i[a]);qb(t,t.transactionQueueTree_)}(t,s6(t,n),i),i}function r6(t,e){let n,i=t.transactionQueueTree_;for(n=Ve(e);null!==n&&void 0===Qc(i);)i=Ub(i,n),n=Ve(e=Et(e));return i}function s6(t,e){const n=[];return o6(t,e,n),n.sort((i,r)=>i.order-r.order),n}function o6(t,e,n){const i=Qc(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);jb(e,r=>{o6(t,r,n)})}function Kb(t,e){const n=Qc(e);if(n){let i=0;for(let r=0;r<n.length;r++)2!==n[r].status&&(n[i]=n[r],i++);n.length=i,ON(e,n.length>0?n:void 0)}jb(e,i=>{Kb(t,i)})}function $N(t,e){const n=xg(r6(t,e)),i=Ub(t.transactionQueueTree_,e);return function _1e(t,e,n){let i=n?t:t.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{UN(t,r)}),UN(t,i),W8(i,r=>{UN(t,r)}),n}function UN(t,e){const n=Qc(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(q(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(q(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(hl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ON(e,void 0):n.length=s+1,_r(t.eventQueue_,xg(e),r);for(let o=0;o<i.length;o++)lh(i[o])}}const jN=function(t,e){const n=j1e(t),i=n.namespace;return"firebase.com"===n.domain&&so(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==n.domain&&so("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jx(n.host,n.secure,i,"ws"===n.scheme||"wss"===n.scheme,e,"",i!==n.subdomain),path:new ft(n.pathString)}},j1e=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");-1===u&&(u=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=function $1e(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(t.substring(u,d)));const h=function U1e(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ci(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const g=e.slice(0,c);if("localhost"===g.toLowerCase())n="localhost";else if(g.split(".").length<=2)n=g;else{const m=e.indexOf(".");i=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class l6{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dn(this.snapshot.exportVal())}}class c6{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class yr{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return He(this._path)?null:Yx(this._path)}get ref(){return new vs(this._repo,this._path)}get _queryIdentifier(){const e=p8(this._queryParams),n=$x(e);return"{}"===n?"default":n}get _queryObject(){return p8(this._queryParams)}isEqual(e){if(!((e=qn(e))instanceof yr))return!1;const n=this._repo===e._repo,i=Qx(this._path,e._path);return n&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function R0e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class vs extends yr{constructor(e,n){super(e,n,new rN,!1)}get parent(){const e=n8(this._path);return null===e?null:new vs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jc{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ft(e),i=Zc(this.ref,e);return new Jc(this._node.getChild(n),i,xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Jc(r,Zc(this.ref,i),xt)))}hasChild(e){const n=new ft(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function u6(t,e){return(t=qn(t))._checkNotDeleted("ref"),void 0!==e?Zc(t._root,e):t._root}function Zc(t,e){return null===Ve((t=qn(t))._path)?E1e("child","path",e,!1):FN("child","path",e,!1),new vs(t._repo,Ft(t._path,e))}function W1e(t){return co("remove",t._path),GN(t,null)}function GN(t,e){t=qn(t),co("set",t._path),lo("set",e,t._path,!1);const n=new Ic;return BN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function q1e(t){t=qn(t);const e=new zN(()=>{}),n=new Rg(e);return function x1e(t,e,n){const i=function l1e(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=Ai(c,n);i=i||ul(u,d)});let r=t.syncPointTree_.get(n);r?i=i||ul(r,ot()):(r=new k8,t.syncPointTree_=t.syncPointTree_.set(n,r));const s=null!=i,o=s?new ll(i,!0,!1):null;return function Gwe(t){return Nb(t.viewCache_)}(P8(r,e,Ob(t.pendingWriteTree_,e._path),s?o.getNode():De.EMPTY_NODE,s))}(t.serverSyncTree_,e);return null!=i?Promise.resolve(i):t.server_.get(e).then(r=>{const s=Wt(r).withIndex(e._queryParams.getIndex());let o;if(EN(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())o=Ig(t.serverSyncTree_,e._path,s);else{const a=Ag(t.serverSyncTree_,e);o=V8(t.serverSyncTree_,e._path,s,a)}return _r(t.eventQueue_,e._path,o),Vb(t.serverSyncTree_,e,n,null,!0),s},r=>(_h(t,"get for query "+Dn(e)+" failed: "+r),Promise.reject(new Error(r))))}(t._repo,t,n).then(i=>new Jc(i,new vs(t._repo,t._path),t._queryParams.getIndex()))}class Rg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const i=n._queryParams.getIndex();return new l6("value",this,new Jc(e.snapshotNode,new vs(n._repo,n._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new c6(this,e,n):null}matches(e){return e instanceof Rg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function Ywe(t){q(!Fb,"__referenceConstructor has already been defined"),Fb=t})(vs),function e1e(t){q(!Bb,"__referenceConstructor has already been defined"),Bb=t}(vs);const WN={};function oCe(t,e,n,i,r){let s=i||t.options.databaseURL;void 0===s&&(t.options.projectId||so("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=jN(s,r),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=jN(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new gg(gg.OWNER):new u0e(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!zb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),q8(t)}(n))throw new Error(Qd(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),He(o.path)||so("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function lCe(t,e,n,i){let r=WN[e.name];r||(r={},WN[e.name]=r);let s=r[t.toURLString()];return s&&so("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new I1e(t,false,n,i),r[t.toURLString()]=s,s}(a,t,u,new c0e(t.name,n));return new uCe(d,t)}class uCe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function A1e(t,e,n){if(t.stats_=Wx(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ib(t.repoInfo_,(i,r,s,o)=>{e6(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>t6(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Wc(t.repoInfo_,e,(i,r,s,o)=>{e6(t,i,r,s,o)},i=>{t6(t,i)},i=>{!function M1e(t,e){Ln(e,(n,i)=>{LN(t,n,i)})}(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=function f0e(t,e){const n=t.toString();return Gx[n]||(Gx[n]=e()),Gx[n]}(t.repoInfo_,()=>new fwe(t.stats_,t.server_)),t.infoData_=new lwe,t.infoSyncTree_=new B8({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Ig(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),LN(t,"connected",!1),t.serverSyncTree_=new B8({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);_r(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vs(this._repo,ot())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function aCe(t,e){const n=WN[e];(!n||n[t.key]!==t)&&so(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function i6(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&so("Cannot call "+e+" on a deleted database.")}}function dCe(t=eS(),e){const n=Zd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=(t=>{const e=cj("database");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})();i&&function hCe(t,e,n,i={}){(t=qn(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&so("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&so('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new gg(gg.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:function Qde(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iv(JSON.stringify({alg:"none",type:"JWT"})),Iv(JSON.stringify(o)),""].join(".")}(i.mockUserToken,t.app.options.projectId);s=new gg(o)}!function sCe(t,e,n,i){t.repoInfo_=new jx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}(r,e,n,s)}(n,...i)}return n}Wc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Wc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function fCe(t){(function Qbe(t){Bx=t})(Oc),Si(new li("database",(e,{instanceIdentifier:n})=>oCe(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Xt(yz,"0.14.4",t),Xt(yz,"0.14.4","esm2017")}();class vh{constructor(e){return e}}const g6="database",qN=new ie("angularfire2.database-instances");function yCe(t){return(e,n)=>{const i=e.runOutsideAngular(()=>t(n));return new vh(i)}}const vCe={provide:class mCe{constructor(){return aA(g6)}},deps:[[new yi,qN]]},bCe={provide:vh,useFactory:function _Ce(t,e){const n=oA(g6,t,e);return n&&new vh(n)},deps:[[new yi,qN],nh]};let wCe=(()=>{class t{constructor(){Xt("angularfire",qv.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[bCe,vCe]}),t})();function CCe(t,...e){return{ngModule:wCe,providers:[{provide:qN,useFactory:yCe(t),multi:!0,deps:[Fe,Rt,lA,cA,[new yi,_z],[new yi,NA],...e]}]}}const KN=ms(Zc,!0),YN=ms(q1e,!0),ECe=ms(dCe,!0),gl=ms(u6,!0),DCe=ms(W1e,!0),Zb=ms(GN,!0),TCe=["addListener","removeListener"],SCe=["addEventListener","removeEventListener"],ICe=["on","off"];function Qn(t,e,n,i){if(be(n)&&(i=n,n=void 0),i)return Qn(t,e,n).pipe(VE(i));const[r,s]=function xCe(t){return be(t.addEventListener)&&be(t.removeEventListener)}(t)?SCe.map(o=>a=>t[o](e,a,n)):function ACe(t){return be(t.addListener)&&be(t.removeListener)}(t)?TCe.map(m6(t,e)):function MCe(t){return be(t.on)&&be(t.off)}(t)?ICe.map(m6(t,e)):[];if(!r&&kh(t))return Vt(o=>Qn(o,e,n))(rn(t));if(!r)throw new TypeError("Invalid event target");return new ut(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function m6(t,e){return n=>i=>t[n](e,i)}class NCe extends dn{constructor(e,n){super()}schedule(e,n=0){return this}}const Xb={setInterval(t,e,...n){const{delegate:i}=Xb;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Xb;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},_6={now:()=>(_6.delegate||Date).now(),delegate:void 0};class Lg{constructor(e,n=Lg.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}Lg.now=_6.now;const y6=new class kCe extends Lg{constructor(e,n=Lg.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}(class OCe extends NCe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Xb.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&Xb.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fa(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}),PCe=y6;function v6(t=0,e,n=PCe){let i=-1;return null!=e&&(fm(e)?n=e:i=e),new ut(r=>{let s=function RCe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:FCe}=Array;function b6(t){return 1===t.length&&FCe(t[0])?t[0]:t}function w6(...t){return 1===(t=b6(t)).length?rn(t[0]):new ut(function LCe(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(rn(t[i]).subscribe(Qe(e,r=>{if(n){for(let s=0;s<n.length;s++)s!==i&&n[s].unsubscribe();n=null}e.next(r)})))}}(t))}function QN(...t){const e=vu(t),n=b6(t);return n.length?new ut(i=>{let r=n.map(()=>[]),s=n.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<n.length;o++)rn(n[o]).subscribe(Qe(i,a=>{if(r[o].push(a),r.every(l=>l.length)){const l=r.map(c=>c.shift());i.next(e?e(...l):l),r.some((c,u)=>!c.length&&s[u])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):di}function JN(...t){const e=vu(t);return gt((n,i)=>{const r=t.length,s=new Array(r);let o=t.map(()=>!1),a=!1;for(let l=0;l<r;l++)rn(t[l]).subscribe(Qe(i,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Me))&&(o=null))},pa));n.subscribe(Qe(i,l=>{if(a){const c=[l,...s];i.next(e?e(...c):c)}}))})}function C6(t,e){return e?n=>ep(e.pipe($n(1),function VCe(){return gt((t,e)=>{t.subscribe(Qe(e,pa))})}()),n.pipe(C6(t))):Vt((n,i)=>rn(t(n,i)).pipe($n(1),gV(n)))}var UCe={left:"right",right:"left",bottom:"top",top:"bottom"};function e0(t){return t.replace(/left|right|bottom|top/g,function(e){return UCe[e]})}function uo(t){return t.split("-")[0]}var jCe={start:"end",end:"start"};function E6(t){return t.replace(/start|end/g,function(e){return jCe[e]})}var vr="top",bs="bottom",ws="right",br="left",ZN="auto",Bg=[vr,bs,ws,br],bh="start",Vg="end",D6="viewport",Hg="popper",T6=Bg.reduce(function(t,e){return t.concat([e+"-"+bh,e+"-"+Vg])},[]),S6=[].concat(Bg,[ZN]).reduce(function(t,e){return t.concat([e,e+"-"+bh,e+"-"+Vg])},[]),tEe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function wr(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Xc(t){return t instanceof wr(t).Element||t instanceof Element}function Wr(t){return t instanceof wr(t).HTMLElement||t instanceof HTMLElement}function XN(t){return!(typeof ShadowRoot>"u")&&(t instanceof wr(t).ShadowRoot||t instanceof ShadowRoot)}function ml(t){return((Xc(t)?t.ownerDocument:t.document)||window.document).documentElement}var eu=Math.max,t0=Math.min,wh=Math.round;function eO(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function I6(){return!/^((?!chrome|android).)*safari/i.test(eO())}function Ch(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Wr(t)&&(r=t.offsetWidth>0&&wh(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&wh(i.height)/t.offsetHeight||1);var a=(Xc(t)?wr(t):window).visualViewport,l=!I6()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,d=i.width/r,h=i.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function tO(t){var e=wr(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function nO(t){return Ch(ml(t)).left+tO(t).scrollLeft}function ca(t){return wr(t).getComputedStyle(t)}function ho(t){return t?(t.nodeName||"").toLowerCase():null}function n0(t){return"html"===ho(t)?t:t.assignedSlot||t.parentNode||(XN(t)?t.host:null)||ml(t)}function iO(t){var e=ca(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function A6(t){return["html","body","#document"].indexOf(ho(t))>=0?t.ownerDocument.body:Wr(t)&&iO(t)?t:A6(n0(t))}function $g(t,e){var n;void 0===e&&(e=[]);var i=A6(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=wr(i),o=r?[s].concat(s.visualViewport||[],iO(i)?i:[]):i,a=e.concat(o);return r?a:a.concat($g(n0(o)))}function rEe(t){return["table","td","th"].indexOf(ho(t))>=0}function M6(t){return Wr(t)&&"fixed"!==ca(t).position?t.offsetParent:null}function Ug(t){for(var e=wr(t),n=M6(t);n&&rEe(n)&&"static"===ca(n).position;)n=M6(n);return n&&("html"===ho(n)||"body"===ho(n)&&"static"===ca(n).position)?e:n||function sEe(t){var e=/firefox/i.test(eO());if(/Trident/i.test(eO())&&Wr(t)&&"fixed"===ca(t).position)return null;var r=n0(t);for(XN(r)&&(r=r.host);Wr(r)&&["html","body"].indexOf(ho(r))<0;){var s=ca(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(t)||e}function x6(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&XN(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function rO(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function N6(t,e,n){return e===D6?rO(function nEe(t,e){var n=wr(t),i=ml(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=I6();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+nO(t),y:l}}(t,n)):Xc(e)?function oEe(t,e){var n=Ch(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):rO(function iEe(t){var e,n=ml(t),i=tO(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=eu(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=eu(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+nO(t),l=-i.scrollTop;return"rtl"===ca(r||n).direction&&(a+=eu(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(ml(t)))}function Eh(t){return t.split("-")[1]}function sO(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function O6(t){var l,e=t.reference,n=t.element,i=t.placement,r=i?uo(i):null,s=i?Eh(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2;switch(r){case vr:l={x:o,y:e.y-n.height};break;case bs:l={x:o,y:e.y+e.height};break;case ws:l={x:e.x+e.width,y:a};break;case br:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?sO(r):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case bh:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Vg:l[c]=l[c]+(e[u]/2-n[u]/2)}}return l}function P6(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function R6(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}function oO(t,e){void 0===e&&(e={});var i=e.placement,r=void 0===i?t.placement:i,s=e.strategy,o=void 0===s?t.strategy:s,a=e.boundary,l=void 0===a?"clippingParents":a,c=e.rootBoundary,u=void 0===c?D6:c,d=e.elementContext,h=void 0===d?Hg:d,g=e.altBoundary,m=void 0!==g&&g,y=e.padding,b=void 0===y?0:y,C=P6("number"!=typeof b?b:R6(b,Bg)),R=t.rects.popper,B=t.elements[m?h===Hg?"reference":Hg:h],j=function lEe(t,e,n,i){var r="clippingParents"===e?function aEe(t){var e=$g(n0(t)),i=["absolute","fixed"].indexOf(ca(t).position)>=0&&Wr(t)?Ug(t):t;return Xc(i)?e.filter(function(r){return Xc(r)&&x6(r,i)&&"body"!==ho(r)}):[]}(t):[].concat(e),s=[].concat(r,[n]),a=s.reduce(function(l,c){var u=N6(t,c,i);return l.top=eu(u.top,l.top),l.right=t0(u.right,l.right),l.bottom=t0(u.bottom,l.bottom),l.left=eu(u.left,l.left),l},N6(t,s[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(Xc(B)?B:B.contextElement||ml(t.elements.popper),l,u,o),se=Ch(t.elements.reference),ce=O6({reference:se,element:R,strategy:"absolute",placement:r}),Y=rO(Object.assign({},R,ce)),Ae=h===Hg?Y:se,We={top:j.top-Ae.top+C.top,bottom:Ae.bottom-j.bottom+C.bottom,left:j.left-Ae.left+C.left,right:Ae.right-j.right+C.right},qt=t.modifiersData.offset;if(h===Hg&&qt){var Zn=qt[r];Object.keys(We).forEach(function(Kt){var po=[ws,bs].indexOf(Kt)>=0?1:-1,go=[vr,bs].indexOf(Kt)>=0?"y":"x";We[Kt]+=Zn[go]*po})}return We}const hEe={name:"flip",enabled:!0,phase:"main",fn:function dEe(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,g=n.flipVariations,m=void 0===g||g,y=n.allowedAutoPlacements,b=e.options.placement,C=uo(b),R=l||(C!==b&&m?function uEe(t){if(uo(t)===ZN)return[];var e=e0(t);return[E6(t),e,E6(e)]}(b):[e0(b)]),B=[b].concat(R).reduce(function(pt,Ds){return pt.concat(uo(Ds)===ZN?function cEe(t,e){void 0===e&&(e={});var r=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,c=void 0===l?S6:l,u=Eh(e.placement),d=u?a?T6:T6.filter(function(m){return Eh(m)===u}):Bg,h=d.filter(function(m){return c.indexOf(m)>=0});0===h.length&&(h=d);var g=h.reduce(function(m,y){return m[y]=oO(t,{placement:y,boundary:r,rootBoundary:s,padding:o})[uo(y)],m},{});return Object.keys(g).sort(function(m,y){return g[m]-g[y]})}(e,{placement:Ds,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:y}):Ds)},[]),j=e.rects.reference,se=e.rects.popper,ce=new Map,Y=!0,Ae=B[0],We=0;We<B.length;We++){var qt=B[We],Zn=uo(qt),Kt=Eh(qt)===bh,po=[vr,bs].indexOf(Zn)>=0,go=po?"width":"height",Z=oO(e,{placement:qt,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),oe=po?Kt?ws:br:Kt?bs:vr;j[go]>se[go]&&(oe=e0(oe));var he=e0(oe),Ne=[];if(s&&Ne.push(Z[Zn]<=0),a&&Ne.push(Z[oe]<=0,Z[he]<=0),Ne.every(function(pt){return pt})){Ae=qt,Y=!1;break}ce.set(qt,Ne)}if(Y)for(var nr=function(Ds){var du=B.find(function(un){var Mi=ce.get(un);if(Mi)return Mi.slice(0,Ds).every(function(ui){return ui})});if(du)return Ae=du,"break"},Sn=m?3:1;Sn>0&&"break"!==nr(Sn);Sn--);e.placement!==Ae&&(e.modifiersData[i]._skip=!0,e.placement=Ae,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function jg(t,e,n){return eu(t,t0(e,n))}function aO(t){var e=Ch(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}const mEe={name:"preventOverflow",enabled:!0,phase:"main",fn:function gEe(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,h=n.tether,g=void 0===h||h,m=n.tetherOffset,y=void 0===m?0:m,b=oO(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),C=uo(e.placement),E=Eh(e.placement),R=!E,B=sO(C),j=function fEe(t){return"x"===t?"y":"x"}(B),se=e.modifiersData.popperOffsets,ce=e.rects.reference,Y=e.rects.popper,Ae="function"==typeof y?y(Object.assign({},e.rects,{placement:e.placement})):y,We="number"==typeof Ae?{mainAxis:Ae,altAxis:Ae}:Object.assign({mainAxis:0,altAxis:0},Ae),qt=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Zn={x:0,y:0};if(se){if(s){var Kt,po="y"===B?vr:br,go="y"===B?bs:ws,Z="y"===B?"height":"width",oe=se[B],he=oe+b[po],Ne=oe-b[go],Yt=g?-Y[Z]/2:0,nr=E===bh?ce[Z]:Y[Z],Sn=E===bh?-Y[Z]:-ce[Z],Dr=e.elements.arrow,pt=g&&Dr?aO(Dr):{width:0,height:0},Ds=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},du=Ds[po],un=Ds[go],Mi=jg(0,ce[Z],pt[Z]),ui=R?ce[Z]/2-Yt-Mi-du-We.mainAxis:nr-Mi-du-We.mainAxis,Mh=R?-ce[Z]/2+Yt+Mi+un+We.mainAxis:Sn+Mi+un+We.mainAxis,hu=e.elements.arrow&&Ug(e.elements.arrow),sxe=hu?"y"===B?hu.clientTop||0:hu.clientLeft||0:0,$W=null!=(Kt=qt?.[B])?Kt:0,axe=oe+Mh-$W,UW=jg(g?t0(he,oe+ui-$W-sxe):he,oe,g?eu(Ne,axe):Ne);se[B]=UW,Zn[B]=UW-oe}if(a){var jW,fu=se[j],k0="y"===j?"height":"width",zW=fu+b["x"===B?vr:br],GW=fu-b["x"===B?bs:ws],JO=-1!==[vr,br].indexOf(C),WW=null!=(jW=qt?.[j])?jW:0,qW=JO?zW:fu-ce[k0]-Y[k0]-WW+We.altAxis,KW=JO?fu+ce[k0]+Y[k0]-WW-We.altAxis:GW,YW=g&&JO?function pEe(t,e,n){var i=jg(t,e,n);return i>n?n:i}(qW,fu,KW):jg(g?qW:zW,fu,g?KW:GW);se[j]=YW,Zn[j]=YW-fu}e.modifiersData[i]=Zn}},requiresIfExists:["offset"]},bEe={name:"arrow",enabled:!0,phase:"main",fn:function yEe(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=uo(n.placement),l=sO(a),u=[br,ws].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,n){return P6("number"!=typeof(e="function"==typeof e?e(Object.assign({},n.rects,{placement:n.placement})):e)?e:R6(e,Bg))}(r.padding,n),h=aO(s),g="y"===l?vr:br,m="y"===l?bs:ws,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],b=o[l]-n.rects.reference[l],C=Ug(s),E=C?"y"===l?C.clientHeight||0:C.clientWidth||0:0,se=E/2-h[u]/2+(y/2-b/2),ce=jg(d[g],se,E-h[u]-d[m]);n.modifiersData[i]=((e={})[l]=ce,e.centerOffset=ce-se,e)}},effect:function vEe(t){var e=t.state,i=t.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=e.elements.popper.querySelector(r))||x6(e.elements.popper,r)&&(e.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function DEe(t,e,n){void 0===n&&(n=!1);var i=Wr(e),r=Wr(e)&&function EEe(t){var e=t.getBoundingClientRect(),n=wh(e.width)/t.offsetWidth||1,i=wh(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),s=ml(e),o=Ch(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==ho(e)||iO(s))&&(a=function CEe(t){return t!==wr(t)&&Wr(t)?function wEe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}(t):tO(t)}(e)),Wr(e)?((l=Ch(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=nO(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function TEe(t){var e=new Map,n=new Set,i=[];function r(s){n.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){e.set(s.name,s)}),t.forEach(function(s){n.has(s.name)||r(s)}),i}function IEe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}var F6={placement:"bottom",modifiers:[],strategy:"absolute"};function L6(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function MEe(t){void 0===t&&(t={});var n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,s=void 0===r?F6:r;return function(a,l,c){void 0===c&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},F6,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,g={state:u,setOptions:function(C){var E="function"==typeof C?C(u.options):C;y(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:Xc(a)?$g(a):a.contextElement?$g(a.contextElement):[],popper:$g(l)};var R=function SEe(t){var e=TEe(t);return tEe.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}(function AEe(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}([].concat(i,u.options.modifiers)));return u.orderedModifiers=R.filter(function(B){return B.enabled}),function m(){u.orderedModifiers.forEach(function(b){var E=b.options,B=b.effect;if("function"==typeof B){var j=B({state:u,name:b.name,instance:g,options:void 0===E?{}:E});d.push(j||function(){})}})}(),g.update()},forceUpdate:function(){if(!h){var C=u.elements,E=C.reference,R=C.popper;if(L6(E,R)){u.rects={reference:DEe(E,Ug(R),"fixed"===u.options.strategy),popper:aO(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(We){return u.modifiersData[We.name]=Object.assign({},We.data)});for(var B=0;B<u.orderedModifiers.length;B++)if(!0!==u.reset){var j=u.orderedModifiers[B],se=j.fn,ce=j.options;"function"==typeof se&&(u=se({state:u,options:void 0===ce?{}:ce,name:j.name,instance:g})||u)}else u.reset=!1,B=-1}}},update:IEe(function(){return new Promise(function(b){g.forceUpdate(),b(u)})}),destroy:function(){y(),h=!0}};if(!L6(a,l))return g;function y(){d.forEach(function(b){return b()}),d=[]}return g.setOptions(c).then(function(b){!h&&c.onFirstUpdate&&c.onFirstUpdate(b)}),g}}var r0={passive:!0};const NEe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function xEe(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=wr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,r0)}),a&&l.addEventListener("resize",n.update,r0),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,r0)}),a&&l.removeEventListener("resize",n.update,r0)}},data:{}},kEe={name:"popperOffsets",enabled:!0,phase:"read",fn:function OEe(t){var e=t.state;e.modifiersData[t.name]=O6({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var PEe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function B6(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,g=void 0===h?0:h,m=o.y,y=void 0===m?0:m,b="function"==typeof u?u({x:g,y}):{x:g,y};g=b.x,y=b.y;var C=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),R=br,B=vr,j=window;if(c){var se=Ug(n),ce="clientHeight",Y="clientWidth";se===wr(n)&&"static"!==ca(se=ml(n)).position&&"absolute"===a&&(ce="scrollHeight",Y="scrollWidth"),(r===vr||(r===br||r===ws)&&s===Vg)&&(B=bs,y-=(d&&se===j&&j.visualViewport?j.visualViewport.height:se[ce])-i.height,y*=l?1:-1),r!==br&&(r!==vr&&r!==bs||s!==Vg)||(R=ws,g-=(d&&se===j&&j.visualViewport?j.visualViewport.width:se[Y])-i.width,g*=l?1:-1)}var Kt,qt=Object.assign({position:a},c&&PEe),Zn=!0===u?function REe(t,e){var i=t.y,r=e.devicePixelRatio||1;return{x:wh(t.x*r)/r||0,y:wh(i*r)/r||0}}({x:g,y},wr(n)):{x:g,y};return g=Zn.x,y=Zn.y,Object.assign({},qt,l?((Kt={})[B]=E?"0":"",Kt[R]=C?"0":"",Kt.transform=(j.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",Kt):((e={})[B]=E?y+"px":"",e[R]=C?g+"px":"",e.transform="",e))}const LEe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function FEe(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:uo(e.placement),variation:Eh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,B6(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,B6(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var HEe=[NEe,kEe,LEe,{name:"applyStyles",enabled:!0,phase:"write",fn:function BEe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Wr(s)||!ho(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function VEe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]).reduce(function(l,c){return l[c]="",l},{});!Wr(r)||!ho(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}},requires:["computeStyles"]}],$Ee=MEe({defaultModifiers:HEe});const zEe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function jEe(t){var e=t.state,i=t.name,r=t.options.offset,s=void 0===r?[0,0]:r,o=S6.reduce(function(u,d){return u[d]=function UEe(t,e,n){var i=uo(t),r=[br,vr].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[br,ws].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(d,e.rects,s),u},{}),a=o[e.placement],c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}},ZEe=["*"],ADe=["dialog"];function tu(t){return"string"==typeof t}function nu(t){return null!=t}function Dh(t){return(t||document.body).getBoundingClientRect()}function j6(t=document){const e=t?.activeElement;return e?e.shadowRoot?j6(e.shadowRoot):e:null}const z6={animation:!0,transitionTimerDelayMs:5},bTe=()=>{},{transitionTimerDelayMs:wTe}=z6,zg=new Map,tr=(t,e,n,i)=>{let r=i.context||{};const s=zg.get(e);if(s)switch(i.runningTransition){case"continue":return di;case"stop":t.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),zg.delete(e)}const o=n(e,i.animation,r)||bTe;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>o()),fe(void 0).pipe(function yTe(t){return e=>new ut(n=>e.subscribe({next:o=>t.run(()=>n.next(o)),error:o=>t.run(()=>n.error(o)),complete:()=>t.run(()=>n.complete())}))}(t));const a=new ge,l=new ge,c=a.pipe(function BCe(...t){return e=>ep(e,fe(...t))}(!0));zg.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});const u=function vTe(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const d=Qn(e,"transitionend").pipe(cn(c),xn(({target:g})=>g===e));w6(v6(u+wTe).pipe(cn(c)),d,l).pipe(cn(c)).subscribe(()=>{zg.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let s0=(()=>{var t;class e{constructor(){this.animation=z6.animation}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),X6=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),eG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),iG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),rG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();var Dt=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Dt||{});const d0=(t,e)=>!!e&&e.some(n=>n.contains(t)),cG=(t,e)=>!e||null!=function _Te(t,e){return!e||typeof t.closest>"u"?null:t.closest(e)}(t,e),QTe=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function uG(t,e,n,i,r,s,o,a){n&&t.runOutsideAngular((t=>QTe?()=>setTimeout(()=>t(),100):t)(()=>{const c=Qn(e,"keydown").pipe(cn(r),xn(h=>h.which===Dt.Escape),Un(h=>h.preventDefault())),u=Qn(e,"mousedown").pipe($e(h=>{const g=h.target;return 2!==h.button&&!d0(g,o)&&("inside"===n?d0(g,s)&&cG(g,a):"outside"===n?!d0(g,s):cG(g,a)||!d0(g,s))}),cn(r)),d=Qn(e,"mouseup").pipe(JN(u),xn(([h,g])=>g),function HCe(t,e=y6){const n=v6(t,e);return C6(()=>n)}(0),cn(r));w6([c.pipe($e(h=>0)),d.pipe($e(h=>1))]).subscribe(h=>t.run(()=>i(h)))}))}const dG=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hG(t){const e=Array.from(t.querySelectorAll(dG)).filter(n=>-1!==n.tabIndex);return[e[0],e[e.length-1]]}let ZTe=(()=>{var t;class e{constructor(i){this._element=i.documentElement}isRTL(){return"rtl"===(this._element.getAttribute("dir")||"").toLowerCase()}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const XTe=/\s+/,eSe=/  +/gi,tSe={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]},iSe=/^left/,rSe=/^right/,sSe=/^start/,oSe=/^end/;function pG({placement:t,baseClass:e},n){let i=Array.isArray(t)?t:t.split(XTe),s=i.findIndex(c=>"auto"===c);s>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(c){null==i.find(u=>-1!==u.search("^"+c))&&i.splice(s++,1,c)});const o=i.map(c=>function nSe(t,e){const[n,i]=tSe[t];return e&&i||n}(c,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:c}){const u=new RegExp(e+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement;let g=d.className;g=g.replace(u,""),g+=` ${function aSe(t,e){let[n,i]=e.split("-");const r=n.replace(iSe,"start").replace(rSe,"end");let s=[r];if(i){let o=i;("left"===n||"right"===n)&&(o=o.replace(sSe,"top").replace(oSe,"bottom")),s.push(`${r}-${o}`)}return t&&(s=s.map(o=>`${t}-${o}`)),s.join(" ")}(e,h)}`,g=g.trim().replace(eSe," "),d.className=g}},hEe,mEe,bEe,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function gG(t){return t}new Date(1882,10,12),new Date(2174,10,25);let TG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),ySe=(()=>{var t;class e{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),wO=(()=>{var t;class e{set disabled(i){this._disabled=""===i||!0===i,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}constructor(i,r){this.elementRef=i,this._renderer=r,this._disabled=!1}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Ye),w(ji))},t.\u0275dir=K({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(i,r){2&i&&(Or("tabIndex",r.disabled?-1:0),Ue("disabled",r.disabled))},inputs:{disabled:"disabled"},standalone:!0}),e})(),CO=(()=>{var t;class e{constructor(i,r){this.dropdown=i,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return(t=e).\u0275fac=function(i){return new(i||t)(w(we(()=>Kg)),w(Ye))},t.\u0275dir=K({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(i,r,s){if(1&i&&zt(s,wO,4),2&i){let o;nt(o=it())&&(r.menuItems=o)}},hostVars:4,hostBindings:function(i,r){1&i&&X("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Enter",function(o){return r.dropdown.onKeyDown(o)})("keydown.Space",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&i&&Ue("dropdown-menu",!0)("show",r.dropdown.isOpen())},standalone:!0}),e})(),g0=(()=>{var t;class e{constructor(i,r){this.dropdown=i,this.nativeElement=r.nativeElement}}return(t=e).\u0275fac=function(i){return new(i||t)(w(we(()=>Kg)),w(Ye))},t.\u0275dir=K({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(i,r){2&i&&et("aria-expanded",r.dropdown.isOpen())},standalone:!0}),e})(),SG=(()=>{var t;class e extends g0{constructor(i,r){super(i,r)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(we(()=>Kg)),w(Ye))},t.\u0275dir=K({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(i,r){1&i&&X("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(o){return r.dropdown.onKeyDown(o)})("keydown.ArrowDown",function(o){return r.dropdown.onKeyDown(o)})("keydown.Home",function(o){return r.dropdown.onKeyDown(o)})("keydown.End",function(o){return r.dropdown.onKeyDown(o)})("keydown.Tab",function(o){return r.dropdown.onKeyDown(o)})("keydown.Shift.Tab",function(o){return r.dropdown.onKeyDown(o)}),2&i&&et("aria-expanded",r.dropdown.isOpen())},standalone:!0,features:[_t([{provide:g0,useExisting:we(()=>t)}]),ht]}),e})(),Kg=(()=>{var t;class e{constructor(i,r,s,o,a,l){this._changeDetector=i,this._document=s,this._ngZone=o,this._elementRef=a,this._renderer=l,this._destroyCloseHandlers$=new ge,this._bodyContainer=null,this._open=!1,this.openChange=new le,this.placement=r.placement,this.popperOptions=r.popperOptions,this.container=r.container,this.autoClose=r.autoClose,this._positioning=function mG(){const t=J(ZTe);let e=null;return{createPopper(n){if(!e){let r=(n.updatePopperOptions||gG)(pG(n,t));e=$Ee(n.hostElement,n.targetElement,r)}},update(){e&&e.update()},setOptions(n){if(e){let r=(n.updatePopperOptions||gG)(pG(n,t));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}()}ngOnInit(){this.display||(this.display=this._elementRef.nativeElement.closest(".navbar")?"static":"dynamic")}ngAfterContentInit(){this._ngZone.onStable.pipe($n(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(i){if(i.container&&this._open&&this._applyContainer(this.container),i.placement&&!i.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),i.dropdownClass){const{currentValue:r,previousValue:s}=i.dropdownClass;this._applyCustomDropdownClass(r,s)}i.autoClose&&this._open&&(this.autoClose=i.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:i=>this.popperOptions(function yG(t){return e=>(e.modifiers.push(zEe,{name:"offset",options:{offset:()=>t}}),e)}([0,2])(i))}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),uG(this._ngZone,this._document,this.autoClose,i=>{this.close(),0===i&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(i){const r=i.which,s=this._getMenuElements();let o=-1,a=null;const l=this._isEventFromToggle(i);if(!l&&s.length&&s.forEach((c,u)=>{c.contains(i.target)&&(a=c),c===j6(this._document)&&(o=u)}),r!==Dt.Space&&r!==Dt.Enter){if(r!==Dt.Tab){if(l||a){if(this.open(),s.length){switch(r){case Dt.ArrowDown:o=Math.min(o+1,s.length-1);break;case Dt.ArrowUp:if(this._isDropup()&&-1===o){o=s.length-1;break}o=Math.max(o-1,0);break;case Dt.Home:o=0;break;case Dt.End:o=s.length-1}s[o].focus()}i.preventDefault()}}else if(i.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===i.target)return void("body"!==this.container||i.shiftKey?i.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const c=this._menu.nativeElement.querySelectorAll(dG);i.shiftKey&&i.target===c[0]?(this._anchor.nativeElement.focus(),i.preventDefault()):!i.shiftKey&&i.target===c[c.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Qn(i.target,"focusout").pipe($n(1)).subscribe(({relatedTarget:c})=>{this._elementRef.nativeElement.contains(c)||this.close()})}}else a&&(!0===this.autoClose||"inside"===this.autoClose)&&Qn(a,"click").pipe($n(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(i){return this._anchor.nativeElement.contains(i.target)}_getMenuElements(){const i=this._menu;return null==i?[]:i.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const i=this._menu;this.isOpen()&&i&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(i){return Array.isArray(i)?i[0]:i.split(" ")[0]}_resetContainer(){const i=this._renderer;this._menu&&i.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(i.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(i=null){if(this._resetContainer(),"body"===i){const r=this._renderer,s=this._menu.nativeElement,o=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(o,"position","absolute"),r.setStyle(s,"position","static"),r.setStyle(o,"z-index","1055"),r.appendChild(o,s),r.appendChild(this._document.body,o)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(i,r){const s="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;s&&(r&&this._renderer.removeClass(s,r),i&&this._renderer.addClass(s,i))}_applyPlacementClasses(i){const r=this._menu;if(r){i||(i=this._getFirstPlacement(this.placement));const s=this._renderer,o=this._elementRef.nativeElement;s.removeClass(o,"dropup"),s.removeClass(o,"dropdown");const{nativeElement:a}=r;"static"===this.display?(r.placement=null,s.setAttribute(a,"data-bs-popper","static")):(r.placement=i,s.removeAttribute(a,"data-bs-popper"));const l=-1!==i.search("^top")?"dropup":"dropdown";s.addClass(o,l);const c=this._bodyContainer;c&&(s.removeClass(c,"dropup"),s.removeClass(c,"dropdown"),s.addClass(c,l))}}}return(t=e).\u0275fac=function(i){return new(i||t)(w(ss),w(ySe),w(kt),w(Fe),w(Ye),w(ji))},t.\u0275dir=K({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(i,r,s){if(1&i&&(zt(s,CO,5),zt(s,g0,5)),2&i){let o;nt(o=it())&&(r._menu=o.first),nt(o=it())&&(r._anchor=o.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Ue("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",popperOptions:"popperOptions",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],standalone:!0,features:[vn]}),e})(),IG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();class au{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}}let vSe=(()=>{var t;class e{constructor(i,r){this._el=i,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe($n(1)).subscribe(()=>{tr(this._zone,this._el.nativeElement,(i,r)=>{r&&Dh(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return tr(this._zone,this._el.nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Ye),w(Fe))},t.\u0275cmp=Ze({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&($t("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Ue("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Gi],decls:0,vars:0,template:function(i,r){},encapsulation:2}),e})();class AG{update(e){}close(e){}dismiss(e){}}const bSe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],wSe=["animation","backdropClass"];class CSe{_applyWindowOptions(e,n){bSe.forEach(i=>{nu(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){wSe.forEach(i=>{nu(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(cn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(cn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ge,this._dismissed=new ge,this._hidden=new ge,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const n=this._beforeDismiss();!function H6(t){return t&&t.then}(n)?!1!==n&&this._dismiss(e):n.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():fe(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),QN(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var EO=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(EO||{});let ESe=(()=>{var t;class e{constructor(i,r,s){this._document=i,this._elRef=r,this._zone=s,this._closed$=new ge,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new le,this.shown=new ge,this.hidden=new ge}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":tu(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe($n(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},a=QN(tr(this._zone,i,()=>i.classList.remove("show"),r),tr(this._zone,this._dialogEl.nativeElement,()=>{},r));return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){const i={animation:this.animation,runningTransition:"continue"};QN(tr(this._zone,this._elRef.nativeElement,(o,a)=>{a&&Dh(o),o.classList.add("show")},i),tr(this._zone,this._dialogEl.nativeElement,()=>{},i)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Qn(i,"keydown").pipe(cn(this._closed$),xn(s=>s.which===Dt.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(EO.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Qn(this._dialogEl.nativeElement,"mousedown").pipe(cn(this._closed$),Un(()=>r=!1),Pi(()=>Qn(i,"mouseup").pipe(cn(this._closed$),$n(1))),xn(({target:s})=>i===s)).subscribe(()=>{r=!0}),Qn(i,"click").pipe(cn(this._closed$)).subscribe(({target:s})=>{i===s&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(EO.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){const r=i.querySelector("[ngbAutofocus]"),s=hG(i)[0];(r||s||i).focus()}}_restoreFocus(){const i=this._document.body,r=this._elWithFocus;let s;s=r&&r.focus&&i.contains(r)?r:i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&tr(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return(t=e).\u0275fac=function(i){return new(i||t)(w(kt),w(Ye),w(Fe))},t.\u0275cmp=Ze({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&is(ADe,7),2&i){let s;nt(s=it())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(et("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),$t("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Ue("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Gi],ngContentSelectors:ZEe,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(hC(),x(0,"div",0,1)(2,"div",2),fC(3),M()()),2&i&&$t("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),e})(),DSe=(()=>{var t;class e{constructor(i){this._document=i}hide(){const i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,s=r.style,{overflow:o,paddingRight:a}=s;if(i>0){const l=parseFloat(window.getComputedStyle(r).paddingRight);s.paddingRight=`${l+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=a),s.overflow=o}}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),TSe=(()=>{var t;class e{constructor(i,r,s,o,a,l,c){this._applicationRef=i,this._injector=r,this._environmentInjector=s,this._document=o,this._scrollBar=a,this._rendererFactory=l,this._ngZone=c,this._activeWindowCmptHasChanged=new ge,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new le,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const u=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,i=!1)=>{t.runOutsideAngular(()=>{const r=Qn(e,"focusin").pipe(cn(n),$e(s=>s.target));Qn(e,"keydown").pipe(cn(n),xn(s=>s.which===Dt.Tab),JN(r)).subscribe(([s,o])=>{const[a,l]=hG(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&Qn(e,"click").pipe(cn(n),JN(r),$e(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,u.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(u.location.nativeElement)}})}_restoreScrollBar(){const i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,s){const o=s.container instanceof HTMLElement?s.container:nu(s.container)?this._document.querySelector(s.container):this._document.body,a=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const l=new AG,c=(i=s.injector||i).get(Ui,null)||this._environmentInjector,u=this._getContentRef(i,c,r,l,s);let d=!1!==s.backdrop?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,u.nodes),g=new CSe(h,u,d,s.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(h),g.hidden.pipe($n(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),l.close=m=>{g.close(m)},l.dismiss=m=>{g.dismiss(m)},l.update=m=>{g.update(m)},g.update(s),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=uy(vSe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let s=uy(ESe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,r,s,o,a){return s?s instanceof jt?this._createFromTemplateRef(s,o):tu(s)?this._createFromString(s):this._createFromComponent(i,r,s,o,a):new au([])}_createFromTemplateRef(i,r){const o=i.createEmbeddedView({$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}});return this._applicationRef.attachView(o),new au([o.rootNodes],o)}_createFromString(i){const r=this._document.createTextNode(`${i}`);return new au([[r]])}_createFromComponent(i,r,s,o,a){const c=uy(s,{environmentInjector:r,elementInjector:Rt.create({providers:[{provide:AG,useValue:o}],parent:i})}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new au([[u]],c.hostView,c)}_setAriaHidden(i){const r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(s=>{s!==i&&"SCRIPT"!==s.nodeName&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){const r=()=>{const s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{const r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return(t=e).\u0275fac=function(i){return new(i||t)($(Pr),$(Rt),$(Ui),$(kt),$(DSe),$(ed),$(Fe))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),SSe=(()=>{var t;class e{constructor(i){this._ngbConfig=i,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(i){this._animation=i}}return(t=e).\u0275fac=function(i){return new(i||t)($(s0))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),m0=(()=>{var t;class e{constructor(i,r,s){this._injector=i,this._modalStack=r,this._config=s}open(i,r={}){const s={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return(t=e).\u0275fac=function(i){return new(i||t)($(Rt),$(TSe),$(SSe))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})(),MG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:[m0]}),e})(),OG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),HG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),UG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),jG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),zG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),GG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),WG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),qG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),KG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();new ie("live announcer delay",{providedIn:"root",factory:function zSe(){return 100}});let YG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})(),QG=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({}),e})();const WSe=[X6,eG,iG,rG,TG,IG,MG,OG,QG,HG,UG,jG,zG,GG,WG,qG,KG,YG];let qSe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[WSe,X6,eG,iG,rG,TG,IG,MG,OG,QG,HG,UG,jG,zG,GG,WG,qG,KG,YG]}),e})(),JG=(()=>{var t;class e{get search$(){return this.search.asObservable()}setSearch(i){this.search.next(i)}constructor(){this.search=new Ot("")}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Qg(t){return(Qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function z(t,e,n){return(e=function YSe(t){var e=function KSe(t,e){if("object"!==Qg(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Qg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Qg(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ZG{}class QSe{}const ua="*";function JSe(t,e){return{type:7,name:t,definitions:e,options:{}}}function XG(t,e=null){return{type:4,styles:e,timings:t}}function eW(t,e=null){return{type:2,steps:t,options:e}}function Jg(t){return{type:6,styles:t,offset:null}}function TO(t,e,n){return{type:0,name:t,styles:e,options:n}}function tW(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}class Zg{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class nW{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((n,i)=>null===n||i.totalTime>n.totalTime?i:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}const iW=["toast-component",""];function ZSe(t,e){if(1&t){const n=wt();x(0,"button",5),X("click",function(){return Pe(n),Re(F().remove())}),x(1,"span",6),ee(2,"\xd7"),M()()}}function XSe(t,e){if(1&t&&(ur(0),ee(1),dr()),2&t){const n=F(2);I(1),Cn("[",n.duplicatesCount+1,"]")}}function eIe(t,e){if(1&t&&(x(0,"div"),ee(1),L(2,XSe,2,1,"ng-container",4),M()),2&t){const n=F();$t(n.options.titleClass),et("aria-label",n.title),I(1),Cn(" ",n.title," "),I(1),A("ngIf",n.duplicatesCount)}}function tIe(t,e){if(1&t&&ue(0,"div",7),2&t){const n=F();$t(n.options.messageClass),A("innerHTML",n.message,Ls)}}function nIe(t,e){if(1&t&&(x(0,"div",8),ee(1),M()),2&t){const n=F();$t(n.options.messageClass),et("aria-label",n.message),I(1),Cn(" ",n.message," ")}}function iIe(t,e){if(1&t&&(x(0,"div"),ue(1,"div",9),M()),2&t){const n=F();I(1),Yl("width",n.width+"%")}}class uIe{constructor(e,n){z(this,"_attachedHost",void 0),z(this,"component",void 0),z(this,"viewContainerRef",void 0),z(this,"injector",void 0),this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class dIe{constructor(){z(this,"_attachedPortal",void 0),z(this,"_disposeFn",void 0)}attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class hIe{constructor(e){z(this,"_overlayRef",void 0),z(this,"componentInstance",void 0),z(this,"duplicatesCount",0),z(this,"_afterClosed",new ge),z(this,"_activate",new ge),z(this,"_manualClose",new ge),z(this,"_resetTimeout",new ge),z(this,"_countDuplicate",new ge),this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}}class y0{constructor(e,n,i,r,s,o){z(this,"toastId",void 0),z(this,"config",void 0),z(this,"message",void 0),z(this,"title",void 0),z(this,"toastType",void 0),z(this,"toastRef",void 0),z(this,"_onTap",new ge),z(this,"_onAction",new ge),this.toastId=e,this.config=n,this.message=i,this.title=r,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const sW=new ie("ToastConfig");class fIe extends dIe{constructor(e,n,i){super(),z(this,"_hostDomElement",void 0),z(this,"_componentFactoryResolver",void 0),z(this,"_appRef",void 0),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=i}attachComponentPortal(e,n){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let pIe=(()=>{var t;class e{constructor(){z(this,"_document",J(kt)),z(this,"_containerElement",void 0)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const i=this._document.createElement("div");i.classList.add("overlay-container"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),this._containerElement=i}}return t=e,z(e,"\u0275fac",function(i){return new(i||t)}),z(e,"\u0275prov",G({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();class gIe{constructor(e){z(this,"_portalHost",void 0),this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}}let mIe=(()=>{var t;class e{constructor(){z(this,"_overlayContainer",J(pIe)),z(this,"_componentFactoryResolver",J(Df)),z(this,"_appRef",J(Pr)),z(this,"_document",J(kt)),z(this,"_paneElements",new Map)}create(i,r){return this._createOverlayRef(this.getPaneElement(i,r))}getPaneElement(i="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[i]||(this._paneElements.get(r)[i]=this._createPaneElement(i,r)),this._paneElements.get(r)[i]}_createPaneElement(i,r){const s=this._document.createElement("div");return s.id="toast-container",s.classList.add(i),s.classList.add("toast-container"),r?r.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(i){return new fIe(i,this._componentFactoryResolver,this._appRef)}_createOverlayRef(i){return new gIe(this._createPortalHost(i))}}return t=e,z(e,"\u0275fac",function(i){return new(i||t)}),z(e,"\u0275prov",G({token:t,factory:t.\u0275fac,providedIn:"root"})),e})(),Xg=(()=>{var t;class e{constructor(i,r,s,o,a){z(this,"overlay",void 0),z(this,"_injector",void 0),z(this,"sanitizer",void 0),z(this,"ngZone",void 0),z(this,"toastrConfig",void 0),z(this,"currentlyActive",0),z(this,"toasts",[]),z(this,"overlayContainer",void 0),z(this,"previousToastMessage",void 0),z(this,"index",0),this.overlay=r,this._injector=s,this.sanitizer=o,this.ngZone=a,this.toastrConfig={...i.default,...i.config},i.config.iconClasses&&(this.toastrConfig.iconClasses={...i.default.iconClasses,...i.config.iconClasses})}show(i,r,s={},o=""){return this._preBuildNotification(o,i,r,this.applyConfig(s))}success(i,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",i,r,this.applyConfig(s))}error(i,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",i,r,this.applyConfig(s))}info(i,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",i,r,this.applyConfig(s))}warning(i,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",i,r,this.applyConfig(s))}clear(i){for(const r of this.toasts)if(void 0!==i){if(r.toastId===i)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(i){const r=this._findToast(i);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(i="",r="",s,o){const{includeTitleDuplicates:a}=this.toastrConfig;for(const l of this.toasts)if((!a||a&&l.title===i)&&l.message===r)return l.toastRef.onDuplicate(s,o),l;return null}applyConfig(i={}){return{...this.toastrConfig,...i}}_findToast(i){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===i)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(i,r,s,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(i,r,s,o)):this._buildNotification(i,r,s,o)}_buildNotification(i,r,s,o){if(!o.toastComponent)throw new Error("toastComponent required");const a=this.findDuplicate(s,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||r)&&this.toastrConfig.preventDuplicates&&null!==a)return a;this.previousToastMessage=r;let l=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(l=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const c=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let u=r;r&&o.enableHtml&&(u=this.sanitizer.sanitize(lr.HTML,r));const d=new hIe(c),h=new y0(this.index,o,u,s,i,d),m=Rt.create({providers:[{provide:y0,useValue:h}],parent:this._injector}),y=new uIe(o.toastComponent,m),b=c.attach(y,o.newestOnTop);d.componentInstance=b.instance;const C={toastId:this.index,title:s||"",message:r||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:b};return l||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{C.toastRef.activate()})),this.toasts.push(C),C}}return t=e,z(e,"\u0275fac",function(i){return new(i||t)($(sW),$(mIe),$(Rt),$(BE),$(Fe))}),z(e,"\u0275prov",G({token:t,factory:t.\u0275fac,providedIn:"root"})),e})();const _Ie={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{var t;class e{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(i,r,s){z(this,"toastrService",void 0),z(this,"toastPackage",void 0),z(this,"ngZone",void 0),z(this,"message",void 0),z(this,"title",void 0),z(this,"options",void 0),z(this,"duplicatesCount",void 0),z(this,"originalTimeout",void 0),z(this,"width",-1),z(this,"toastClasses",""),z(this,"state",void 0),z(this,"timeout",void 0),z(this,"intervalId",void 0),z(this,"hideTime",void 0),z(this,"sub",void 0),z(this,"sub1",void 0),z(this,"sub2",void 0),z(this,"sub3",void 0),this.toastrService=i,this.toastPackage=r,this.ngZone=s,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const i=(new Date).getTime();this.width=(this.hideTime-i)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(i,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(i),r)):this.timeout=setTimeout(()=>i(),r)}outsideInterval(i,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(i),r)):this.intervalId=setInterval(()=>i(),r)}runInsideAngular(i){this.ngZone?this.ngZone.run(()=>i()):i()}}return t=e,z(e,"\u0275fac",function(i){return new(i||t)(w(Xg),w(y0),w(Fe))}),z(e,"\u0275cmp",Ze({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,r){1&i&&X("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&i&&(yC("@flyInOut",r.state),$t(r.toastClasses),Yl("display",r.displayStyle))},standalone:!0,features:[Gi],attrs:iW,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,r){1&i&&(L(0,ZSe,3,0,"button",0),L(1,eIe,3,5,"div",1),L(2,tIe,1,3,"div",2),L(3,nIe,2,4,"div",3),L(4,iIe,2,2,"div",4)),2&i&&(A("ngIf",r.options.closeButton),I(1),A("ngIf",r.title),I(1),A("ngIf",r.message&&r.options.enableHtml),I(1),A("ngIf",r.message&&!r.options.enableHtml),I(1),A("ngIf",r.options.progressBar))},dependencies:[pn],encapsulation:2,data:{animation:[JSe("flyInOut",[TO("inactive",Jg({opacity:0})),TO("active",Jg({opacity:1})),TO("removed",Jg({opacity:0})),tW("inactive => active",XG("{{ easeTime }}ms {{ easing }}")),tW("active => removed",XG("{{ easeTime }}ms {{ easing }}"))])]}})),e})()},yIe=(t={})=>function S1(t){return{\u0275providers:t}}([{provide:sW,useValue:{default:_Ie,config:t}}]);let vIe=(()=>{var t;class e{static forRoot(i={}){return{ngModule:e,providers:[yIe(i)]}}}return t=e,z(e,"\u0275fac",function(i){return new(i||t)}),z(e,"\u0275mod",ke({type:t})),z(e,"\u0275inj",Oe({})),e})(),IO=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ze({type:t,selectors:[["app-loader"]],decls:2,vars:0,consts:[[1,"loader"],["src","../../../../assets/loading.mp4","autoplay","autoplay","loop","true","muted","","defaultmuted","","playsinline",""]],template:function(i,r){1&i&&(x(0,"div",0),ue(1,"video",1),M())},styles:[".loader[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99;display:flex;align-items:center;justify-content:center;background-color:#00000091;background-color:#000}.loader[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:300px}"]}),e})();var bIe=xi(519),oW=xi.n(bIe);const wIe=["note"];function CIe(t,e){1&t&&ue(0,"i",17)}function EIe(t,e){if(1&t){const n=wt();ur(0),x(1,"div",4),L(2,CIe,1,0,"i",5),x(3,"span",6),ee(4),M(),x(5,"div",7),X("click",function(){const s=Pe(n).$implicit;return Re(F().noteDetail(s.Id))}),M(),x(6,"button",8),X("click",function(){const s=Pe(n).$implicit;return Re(F().DeleteNote(s.Id))}),ue(7,"i",9),M(),x(8,"button",10),X("click",function(){const s=Pe(n).$implicit;return Re(F().EditNote(s.Id))}),ue(9,"i",11),M(),x(10,"button",12),X("click",function(r){return Pe(n),Re(F().copyNote(r))}),ue(11,"i",13),M(),x(12,"button",14),X("click",function(){const s=Pe(n).$implicit;return Re(F().pinNote(s))}),ue(13,"i",15),M(),x(14,"span",16),ee(15),Ro(16,"date"),M()(),dr()}if(2&t){const n=e.$implicit;I(1),Lf("id",n.Id),I(1),A("ngIf",n.IsPined),I(2),Ut(n.Title),I(1),A("innerHtml",n.Html,Ls),I(7),A("ngClass",n.IsPined?"text-dark":"text-secondary"),I(3),Ut(Fo(16,6,n.Date))}}function DIe(t,e){1&t&&(ur(0),x(1,"p",18),ee(2,"Ready to start? Let's create your first note!"),M(),dr())}function TIe(t,e){1&t&&(ur(0),x(1,"p",18),ee(2,"No Note Found."),M(),dr())}function SIe(t,e){1&t&&(x(0,"span",34),ee(1,"Title is Required."),M())}function IIe(t,e){1&t&&ue(0,"ngx-editor",35),2&t&&A("editor",F(3).editor)("placeholder","Type here...")}function AIe(t,e){1&t&&(x(0,"span",34),ee(1,"Note detail is Required."),M())}function MIe(t,e){if(1&t&&(x(0,"form",26)(1,"div",27)(2,"label",28),ee(3,"Title"),M(),ue(4,"input",29),L(5,SIe,2,0,"span",30),M(),x(6,"div")(7,"label",28),ee(8,"Note"),M(),x(9,"div",31),ue(10,"ngx-editor-menu",32),L(11,IIe,1,2,"ngx-editor",33),M(),L(12,AIe,2,0,"span",30),M()()),2&t){const n=F(2);A("formGroup",n.form),I(5),A("ngIf",n.submitted&&n.f.title.errors&&n.f.title.errors.required),I(5),A("editor",n.editor)("toolbar",n.toolbar),I(1),A("ngIf",n.form),I(1),A("ngIf",n.submitted&&n.f.html.errors&&n.f.html.errors.required)}}function xIe(t,e){if(1&t){const n=wt();x(0,"div",19)(1,"h5",20),ee(2,"Update Note"),M(),x(3,"button",21),X("click",function(){return Re(Pe(n).$implicit.dismiss("Cross click"))}),M()(),x(4,"div",22),L(5,MIe,13,6,"form",23),M(),x(6,"div",24)(7,"button",25),X("click",function(){return Pe(n),Re(F().submit())}),ee(8,"Update Note"),M()()}if(2&t){const n=F();I(5),A("ngIf",n.form)}}let NIe=(()=>{var t;class e{constructor(i,r,s,o){this.db=i,this.modalService=r,this.toastr=s,this.router=o,this.Search="",this.NoteDeleted=new le,this.isLoading=!1,this.submitted=!1,this.selectedNoteId=null,this.selectedNote=null,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]]}ngOnChanges(){this.Notes.length>0&&(this.Notes=this.sortListWithPinnedItems(this.Notes),console.log(this.Notes[0]))}ngOnInit(){this.editor=new BT}initForm(i){this.form=new jo({html:new On(i.Html,[pr.required]),title:new On(i.Title,[pr.required]),IsPined:new On(null!=i.IsPined&&i.IsPined)})}get f(){return this.form.controls}open(i){this.modalService.open(i,{centered:!0,size:"xl",fullscreen:!1,scrollable:!0})}DeleteNote(i){oW().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{if(r.isConfirmed){this.isLoading=!0,this.NoteDeleted.emit(!1);let s=gl(this.db,"/notes/"+i);DCe(s).then(()=>{this.NoteDeleted.emit(!0),console.log("location removed"),this.isLoading=!1}),oW().fire({position:"center",icon:"success",title:"Note Deleted Successfully",showConfirmButton:!1,timer:1500})}})}EditNote(i){this.selectedNoteId=i,YN(KN(gl(this.db),`notes/${i}`)).then(r=>{r.exists()?(this.selectedNote=r.val(),this.initForm(this.selectedNote),this.open(this.note)):console.log("No data available")}).catch(r=>{console.error(r)})}copyNote(i){navigator.clipboard.writeText(i.currentTarget.previousElementSibling.previousElementSibling.previousElementSibling.innerText),this.toastr.success("Note Copied Successfully")}pinNote(i){this.submitted=!0,this.isLoading=!0,this.NoteDeleted.emit(!1),Zb(gl(this.db,"notes/"+i.Id),{Title:i.Title,Html:i.Html,Date:(new Date).toString(),IsPined:null!=i.IsPined&&!i.IsPined}),this.submitted=!1,this.NoteDeleted.emit(!0),this.sortNotes(),this.isLoading=!1,this.toastr.success("Note Updated Successfully","Updated"),this.modalService.dismissAll()}submit(){if(this.submitted=!0,this.form.valid){this.isLoading=!0,this.NoteDeleted.emit(!1);let i={Html:this.form.value.html,Id:this.selectedNoteId,Date:new Date,Title:this.form.value.title};Zb(gl(this.db,"notes/"+this.selectedNoteId),{Title:this.form.value.title,Html:this.form.value.html,Date:(new Date).toString(),IsPined:this.form.value.IsPined}),this.Notes=this.Notes.filter(r=>r.Id!=this.selectedNoteId),this.Notes.push(i),this.submitted=!1,this.form.reset(),this.NoteDeleted.emit(!0),this.sortNotes(),this.isLoading=!1,this.toastr.success("Note Updated Successfully","Updated"),this.modalService.dismissAll()}}sortNotes(){this.Notes.sort((i,r)=>i.Title>r.Title?1:r.Title>i.Title?-1:0)}noteDetail(i){this.router.navigate(["/note/detail"],{queryParams:{u:i}})}sortListWithPinnedItems(i){const r=i.filter(a=>a.IsPined),s=i.filter(a=>!a.IsPined);return s.sort((a,l)=>a.Title.localeCompare(l.Title)),[...r,...s]}}return(t=e).\u0275fac=function(i){return new(i||t)(w(vh),w(m0),w(Xg),w(Nn))},t.\u0275cmp=Ze({type:t,selectors:[["app-note"]],viewQuery:function(i,r){if(1&i&&is(wIe,5),2&i){let s;nt(s=it())&&(r.note=s.first)}},inputs:{Notes:"Notes",Search:"Search"},outputs:{NoteDeleted:"NoteDeleted"},features:[vn],decls:6,vars:3,consts:[[1,"noteContainer"],[4,"ngFor","ngForOf"],[4,"ngIf"],["note",""],[1,"noteWrapper",3,"id"],["class","pinicon fa-solid fa-thumbtack text-dark",4,"ngIf"],[1,"fw-bold","notetitle"],[1,"mt-3","note",2,"cursor","pointer",3,"innerHtml","click"],["id","delete",1,"btn","btn-sm","btn-light",3,"click"],[1,"fa-solid","fa-trash-can","text-danger"],["id","edit",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa-solid","fa-pen-to-square","text-success"],["id","copy",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa-regular","fa-clipboard","text-warning"],["id","pin",1,"btn","btn-light","btn-sm",3,"ngClass","click"],[1,"fa-solid","fa-thumbtack"],[1,"postdate","p-0","m-0"],[1,"pinicon","fa-solid","fa-thumbtack","text-dark"],[1,"empty"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"filter","invert(100%)",3,"click"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer","p-2"],["type","button",1,"btn","btn-sm","btn-light","fw-bold",3,"click"],[3,"formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","formControlName","title","name","title","id","title","placeholder","Note Title",1,"form-control"],["class","fw-bold fs-sm error",4,"ngIf"],[1,"NgxEditor__Wrapper","text-black"],[3,"editor","toolbar"],["formControlName","html",3,"editor","placeholder",4,"ngIf"],[1,"fw-bold","fs-sm","error"],["formControlName","html",3,"editor","placeholder"]],template:function(i,r){1&i&&(x(0,"div",0),L(1,EIe,17,8,"ng-container",1),L(2,DIe,3,0,"ng-container",2),L(3,TIe,3,0,"ng-container",2),M(),L(4,xIe,9,1,"ng-template",null,3,Wi)),2&i&&(I(1),A("ngForOf",r.Notes),I(1),A("ngIf",0==r.Notes.length&&""==r.Search&&0==r.isLoading),I(1),A("ngIf",0==r.Notes.length&&""!=r.Search&&0==r.isLoading))},dependencies:[wd,Lr,pn,kT,LT,dc,Uo,lc,cc,zo,Ba,EE],styles:[".noteContainer[_ngcontent-%COMP%]{display:flex;justify-content:start;flex-wrap:wrap}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.3);margin:10px;padding:15px;width:100%;height:-moz-fit-content;height:fit-content;max-height:300px;border-radius:10px;position:relative;overflow:hidden;word-break:break-word}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;transition:.2s ease-in-out}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#000}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:focus{border:3px solid rgba(255,255,255,.3)}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #delete[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #edit[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #pin[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;cursor:pointer}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #delete[_ngcontent-%COMP%]:hover, .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #edit[_ngcontent-%COMP%]:hover, .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%]:hover, .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #pin[_ngcontent-%COMP%]:hover{opacity:.8}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #edit[_ngcontent-%COMP%]{right:45px}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%]{right:82px}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #pin[_ngcontent-%COMP%]{right:115px}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   .postdate[_ngcontent-%COMP%]{display:inline-block;width:100%;text-align:right;cursor:pointer;font-weight:700;font-size:small;color:#ecf0f1}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   .postdate[_ngcontent-%COMP%]:hover{opacity:.8}@media screen and (max-width: 1024px){.noteWrapper[_ngcontent-%COMP%]{width:100%!important}}@media screen and (max-width: 600px){.notetitle[_ngcontent-%COMP%]{display:inline-block!important;margin-top:35px!important}}.pinicon[_ngcontent-%COMP%]{position:absolute;left:5px;top:5px}"]}),e})();function OIe(t,e){1&t&&ue(0,"app-loader")}function kIe(t,e){if(1&t){const n=wt();x(0,"app-note",7),X("NoteDeleted",function(r){return Pe(n),Re(F().NoteDeleted(r))}),M()}if(2&t){const n=F();A("Notes",n.FilteredNotes)("Search",n.search)}}function PIe(t,e){if(1&t&&(x(0,"div",8)(1,"h1"),ee(2),M()()),2&t){const n=F();I(2),Ut(n.ErrorMessage)}}function RIe(t,e){1&t&&(x(0,"span",24),ee(1,"Title is Required."),M())}function FIe(t,e){1&t&&ue(0,"ngx-editor",25),2&t&&A("editor",F(3).editor)("placeholder","Type here...")}function LIe(t,e){1&t&&(x(0,"span",24),ee(1,"Note detail is Required."),M())}function BIe(t,e){if(1&t&&(x(0,"form",16)(1,"div",17)(2,"label",18),ee(3,"Title"),M(),ue(4,"input",19),L(5,RIe,2,0,"span",20),M(),x(6,"div")(7,"label",18),ee(8,"Note"),M(),x(9,"div",21),ue(10,"ngx-editor-menu",22),L(11,FIe,1,2,"ngx-editor",23),M(),L(12,LIe,2,0,"span",20),M()()),2&t){const n=F(2);A("formGroup",n.form),I(5),A("ngIf",n.submitted&&n.f.title.errors&&n.f.title.errors.required),I(5),A("editor",n.editor)("toolbar",n.toolbar),I(1),A("ngIf",n.form),I(1),A("ngIf",n.submitted&&n.f.html.errors&&n.f.html.errors.required)}}function VIe(t,e){if(1&t){const n=wt();x(0,"div",9)(1,"h5",10),ee(2,"New Note"),M(),x(3,"button",11),X("click",function(){return Re(Pe(n).$implicit.dismiss("Cross click"))}),M()(),x(4,"div",12),L(5,BIe,13,6,"form",13),M(),x(6,"div",14)(7,"button",15),X("click",function(){return Pe(n),Re(F().submit())}),ee(8,"Add Note"),M()()}if(2&t){const n=F();I(5),A("ngIf",n.form)}}let HIe=(()=>{var t;class e{constructor(i,r,s,o,a){this.router=i,this.modalService=r,this.db=s,this.searchService=o,this.tostar=a,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],this.Notes=[],this.FilteredNotes=[],this.isLoading=!0,this.submitted=!1,this.search="",this.IsError=!1,this.ErrorMessage="",this.currentPage=1,this.pageSize=5,this.totalNotes=0,this.initForm()}ngOnInit(){this.getData(),this.editor=new BT,this.searchService.search$.subscribe({next:i=>{this.search=i,this.FilteredNotes=""!=i?this.FilteredNotes.filter(r=>r.Title.toLowerCase().includes(i.toLowerCase())):[...this.Notes]}})}initForm(){this.form=new jo({html:new On("",[pr.required]),title:new On("",[pr.required])})}get f(){return this.form.controls}open(i){this.modalService.open(i,{centered:!0,size:"xl",fullscreen:!1,scrollable:!0})}submit(){if(this.submitted=!0,this.form.valid){this.isLoading=!0;let i=this.makeid(20),r={Html:this.form.value.html,Id:i,Date:new Date,Title:this.form.value.title};this.Notes.push(r),this.FilteredNotes.push(r),this.FilteredNotes=[...this.FilteredNotes],Zb(gl(this.db,"notes/"+i),{Title:this.form.value.title,Html:this.form.value.html,Date:r.Date.toString()}),this.submitted=!1,this.form.reset(),this.modalService.dismissAll(),this.isLoading=!1,this.tostar.success("Note Added Successfully","Added"),setTimeout(()=>{let s=document.getElementById(i);null!=s&&(s.focus(),window.scrollTo({top:s.offsetTop-100,behavior:"smooth"}))},1e3)}}makeid(i){let r="";let a=0;for(;a<i;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),a+=1;return r}getData(){this.isLoading=!0,YN(KN(gl(this.db),"notes/")).then(i=>{if(i.exists()){let r=i.val();this.Notes=[],this.FilteredNotes=[];for(let s in r){let o={Html:r[s].Html,Id:s,Date:r[s].Date,Title:r[s].Title,IsPined:null!=r[s].IsPined&&r[s].IsPined};this.Notes.push(o),this.FilteredNotes.push(o)}}else this.Notes=[],console.log("No data available");this.isLoading=!1,this.sortNotes()}).catch(i=>{console.error(i),this.isLoading=!1,this.IsError=!0,this.ErrorMessage=i.message})}fullscreen(i){i.currentTarget.classList.toggle("fullscreen")}NoteDeleted(i){0==i?this.isLoading=!0:(this.isLoading=!1,this.getData())}sortNotes(){this.Notes.sort((i,r)=>i.Title>r.Title?1:r.Title>i.Title?-1:0),this.FilteredNotes.sort((i,r)=>i.Title>r.Title?1:r.Title>i.Title?-1:0)}ngOnDestroy(){this.editor.destroy()}}return(t=e).\u0275fac=function(i){return new(i||t)(w(Nn),w(m0),w(vh),w(JG),w(Xg))},t.\u0275cmp=Ze({type:t,selectors:[["app-home"]],decls:8,vars:3,consts:[["id","section",1,"bg-dark","p-3",2,"flex","1"],[4,"ngIf"],[3,"Notes","Search","NoteDeleted",4,"ngIf"],["class","denied",4,"ngIf"],["id","flottingbtn",1,"btn","btn-light",3,"click"],[1,"fa-solid","fa-plus"],["note",""],[3,"Notes","Search","NoteDeleted"],[1,"denied"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"filter","invert(100%)",3,"click"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer","p-2"],["type","button",1,"btn","btn-sm","btn-light","fw-bold",3,"click"],[3,"formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","formControlName","title","name","title","id","title","placeholder","Note Title",1,"form-control"],["class","fw-bold fs-sm error",4,"ngIf"],[1,"NgxEditor__Wrapper","text-black"],[3,"editor","toolbar"],["formControlName","html",3,"editor","placeholder",4,"ngIf"],[1,"fw-bold","fs-sm","error"],["formControlName","html",3,"editor","placeholder"]],template:function(i,r){if(1&i){const s=wt();x(0,"section",0),L(1,OIe,1,0,"app-loader",1),L(2,kIe,1,2,"app-note",2),L(3,PIe,3,1,"div",3),x(4,"button",4),X("click",function(){Pe(s);const a=function es(t){return Ru(function A7(){return ye.lFrame.contextLView}(),Ge+t)}(7);return Re(r.open(a))}),ue(5,"i",5),M()(),L(6,VIe,9,1,"ng-template",null,6,Wi)}2&i&&(I(1),A("ngIf",r.isLoading),I(1),A("ngIf",r.FilteredNotes&&!r.IsError),I(1),A("ngIf",r.IsError&&r.ErrorMessage))},dependencies:[pn,kT,LT,dc,Uo,lc,cc,zo,Ba,IO,NIe],styles:["#flottingbtn[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:70px;border-radius:50%}.empty[_ngcontent-%COMP%]{color:#f1f2f39f}.fullscreen[_ngcontent-%COMP%]{position:fixed!important;width:100%!important;height:100%!important;z-index:9;left:0;margin:0!important;min-height:100vh!important;top:0}#section[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(0,0,0,.6),rgba(0,0,0,.692)),url(bg.d6084e1afb22bf93.jpg);background-size:cover;background-position:center;background-attachment:fixed}@media screen and (max-width: 460px){#section[_ngcontent-%COMP%]{padding-top:45px!important}}.denied[_ngcontent-%COMP%]{top:0;left:0;position:absolute;width:100vw;height:100vh;z-index:99999;display:flex;justify-content:center;align-items:center;background-color:#0004}.denied[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:red;letter-spacing:2px;text-transform:uppercase;text-shadow:2px 2px 2px black}"]}),e})(),em=(()=>{var t;class e{constructor(i,r){this.router=i,this.auth=r,this.User=new Ot({}),this.IsLoading=new Ot(!1),qbe(this.auth,s=>{s&&(this.setUser(s),localStorage.setItem("mynotebook",JSON.stringify({Email:s.email,Uid:s.uid})),JSON.parse(localStorage.getItem("mynotebook")))})}getAuthFire(){return this.auth.currentUser}isLoggedIn(){const i=localStorage.getItem("mynotebook");return null!==JSON.parse(i)}setUser(i){null!=i&&this.User.next({email:i.email})}setLoading(i){this.IsLoading.next(i)}get user$(){return this.User.asObservable()}get loading$(){return this.IsLoading.asObservable()}Login(i){return this.setLoading(!0),Kbe(this.auth,i.email,i.password).then(r=>(this.setLoading(!1),this.setUser((!0).user),this.router.navigate([""]),"Success")).catch(r=>(this.setLoading(!1),"auth/invalid-login-credentials"==r.code?"Invalid login credentials":(console.error("Authentication error:",r),"Authentication error")))}logout(){this.User.next({}),localStorage.removeItem("mynotebook"),Ybe(this.auth).then(()=>this.router.navigate(["/login"]))}}return(t=e).\u0275fac=function(i){return new(i||t)($(Nn),$(_b))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function $Ie(t,e){1&t&&ue(0,"app-loader")}function UIe(t,e){1&t&&(x(0,"p",19),ee(1,"Email is Required."),M())}function jIe(t,e){1&t&&(x(0,"p",19),ee(1,"Password is Required."),M())}function zIe(t,e){if(1&t&&(x(0,"p",20),ee(1),M()),2&t){const n=F(2);I(1),Ut(n.message)}}function GIe(t,e){if(1&t){const n=wt();x(0,"form",9),X("ngSubmit",function(){return Pe(n),Re(F().submit())}),x(1,"div",10),ue(2,"input",11),x(3,"label",12),ee(4,"Email address"),M(),L(5,UIe,2,0,"p",13),M(),x(6,"div",10),ue(7,"input",14),x(8,"label",15),ee(9,"Password"),M(),L(10,jIe,2,0,"p",13),M(),L(11,zIe,2,1,"p",16),x(12,"div",17)(13,"button",18),ee(14,"Sign in"),M()()()}if(2&t){const n=F();A("formGroup",n.form),I(5),A("ngIf",n.submitted&&n.f.email.errors&&n.f.email.errors.required),I(5),A("ngIf",n.submitted&&n.f.password.errors&&n.f.password.errors.required),I(1),A("ngIf",n.hasError)}}let WIe=(()=>{var t;class e{constructor(i,r){this.authservice=i,this.router=r,this.submitted=!1,this.isLoading=!1,this.hasError=!1,this.message=""}ngOnInit(){this.initForm(),this.authservice.loading$.subscribe({next:i=>{this.isLoading=i}}),this.authservice.isLoggedIn()&&this.router.navigate([""])}initForm(){this.form=new jo({email:new On("",pr.required),password:new On("",pr.required)})}get f(){return this.form.controls}submit(){this.submitted=!0,this.form.valid&&(this.isLoading=!0,this.authservice.Login(this.form.value).then(s=>{"Success"!=s&&(this.hasError=!0,this.message=s)}))}}return(t=e).\u0275fac=function(i){return new(i||t)(w(em),w(Nn))},t.\u0275cmp=Ze({type:t,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"container-fluid","ps-md-0"],[1,"row","g-0"],[1,"login","d-flex","align-items-center","py-5"],[1,"container"],[1,"row"],[4,"ngIf"],["id","form",1,"col-md-9","col-lg-8","mx-auto"],[1,"login-heading","mb-4"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","id","floatingInput","placeholder","name@example.com",1,"form-control"],["for","floatingInput",1,"f"],["class","error2 m-1",4,"ngIf"],["type","password","id","floatingPassword","formControlName","password","placeholder","Password",1,"form-control"],["for","floatingPassword",1,"f"],["class","error2 mb-3",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","btn-login","text-uppercase","fw-bold","mb-2"],[1,"error2","m-1"],[1,"error2","mb-3"]],template:function(i,r){1&i&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),L(5,$Ie,1,0,"app-loader",5),x(6,"div",6)(7,"h3",7),ee(8,"Welcome back!"),M(),L(9,GIe,15,4,"form",8),M()()()()()()),2&i&&(I(5),A("ngIf",r.isLoading),I(4),A("ngIf",r.form))},dependencies:[pn,dc,Uo,lc,cc,zo,Ba,IO],styles:[".login[_ngcontent-%COMP%]{min-height:calc(100vh - 100px);background:linear-gradient(0deg,rgba(0,0,0,.6),rgba(0,0,0,.692)),url(bg.d6084e1afb22bf93.jpg);background-repeat:no-repeat;background-size:cover;background-position:center}.login-heading[_ngcontent-%COMP%]{font-weight:300}.btn-login[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.05rem;padding:.75rem 1rem;width:50%;margin:0 auto}label.f[_ngcontent-%COMP%]{color:#333!important}label.f[_ngcontent-%COMP%]:after{background-color:transparent!important}#form[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:16px;box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.3);padding:30px}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff3!important}"]}),e})();const qIe=["notemodel"];function KIe(t,e){1&t&&ue(0,"app-loader")}function YIe(t,e){if(1&t){const n=wt();ur(0),x(1,"div",7)(2,"span",8),ee(3),M(),ue(4,"div",9),x(5,"button",10),X("click",function(){return Pe(n),Re(F().EditNote())}),ue(6,"i",11),M(),x(7,"button",12),X("click",function(r){return Pe(n),Re(F().copyNote(r))}),ue(8,"i",13),M(),x(9,"span",14),ee(10),Ro(11,"date"),M()(),dr()}if(2&t){const n=F();I(3),Ut(n.note.Title),I(1),Lf("innerHtml",n.note.Html,Ls),I(6),Ut(Fo(11,3,n.note.Date))}}function QIe(t,e){1&t&&(x(0,"span",30),ee(1,"Title is Required."),M())}function JIe(t,e){1&t&&ue(0,"ngx-editor",31),2&t&&A("editor",F(3).editor)("placeholder","Type here...")}function ZIe(t,e){1&t&&(x(0,"span",30),ee(1,"Note detail is Required."),M())}function XIe(t,e){if(1&t&&(x(0,"form",22)(1,"div",23)(2,"label",24),ee(3,"Title"),M(),ue(4,"input",25),L(5,QIe,2,0,"span",26),M(),x(6,"div")(7,"label",24),ee(8,"Note"),M(),x(9,"div",27),ue(10,"ngx-editor-menu",28),L(11,JIe,1,2,"ngx-editor",29),M(),L(12,ZIe,2,0,"span",26),M()()),2&t){const n=F(2);A("formGroup",n.form),I(5),A("ngIf",n.submitted&&n.f.title.errors&&n.f.title.errors.required),I(5),A("editor",n.editor)("toolbar",n.toolbar),I(1),A("ngIf",n.form),I(1),A("ngIf",n.submitted&&n.f.html.errors&&n.f.html.errors.required)}}function eAe(t,e){if(1&t){const n=wt();x(0,"div",15)(1,"h5",16),ee(2,"Update Note"),M(),x(3,"button",17),X("click",function(){return Re(Pe(n).$implicit.dismiss("Cross click"))}),M()(),x(4,"div",18),L(5,XIe,13,6,"form",19),M(),x(6,"div",20)(7,"button",21),X("click",function(){return Pe(n),Re(F().submit())}),ee(8,"Update Note"),M()()}if(2&t){const n=F();I(5),A("ngIf",n.form)}}let tAe=(()=>{var t;class e{constructor(i,r,s,o,a,l){this.authservice=i,this.db=r,this.route=s,this.modalService=o,this.toastr=a,this.router=l,this.isLoading=!1,this.submitted=!1,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],this.selectedNoteId=null,this.selectedNote=null,this.route.queryParams.subscribe({next:c=>{this.noteId=c.u}})}ngOnInit(){this.authservice.user$.subscribe({next:i=>{0===Object.keys(i).length&&this.router.navigate(["/login"])}}),this.getPayload(),this.editor=new BT}initForm(i){this.form=new jo({html:new On(i.Html,[pr.required]),title:new On(i.Title,[pr.required]),IsPined:new On(null!=i.IsPined&&i.IsPined)})}get f(){return this.form.controls}open(i){this.modalService.open(i,{centered:!0,size:"xl",fullscreen:!1,scrollable:!0})}getPayload(){this.isLoading=!0,YN(KN(gl(this.db),`notes/${this.noteId}`)).then(i=>{i.exists()?(this.note=i.val(),this.isLoading=!1):(this.isLoading=!1,console.log("No data available"))}).catch(i=>{console.error(i)})}submit(){if(this.submitted=!0,this.form.valid){this.isLoading=!0;let i={Html:this.form.value.html,Id:this.noteId,Date:new Date,Title:this.form.value.title};Zb(gl(this.db,"notes/"+this.noteId),{Title:this.form.value.title,Html:this.form.value.html,Date:(new Date).toString(),IsPined:this.form.value.IsPined}).finally(()=>{this.isLoading=!1}),this.note=i,this.submitted=!1,this.form.reset(),this.isLoading=!1,this.toastr.success("Note Updated Successfully","Updated"),this.modalService.dismissAll()}}copyNote(i){navigator.clipboard.writeText(i.currentTarget.previousElementSibling.previousElementSibling.innerText),this.toastr.success("Note Copied Successfully")}EditNote(){this.initForm(this.note),this.open(this.notemodel)}}return(t=e).\u0275fac=function(i){return new(i||t)(w(em),w(vh),w(oc),w(m0),w(Xg),w(Nn))},t.\u0275cmp=Ze({type:t,selectors:[["app-notedetail"]],viewQuery:function(i,r){if(1&i&&is(qIe,5),2&i){let s;nt(s=it())&&(r.notemodel=s.first)}},decls:11,vars:2,consts:[["id","section",1,"bg-dark","p-3",2,"flex","1"],[4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"fw-bold","mx-3"],["routerLink","/",1,"btn","btn-sm","btn-light","mx-3"],[1,"noteContainer"],["notemodel",""],[1,"noteWrapper"],[1,"fw-bold"],[1,"mt-3","note",2,"cursor","pointer",3,"innerHtml"],["id","edit",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa-solid","fa-pen-to-square","text-success"],["id","copy",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa-regular","fa-clipboard","text-secondary"],[1,"postdate","p-0","m-0"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",2,"filter","invert(100%)",3,"click"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer","p-2"],["type","button",1,"btn","btn-sm","btn-light","fw-bold",3,"click"],[3,"formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","formControlName","title","name","title","id","title","placeholder","Note Title",1,"form-control"],["class","fw-bold fs-sm error",4,"ngIf"],[1,"NgxEditor__Wrapper","text-black"],[3,"editor","toolbar"],["formControlName","html",3,"editor","placeholder",4,"ngIf"],[1,"fw-bold","fs-sm","error"],["formControlName","html",3,"editor","placeholder"]],template:function(i,r){1&i&&(x(0,"section",0),L(1,KIe,1,0,"app-loader",1),x(2,"div",2)(3,"h5",3),ee(4,"Note Detail"),M(),x(5,"button",4),ee(6,"Go Back"),M()(),x(7,"div",5),L(8,YIe,12,5,"ng-container",1),M()(),L(9,eAe,9,1,"ng-template",null,6,Wi)),2&i&&(I(1),A("ngIf",r.isLoading),I(7),A("ngIf",r.note))},dependencies:[pn,yp,kT,LT,dc,Uo,lc,cc,zo,Ba,IO,EE],styles:["#section[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(0,0,0,.6),rgba(0,0,0,.692)),url(bg.d6084e1afb22bf93.jpg);background-size:cover;background-position:center;background-attachment:fixed}.noteContainer[_ngcontent-%COMP%]{display:flex;justify-content:start;flex-wrap:wrap}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);box-shadow:0 4px 30px #0000001a;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.3);margin:10px;padding:15px;width:100%;height:-moz-fit-content;height:fit-content;border-radius:10px;position:relative;overflow:hidden;word-break:break-word}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;transition:.2s ease-in-out}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover   div[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#000}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#fff}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #edit[_ngcontent-%COMP%], .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;cursor:pointer}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #edit[_ngcontent-%COMP%]:hover, .noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%]:hover{opacity:.8}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   #copy[_ngcontent-%COMP%]{right:48px}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   .postdate[_ngcontent-%COMP%]{display:inline-block;width:100%;text-align:right;cursor:pointer;font-weight:700;font-size:small;color:#ecf0f1}.noteContainer[_ngcontent-%COMP%]   .noteWrapper[_ngcontent-%COMP%]   .postdate[_ngcontent-%COMP%]:hover{opacity:.8}@media screen and (max-width: 1024px){.noteWrapper[_ngcontent-%COMP%]{width:100%!important}}@media screen and (max-width: 460px){#section[_ngcontent-%COMP%]{padding-top:45px!important}}"]}),e})();const aW=(t,e)=>{const n=J(em).isLoggedIn(),i=J(Nn);return n||i.navigateByUrl("/login"),n},nAe=[{path:"",component:HIe,canActivate:[aW]},{path:"login",component:WIe},{path:"note/detail",component:tAe,canActivate:[aW]}];let iAe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({imports:[m3.forRoot(nAe),m3]}),e})();function rAe(t,e){if(1&t){const n=wt();x(0,"div",6)(1,"input",7),X("input",function(r){return Pe(n),Re(F().onsearch(r))}),M(),x(2,"div",8)(3,"button",9)(4,"span",3),ue(5,"i",10),M()(),x(6,"div",11)(7,"button",12),ee(8),M(),x(9,"button",13),X("click",function(){return Pe(n),Re(F().logout())}),ee(10,"Logout"),M()()()()}if(2&t){const n=F();I(8),Ut(n.email)}}let sAe=(()=>{var t;class e{constructor(i,r){this.searchService=i,this.authservice=r,this.loginIn=!1,this.email=""}ngOnInit(){this.authservice.user$.subscribe({next:i=>{Object.keys(i).length>0?(this.email=i.email,this.loginIn=!0):this.loginIn=!1}})}onsearch(i){this.searchService.setSearch(i.target.value)}logout(){this.authservice.logout()}}return(t=e).\u0275fac=function(i){return new(i||t)(w(JG),w(em))},t.\u0275cmp=Ze({type:t,selectors:[["app-header"]],decls:7,vars:1,consts:[["id","header",1,"p-3","d-flex","justify-content-between"],[1,"logo-container"],["routerLink","/",2,"text-decoration","none"],[1,"fw-bold"],[1,"fa-solid","fa-book"],["class","settings-container d-flex gap-2",4,"ngIf"],[1,"settings-container","d-flex","gap-2"],["type","search","placeholder","search",1,"form-control","py-0",3,"input"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-light","m-0","py-1","px-2"],[1,"fa-solid","fa-gear"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"text-center"],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"]],template:function(i,r){1&i&&(x(0,"header",0)(1,"div",1)(2,"a",2)(3,"span",3),ue(4,"i",4),ee(5," Notebook"),M()()(),L(6,rAe,11,1,"div",5),M()),2&i&&(I(6),A("ngIf",r.loginIn))},dependencies:[pn,yp,Kg,SG,CO,wO],styles:[".logo-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:2px}#header[_ngcontent-%COMP%]{top:0;width:100%;z-index:999;position:fixed;box-shadow:0 0 20px #333;flex-wrap:wrap}@media screen and (max-width: 460px){#header[_ngcontent-%COMP%]{justify-content:center!important;gap:10px}}"]}),e})(),oAe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ze({type:t,selectors:[["app-footer"]],decls:7,vars:0,consts:[[1,"p-3","d-flex","justify-content-between"],[1,"fw-bold"],["href","https://www.linkedin.com/in/shahbaz-ali-550398172/","target","_blank"]],template:function(i,r){1&i&&(x(0,"footer",0)(1,"span",1),ee(2,"Copyrights \xa9 2023"),M(),x(3,"span",1),ee(4,"Developer: "),x(5,"a",2),ee(6,"Shahbaz Ali"),M()()())},styles:["footer[_ngcontent-%COMP%]{font-size:.7rem;position:fixed;bottom:0;width:100%;z-index:999;box-shadow:0 0 10px 1px #00000073}footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:2px}footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:400;letter-spacing:normal;text-transform:capitalize;color:inherit;text-decoration:none}"]}),e})(),aAe=(()=>{var t;class e{constructor(){this.title="notepad"}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=Ze({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[["id","main"]],template:function(i,r){1&i&&(x(0,"section",0),ue(1,"app-header"),x(2,"main"),ue(3,"router-outlet"),M(),ue(4,"app-footer"),M())},dependencies:[nD,sAe,oAe],styles:["main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}"]}),e})();const lAe_firebase={apiKey:"AIzaSyA_qevF0lcuDrqYR34DFvIYWcAta_cfdig",authDomain:"notebook-54381.firebaseapp.com",projectId:"notebook-54381",storageBucket:"notebook-54381.appspot.com",messagingSenderId:"1072599756969",appId:"1:1072599756969:web:d62e2e03dd65450a6879b8",measurementId:"G-RZ01H6ZC9Y"};function lW(t){return new O(3e3,!1)}function _l(t){switch(t.length){case 0:return new Zg;case 1:return t[0];default:return new nW(t)}}function cW(t,e,n=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,g)=>{let m=g,y=h;if("offset"!==g)switch(m=t.normalizePropertyName(m,r),y){case"!":y=n.get(g);break;case ua:y=i.get(g);break;default:y=t.normalizeStyleValue(g,m,y,r)}d.set(m,y)}),u||s.push(d),a=d,o=c}),r.length)throw function NAe(t){return new O(3502,!1)}();return s}function AO(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&MO(n,"start",t)));break;case"done":t.onDone(()=>i(n&&MO(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&MO(n,"destroy",t)))}}function MO(t,e,n){const s=xO(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),o=t._data;return null!=o&&(s._data=o),s}function xO(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Cr(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function uW(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}const jAe=(()=>typeof document>"u"?null:document.documentElement)();function NO(t){const e=t.parentNode||t.host||null;return e===jAe?null:e}let lu=null,dW=!1;function hW(t,e){for(;e;){if(e===t)return!0;e=NO(e)}return!1}function fW(t,e,n){if(n)return Array.from(t.querySelectorAll(e));const i=t.querySelector(e);return i?[i]:[]}let pW=(()=>{var t;class e{validateStyleProperty(i){return function GAe(t){lu||(lu=function WAe(){return typeof document<"u"?document.body:null}()||{},dW=!!lu.style&&"WebkitAppearance"in lu.style);let e=!0;return lu.style&&!function zAe(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in lu.style,!e&&dW&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in lu.style)),e}(i)}matchesElement(i,r){return!1}containsElement(i,r){return hW(i,r)}getParentElement(i){return NO(i)}query(i,r,s){return fW(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,l=[],c){return new Zg(s,o)}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})(),OO=(()=>{class e{}return e.NOOP=new pW,e})();const qAe=1e3,kO="ng-enter",v0="ng-leave",b0="ng-trigger",w0=".ng-trigger",mW="ng-animating",PO=".ng-animating";function da(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:RO(parseFloat(e[1]),e[2])}function RO(t,e){return"s"===e?t*qAe:t}function C0(t,e,n){return t.hasOwnProperty("duration")?t:function YAe(t,e,n){let r,s=0,o="";if("string"==typeof t){const a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(lW()),{duration:0,delay:0,easing:""};r=RO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=RO(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=t;if(!n){let a=!1,l=e.length;r<0&&(e.push(function cAe(){return new O(3100,!1)}()),a=!0),s<0&&(e.push(function uAe(){return new O(3101,!1)}()),a=!0),a&&e.splice(l,0,lW())}return{duration:r,delay:s,easing:o}}(t,e,n)}function tm(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function _W(t){const e=new Map;return Object.keys(t).forEach(n=>{e.set(n,t[n])}),e}function yl(t,e=new Map,n){if(n)for(let[i,r]of n)e.set(i,r);for(let[i,r]of t)e.set(i,r);return e}function fo(t,e,n){e.forEach((i,r)=>{const s=LO(r);n&&!n.has(r)&&n.set(r,t.style[s]),t.style[s]=i})}function cu(t,e){e.forEach((n,i)=>{const r=LO(i);t.style[r]=""})}function nm(t){return Array.isArray(t)?1==t.length?t[0]:eW(t):t}const FO=new RegExp("{{\\s*(.+?)\\s*}}","g");function vW(t){let e=[];if("string"==typeof t){let n;for(;n=FO.exec(t);)e.push(n[1]);FO.lastIndex=0}return e}function im(t,e,n){const i=t.toString(),r=i.replace(FO,(s,o)=>{let a=e[o];return null==a&&(n.push(function hAe(t){return new O(3003,!1)}()),a=""),a.toString()});return r==i?t:r}function E0(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const ZAe=/-+([a-z0-9])/g;function LO(t){return t.replace(ZAe,(...e)=>e[1].toUpperCase())}function Er(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw function fAe(t){return new O(3004,!1)}()}}function bW(t,e){return window.getComputedStyle(t)[e]}const D0="*";function tMe(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function nMe(t,e,n){if(":"==t[0]){const l=function iMe(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(function IAe(t){return new O(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof l)return void e.push(l);t=l}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(function SAe(t){return new O(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(wW(r,o));"<"==s[0]&&!(r==D0&&o==D0)&&e.push(wW(o,r))}(i,n,e)):n.push(t),n}const T0=new Set(["true","1"]),S0=new Set(["false","0"]);function wW(t,e){const n=T0.has(t)||S0.has(t),i=T0.has(e)||S0.has(e);return(r,s)=>{let o=t==D0||t==r,a=e==D0||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?T0.has(t):S0.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?T0.has(e):S0.has(e)),o&&a}}const rMe=new RegExp("s*:selfs*,?","g");function BO(t,e,n,i){return new sMe(t).build(e,n,i)}class sMe{constructor(e){this._driver=e}build(e,n,i){const r=new lMe(n);return this._resetContextStyleTimingState(r),Er(this,nm(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push(function gAe(){return new O(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,n))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,o.push(l)}else n.errors.push(function mAe(){return new O(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,n){const i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{vW(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(E0(s.values()),n.errors.push(function _Ae(t,e){return new O(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const i=Er(this,nm(e.animation),n);return{type:1,matchers:tMe(e.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:uu(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(i=>Er(this,i,n)),options:uu(e.options)}}visitGroup(e,n){const i=n.currentTime;let r=0;const s=e.steps.map(o=>{n.currentTime=i;const a=Er(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:s,options:uu(e.options)}}visitAnimate(e,n){const i=function uMe(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return VO(C0(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=VO(0,0,"");return s.dynamic=!0,s.strValue=n,s}const r=C0(n,e);return VO(r.duration,r.delay,r.easing)}(e.timings,n.errors);n.currentAnimateTimings=i;let r,s=e.styles?e.styles:Jg({});if(5==s.type)r=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Jg(c)}n.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,n){const i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===ua?i.push(a):n.errors.push(new O(3002,!1)):i.push(_W(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){const i=n.currentAnimateTimings;let r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=n.collectedStyles.get(n.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(n.errors.push(function vAe(t,e,n,i,r){return new O(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),n.options&&function JAe(t,e,n){const i=e.params||{},r=vW(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(function dAe(t){return new O(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(e,n){const i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function bAe(){return new O(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(C=>{const E=this._makeStyleAst(C,n);let R=null!=E.offset?E.offset:function cMe(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(E.styles),B=0;return null!=R&&(s++,B=E.offset=R),l=l||B<0||B>1,a=a||B<c,c=B,o.push(B),E});l&&n.errors.push(function wAe(){return new O(3012,!1)}()),a&&n.errors.push(function CAe(){return new O(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?n.errors.push(function EAe(){return new O(3202,!1)}()):0==s&&(h=1/(d-1));const g=d-1,m=n.currentTime,y=n.currentAnimateTimings,b=y.duration;return u.forEach((C,E)=>{const R=h>0?E==g?1:h*E:o[E],B=R*b;n.currentTime=m+y.delay+B,y.duration=B,this._validateStyleAst(C,n),C.offset=R,i.styles.push(C)}),i}visitReference(e,n){return{type:8,animation:Er(this,nm(e.animation),n),options:uu(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:uu(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:uu(e.options)}}visitQuery(e,n){const i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;const[s,o]=function oMe(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(rMe,"")),t=t.replace(/@\*/g,w0).replace(/@\w+/g,n=>w0+"-"+n.slice(1)).replace(/:animating/g,PO),[t,e]}(e.selector);n.currentQuerySelector=i.length?i+" "+s:s,Cr(n.collectedStyles,n.currentQuerySelector,new Map);const a=Er(this,nm(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:uu(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function DAe(){return new O(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:C0(e.timings,n.errors,!0);return{type:12,animation:Er(this,nm(e.animation),n),timings:i,options:null}}}class lMe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uu(t){return t?(t=tm(t)).params&&(t.params=function aMe(t){return t?tm(t):null}(t.params)):t={},t}function VO(t,e,n){return{duration:t,delay:e,easing:n}}function HO(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class I0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const fMe=new RegExp(":enter","g"),gMe=new RegExp(":leave","g");function $O(t,e,n,i,r,s=new Map,o=new Map,a,l,c=[]){return(new mMe).buildKeyframes(t,e,n,i,r,s,o,a,l,c)}class mMe{buildKeyframes(e,n,i,r,s,o,a,l,c,u=[]){c=c||new I0;const d=new UO(e,n,c,r,s,u,[]);d.options=l;const h=l.delay?da(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Er(this,i,d);const g=d.timelines.filter(m=>m.containsAnimation());if(g.length&&a.size){let m;for(let y=g.length-1;y>=0;y--){const b=g[y];if(b.element===n){m=b;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return g.length?g.map(m=>m.buildKeyframes()):[HO(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const i=n.subInstructions.get(n.element);if(i){const r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){const i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:da(im(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,n,i){let s=n.currentTimeline.currentTime;const o=null!=i.duration?da(i.duration):null,a=null!=i.delay?da(i.delay):null;return 0!==o&&e.forEach(l=>{const c=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Er(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const i=n.subContextCount;let r=n;const s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=A0);const o=da(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Er(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const i=[];let r=n.currentTimeline.currentTime;const s=e.options&&e.options.delay?da(e.options.delay):0;e.steps.forEach(o=>{const a=n.createSubContext(e.options);s&&a.delayNextStep(s),Er(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const i=e.strValue;return C0(n.params?im(i,n.params,n.errors):i,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){const i=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?da(r.delay):0;s&&(6===n.previousNode.type||0==i&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=A0);let o=i;const a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;const d=n.createSubContext(e.options,c);s&&d.delayNextStep(s),c===n.element&&(l=d.currentTimeline),Er(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const i=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=n.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Er(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const A0={};class UO{constructor(e,n,i,r,s,o,a,l){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=A0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new M0(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=da(i.duration)),null!=i.delay&&(r.delay=da(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=im(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){const r=n||this.element,s=new UO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=A0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){const r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new _Me(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(fMe,"."+this._enterClassName)).replace(gMe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function TAe(t){return new O(3014,!1)}()),a}}class M0{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new M0(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||ua),this._currentKeyframe.set(n,ua);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);const s=r&&r.params||{},o=function yMe(t,e){const n=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)n.set(s,ua)}else yl(r,n)}),n}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=im(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ua),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{const r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=yl(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===ua&&n.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?E0(e.values()):[],o=n.size?E0(n.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return HO(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class _Me extends M0{constructor(e,n,i,r,s,o,a=!1){super(e,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=i+n,a=n/o,l=yl(e[0]);l.set("offset",0),s.push(l);const c=yl(e[0]);c.set("offset",DW(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=yl(e[d]);const g=h.get("offset");h.set("offset",DW((n+g*i)/o)),s.push(h)}i=o,n=0,r="",e=s}return HO(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}}function DW(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class jO{}const vMe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bMe extends jO{normalizePropertyName(e,n){return LO(e)}normalizeStyleValue(e,n,i,r){let s="";const o=i.toString().trim();if(vMe.has(n)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function pAe(t,e){return new O(3005,!1)}())}return o+s}}function TW(t,e,n,i,r,s,o,a,l,c,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const zO={};class SW{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return function wMe(t,e,n,i,r){return t.some(s=>s(e,n,i,r))}(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||zO,m=this.buildStyles(i,a&&a.params||zO,d),y=l&&l.params||zO,b=this.buildStyles(r,y,d),C=new Set,E=new Map,R=new Map,B="void"===r,j={params:CMe(y,h),delay:this.ast.options?.delay},se=u?[]:$O(e,n,this.ast.animation,s,o,m,b,j,c,d);let ce=0;if(se.forEach(Ae=>{ce=Math.max(Ae.duration+Ae.delay,ce)}),d.length)return TW(n,this._triggerName,i,r,B,m,b,[],[],E,R,ce,d);se.forEach(Ae=>{const We=Ae.element,qt=Cr(E,We,new Set);Ae.preStyleProps.forEach(Kt=>qt.add(Kt));const Zn=Cr(R,We,new Set);Ae.postStyleProps.forEach(Kt=>Zn.add(Kt)),We!==n&&C.add(We)});const Y=E0(C.values());return TW(n,this._triggerName,i,r,B,m,b,se,Y,E,R,ce)}}function CMe(t,e){const n=tm(e);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(n[i]=t[i]);return n}class EMe{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){const i=new Map,r=tm(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=im(o,r,n));const l=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,l,o,n),i.set(a,o)})}),i}}class TMe{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new EMe(r.style,r.options&&r.options.params||{},i))}),IW(this.states,"true","1"),IW(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new SW(e,r,this.states))}),this.fallbackTransition=function SMe(t,e,n){return new SW(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(o=>o.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}}function IW(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const IMe=new I0;class AMe{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const i=[],s=BO(this._driver,n,i,[]);if(i.length)throw function OAe(t){return new O(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,n,i){const r=e.element,s=cW(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=$O(this._driver,n,s,kO,v0,new Map,new Map,i,IMe,r),o.forEach(u=>{const d=Cr(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function kAe(){return new O(3300,!1)}()),o=[]),r.length)throw function PAe(t){return new O(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,g)=>{u.set(g,this._driver.computeStyle(d,g,ua))})});const c=_l(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function RAe(t){return new O(3301,!1)}();return n}listen(e,n,i,r){const s=xO(n,"","","");return AO(this._getPlayer(e),i,s,r),()=>{}}command(e,n,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,n,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const AW="ng-animate-queued",GO="ng-animate-disabled",kMe=[],MW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},PMe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Es="__ng_removed";class WO{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const i=e&&e.hasOwnProperty("value");if(this.value=function BMe(t){return t??null}(i?e.value:e),i){const s=tm(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const i=this.options.params;Object.keys(n).forEach(r=>{null==i[r]&&(i[r]=n[r])})}}}const rm="void",qO=new WO(rm);class RMe{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qr(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw function FAe(t,e){return new O(3302,!1)}();if(null==i||0==i.length)throw function LAe(t){return new O(3303,!1)}();if(!function VMe(t){return"start"==t||"done"==t}(i))throw function BAe(t,e){return new O(3400,!1)}();const s=Cr(this._elementListeners,e,[]),o={name:n,phase:i,callback:r};s.push(o);const a=Cr(this._engine.statesByElement,e,new Map);return a.has(n)||(qr(e,b0),qr(e,b0+"-"+n),a.set(n,qO)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function VAe(t){return new O(3401,!1)}();return n}trigger(e,n,i,r=!0){const s=this._getTrigger(n),o=new KO(this.id,n,e);let a=this._engine.statesByElement.get(e);a||(qr(e,b0),qr(e,b0+"-"+n),this._engine.statesByElement.set(e,a=new Map));let l=a.get(n);const c=new WO(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=qO),c.value!==rm&&l.value===c.value){if(!function UMe(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(l.params,c.params)){const y=[],b=s.matchStyles(l.value,l.params,y),C=s.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{cu(e,b),fo(e,C)})}return}const h=Cr(this._engine.playersByElement,e,[]);h.forEach(y=>{y.namespaceId==this.id&&y.triggerName==n&&y.queued&&y.destroy()});let g=s.matchTransition(l.value,c.value,e,c.params),m=!1;if(!g){if(!r)return;g=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:g,fromState:l,toState:c,player:o,isFallbackTransition:m}),m||(qr(e,AW),o.onStart(()=>{Ah(e,AW)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const b=this._engine.playersByElement.get(e);if(b){let C=b.indexOf(o);C>=0&&b.splice(C,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const i=this._engine.driver.query(e,w0,!0);i.forEach(r=>{if(r[Es])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,rm,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),i&&_l(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){const r=new Set;n.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||qO,u=new WO(rm),d=new KO(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{const s=e[Es];(!s||s===MW)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){qr(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=xO(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,AO(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class FMe{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){const i=new RMe(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}return n}trigger(e,n,i,r){if(x0(n)){const s=this._fetchNamespace(e);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!x0(n))return;const s=n[Es];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qr(e,GO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ah(e,GO))}removeNode(e,n,i){if(x0(n)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);const s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,s){this.collectedLeaveElements.push(n),n[Es]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,i,r,s){return x0(n)?this._fetchNamespace(e).listen(n,i,r,s):()=>{}}_buildInstruction(e,n,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,w0,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,PO,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _l(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[Es];if(n&&n.setForRemoval){if(e[Es]=MW,n.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(GO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)qr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],n.length?_l(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function HAe(t){return new O(3402,!1)}()}_flushAnimations(e,n){const i=new I0,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Z=>{u.add(Z);const oe=this.driver.query(Z,".ng-animate-queued",!0);for(let he=0;he<oe.length;he++)u.add(oe[he])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),g=OW(h,this.collectedEnterElements),m=new Map;let y=0;g.forEach((Z,oe)=>{const he=kO+y++;m.set(oe,he),Z.forEach(Ne=>qr(Ne,he))});const b=[],C=new Set,E=new Set;for(let Z=0;Z<this.collectedLeaveElements.length;Z++){const oe=this.collectedLeaveElements[Z],he=oe[Es];he&&he.setForRemoval&&(b.push(oe),C.add(oe),he.hasAnimation?this.driver.query(oe,".ng-star-inserted",!0).forEach(Ne=>C.add(Ne)):E.add(oe))}const R=new Map,B=OW(h,Array.from(C));B.forEach((Z,oe)=>{const he=v0+y++;R.set(oe,he),Z.forEach(Ne=>qr(Ne,he))}),e.push(()=>{g.forEach((Z,oe)=>{const he=m.get(oe);Z.forEach(Ne=>Ah(Ne,he))}),B.forEach((Z,oe)=>{const he=R.get(oe);Z.forEach(Ne=>Ah(Ne,he))}),b.forEach(Z=>{this.processLeaveNode(Z)})});const j=[],se=[];for(let Z=this._namespaceList.length-1;Z>=0;Z--)this._namespaceList[Z].drainQueuedTransitions(n).forEach(he=>{const Ne=he.player,Yt=he.element;if(j.push(Ne),this.collectedEnterElements.length){const un=Yt[Es];if(un&&un.setForMove){if(un.previousTriggersValues&&un.previousTriggersValues.has(he.triggerName)){const Mi=un.previousTriggersValues.get(he.triggerName),ui=this.statesByElement.get(he.element);if(ui&&ui.has(he.triggerName)){const Mh=ui.get(he.triggerName);Mh.value=Mi,ui.set(he.triggerName,Mh)}}return void Ne.destroy()}}const nr=!d||!this.driver.containsElement(d,Yt),Sn=R.get(Yt),Dr=m.get(Yt),pt=this._buildInstruction(he,i,Dr,Sn,nr);if(pt.errors&&pt.errors.length)return void se.push(pt);if(nr)return Ne.onStart(()=>cu(Yt,pt.fromStyles)),Ne.onDestroy(()=>fo(Yt,pt.toStyles)),void r.push(Ne);if(he.isFallbackTransition)return Ne.onStart(()=>cu(Yt,pt.fromStyles)),Ne.onDestroy(()=>fo(Yt,pt.toStyles)),void r.push(Ne);const Ds=[];pt.timelines.forEach(un=>{un.stretchStartingKeyframe=!0,this.disabledNodes.has(un.element)||Ds.push(un)}),pt.timelines=Ds,i.append(Yt,pt.timelines),o.push({instruction:pt,player:Ne,element:Yt}),pt.queriedElements.forEach(un=>Cr(a,un,[]).push(Ne)),pt.preStyleProps.forEach((un,Mi)=>{if(un.size){let ui=l.get(Mi);ui||l.set(Mi,ui=new Set),un.forEach((Mh,hu)=>ui.add(hu))}}),pt.postStyleProps.forEach((un,Mi)=>{let ui=c.get(Mi);ui||c.set(Mi,ui=new Set),un.forEach((Mh,hu)=>ui.add(hu))})});if(se.length){const Z=[];se.forEach(oe=>{Z.push(function $Ae(t,e){return new O(3505,!1)}())}),j.forEach(oe=>oe.destroy()),this.reportError(Z)}const ce=new Map,Y=new Map;o.forEach(Z=>{const oe=Z.element;i.has(oe)&&(Y.set(oe,oe),this._beforeAnimationBuild(Z.player.namespaceId,Z.instruction,ce))}),r.forEach(Z=>{const oe=Z.element;this._getPreviousPlayers(oe,!1,Z.namespaceId,Z.triggerName,null).forEach(Ne=>{Cr(ce,oe,[]).push(Ne),Ne.destroy()})});const Ae=b.filter(Z=>PW(Z,l,c)),We=new Map;NW(We,this.driver,E,c,ua).forEach(Z=>{PW(Z,l,c)&&Ae.push(Z)});const Zn=new Map;g.forEach((Z,oe)=>{NW(Zn,this.driver,new Set(Z),l,"!")}),Ae.forEach(Z=>{const oe=We.get(Z),he=Zn.get(Z);We.set(Z,new Map([...oe?.entries()??[],...he?.entries()??[]]))});const Kt=[],po=[],go={};o.forEach(Z=>{const{element:oe,player:he,instruction:Ne}=Z;if(i.has(oe)){if(u.has(oe))return he.onDestroy(()=>fo(oe,Ne.toStyles)),he.disabled=!0,he.overrideTotalTime(Ne.totalTime),void r.push(he);let Yt=go;if(Y.size>1){let Sn=oe;const Dr=[];for(;Sn=Sn.parentNode;){const pt=Y.get(Sn);if(pt){Yt=pt;break}Dr.push(Sn)}Dr.forEach(pt=>Y.set(pt,Yt))}const nr=this._buildAnimation(he.namespaceId,Ne,ce,s,Zn,We);if(he.setRealPlayer(nr),Yt===go)Kt.push(he);else{const Sn=this.playersByElement.get(Yt);Sn&&Sn.length&&(he.parentPlayer=_l(Sn)),r.push(he)}}else cu(oe,Ne.fromStyles),he.onDestroy(()=>fo(oe,Ne.toStyles)),po.push(he),u.has(oe)&&r.push(he)}),po.forEach(Z=>{const oe=s.get(Z.element);if(oe&&oe.length){const he=_l(oe);Z.setRealPlayer(he)}}),r.forEach(Z=>{Z.parentPlayer?Z.syncPlayerEvents(Z.parentPlayer):Z.destroy()});for(let Z=0;Z<b.length;Z++){const oe=b[Z],he=oe[Es];if(Ah(oe,v0),he&&he.hasAnimation)continue;let Ne=[];if(a.size){let nr=a.get(oe);nr&&nr.length&&Ne.push(...nr);let Sn=this.driver.query(oe,PO,!0);for(let Dr=0;Dr<Sn.length;Dr++){let pt=a.get(Sn[Dr]);pt&&pt.length&&Ne.push(...pt)}}const Yt=Ne.filter(nr=>!nr.destroyed);Yt.length?HMe(this,oe,Yt):this.processLeaveNode(oe)}return b.length=0,Kt.forEach(Z=>{this.players.push(Z),Z.onDone(()=>{Z.destroy();const oe=this.players.indexOf(Z);this.players.splice(oe,1)}),Z.play()}),Kt}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,s){let o=[];if(n){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==rm;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,n,i){const s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const c=l.element,u=c!==s,d=Cr(i,c,[]);this._getPreviousPlayers(c,u,o,a,n.toState).forEach(g=>{const m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),d.push(g)})}cu(s,n.fromStyles)}_buildAnimation(e,n,i,r,s,o){const a=n.triggerName,l=n.element,c=[],u=new Set,d=new Set,h=n.timelines.map(m=>{const y=m.element;u.add(y);const b=y[Es];if(b&&b.removedBeforeQueried)return new Zg(m.duration,m.delay);const C=y!==l,E=function $Me(t){const e=[];return kW(t,e),e}((i.get(y)||kMe).map(ce=>ce.getRealPlayer())).filter(ce=>!!ce.element&&ce.element===y),R=s.get(y),B=o.get(y),j=cW(this._normalizer,m.keyframes,R,B),se=this._buildPlayer(m,j,E);if(m.subTimeline&&r&&d.add(y),C){const ce=new KO(e,a,y);ce.setRealPlayer(se),c.push(ce)}return se});c.forEach(m=>{Cr(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function LMe(t,e,n){let i=t.get(e);if(i){if(i.length){const r=i.indexOf(n);i.splice(r,1)}0==i.length&&t.delete(e)}return i}(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>qr(m,mW));const g=_l(h);return g.onDestroy(()=>{u.forEach(m=>Ah(m,mW)),fo(l,n.toStyles)}),d.forEach(m=>{Cr(r,m,[]).push(g)}),g}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new Zg(e.duration,e.delay)}}class KO{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new Zg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>AO(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Cr(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function x0(t){return t&&1===t.nodeType}function xW(t,e){const n=t.style.display;return t.style.display=e??"none",n}function NW(t,e,n,i,r){const s=[];n.forEach(l=>s.push(xW(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[Es]=PMe,o.push(c))}),t.set(c,u)});let a=0;return n.forEach(l=>xW(l,s[a++])),o}function OW(t,e){const n=new Map;if(t.forEach(a=>n.set(a,[])),0==e.length)return n;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=n.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&n.get(l).push(a)}),n}function qr(t,e){t.classList?.add(e)}function Ah(t,e){t.classList?.remove(e)}function HMe(t,e,n){_l(n).onDone(()=>t.processLeaveNode(e))}function kW(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof nW?kW(i.players,e):e.push(i)}}function PW(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(s=>r.add(s)):e.set(t,i),n.delete(t),!0}class N0{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new FMe(e,n,i),this._timelineEngine=new AMe(e,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=BO(this._driver,s,l,[]);if(l.length)throw function xAe(t,e){return new O(3404,!1)}();a=function DMe(t,e,n){return new TMe(t,e,n)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if("@"==i.charAt(0)){const[s,o]=uW(i);this._timelineEngine.command(s,n,o,r)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,s){if("@"==i.charAt(0)){const[o,a]=uW(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let zMe=(()=>{class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&fo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fo(this._element,this._initialStyles),this._endStyles&&(fo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(cu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cu(this._element,this._endStyles),this._endStyles=null),fo(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function YO(t){let e=null;return t.forEach((n,i)=>{(function GMe(t){return"display"===t||"position"===t})(i)&&(e=e||new Map,e.set(i,n))}),e}class RW{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:bW(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}}class WMe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return hW(e,n)}getParentElement(e){return NO(e)}query(e,n,i){return fW(e,n,i)}computeStyle(e,n,i){return window.getComputedStyle(e)[n]}animate(e,n,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(g=>g instanceof RW);(function XAe(t,e){return 0===t||0===e})(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((m,y)=>c.set(y,m))});let d=function QAe(t){return t.length?t[0]instanceof Map?t:t.map(e=>_W(e)):[]}(n).map(g=>yl(g));d=function eMe(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,bW(t,a)))}}return e}(e,d,c);const h=function jMe(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=YO(e[0]),e.length>1&&(i=YO(e[e.length-1]))):e instanceof Map&&(n=YO(e)),n||i?new zMe(t,n,i):null}(e,d);return new RW(e,d,l,h)}}let qMe=(()=>{var t;class e extends ZG{constructor(i,r){super(),this._nextAnimationId=0,this._renderer=i.createRenderer(r.body,{id:"0",encapsulation:Li.None,styles:[],data:{animation:[]}})}build(i){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(i)?eW(i):i;return FW(this._renderer,null,r,"register",[s]),new KMe(r,this._renderer)}}return(t=e).\u0275fac=function(i){return new(i||t)($(ed),$(kt))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();class KMe extends QSe{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new YMe(this._id,e,n||{},this._renderer)}}class YMe{constructor(e,n,i,r){this.id=e,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return FW(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function FW(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const LW="@.disabled";let QMe=(()=>{var t;class e{constructor(i,r,s){this.delegate=i,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(o,a)=>{const l=a?.parentNode(o);l&&a.removeChild(l,o)}}createRenderer(i,r){const o=this.delegate.createRenderer(i,r);if(!(i&&r&&r.data&&r.data.animation)){let d=this._rendererCache.get(o);return d||(d=new BW("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,d)),d}const a=r.id,l=r.id+"-"+this._currentId;this._currentId++,this.engine.register(l,i);const c=d=>{Array.isArray(d)?d.forEach(c):this.engine.registerTrigger(a,l,i,d.name,d)};return r.data.animation.forEach(c),new JMe(this,l,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,r,s){i>=0&&i<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,l]=o;a(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return(t=e).\u0275fac=function(i){return new(i||t)($(ed),$(N0),$(Fe))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();class BW{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){"@"==n.charAt(0)&&n==LW?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class JMe extends BW{constructor(e,n,i,r,s){super(n,i,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,i){"@"==n.charAt(0)?"."==n.charAt(1)&&n==LW?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if("@"==n.charAt(0)){const r=function ZMe(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function XMe(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,n,i)}}let exe=(()=>{var t;class e extends N0{constructor(i,r,s,o){super(i.body,r,s)}ngOnDestroy(){this.flush()}}return(t=e).\u0275fac=function(i){return new(i||t)($(kt),$(OO),$(jO),$(Pr))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),e})();const VW=[{provide:ZG,useClass:qMe},{provide:jO,useFactory:function txe(){return new bMe}},{provide:N0,useClass:exe},{provide:ed,useFactory:function nxe(t,e,n){return new QMe(t,e,n)},deps:[PE,N0,Fe]}],QO=[{provide:OO,useFactory:()=>new WMe},{provide:sR,useValue:"BrowserAnimations"},...VW],HW=[{provide:OO,useClass:pW},{provide:sR,useValue:"NoopAnimations"},...VW];let ixe=(()=>{var t;class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?HW:QO}}}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t}),t.\u0275inj=Oe({providers:QO,imports:[nV]}),e})(),rxe=(()=>{var t;class e{}return(t=e).\u0275fac=function(i){return new(i||t)},t.\u0275mod=ke({type:t,bootstrap:[aAe]}),t.\u0275inj=Oe({providers:[{provide:Oa,useClass:yB},em],imports:[nV,iAe,qSe,Sde.forRoot({locals:{bold:"Bold",italic:"Italic",code:"Code",blockquote:"Blockquote",underline:"Underline",strike:"Strike",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"}}),vH,$se,ixe,vIe.forRoot({timeOut:1500,positionClass:"toast-bottom-left",progressBar:!0}),l_e(()=>c_e(lAe_firebase)),CCe(()=>ECe()),Gbe(()=>Wbe())]}),e})();une().bootstrapModule(rxe).catch(t=>console.error(t))},519:function(mo){mo.exports=function(){"use strict";function Tr(f,p){return function ir(f,p){return p.get?p.get.call(f):p.value}(f,be(f,p,"get"))}function xi(f,p,_){return function ha(f,p,_){if(p.set)p.set.call(f,_);else{if(!p.writable)throw new TypeError("attempted to set read only private field");p.value=_}}(f,be(f,p,"set"),_),_}function be(f,p,_){if(!p.has(f))throw new TypeError("attempted to "+_+" private field on non-instance");return p.get(f)}function dn(f,p,_){(function fa(f,p){if(p.has(f))throw new TypeError("Cannot initialize the same private elements twice on an object")})(f,p),p.set(f,_)}const Te={},Kr=f=>new Promise(p=>{if(!f)return p();const _=window.scrollX,v=window.scrollY;Te.restoreFocusTimeout=setTimeout(()=>{Te.previousActiveElement instanceof HTMLElement?(Te.previousActiveElement.focus(),Te.previousActiveElement=null):document.body&&document.body.focus(),p()},100),window.scrollTo(_,v)});var ze={innerParams:new WeakMap,domCache:new WeakMap};const P=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((f,p)=>(f[p]="swal2-"+p,f),{}),Sr=["success","warning","info","question","error"].reduce((f,p)=>(f[p]="swal2-"+p,f),{}),ga="SweetAlert2:",Ni=f=>f.charAt(0).toUpperCase()+f.slice(1),Qt=f=>{console.warn("".concat(ga," ").concat("object"==typeof f?f.join(" "):f))},Ir=f=>{console.error("".concat(ga," ").concat(f))},_o=[],Oi=(f,p)=>{(f=>{_o.includes(f)||(_o.push(f),Qt(f))})('"'.concat(f,'" is deprecated and will be removed in the next major release. Please use "').concat(p,'" instead.'))},yo=f=>"function"==typeof f?f():f,Yr=f=>f&&"function"==typeof f.toPromise,ki=f=>Yr(f)?f.toPromise():Promise.resolve(f),wl=f=>f&&Promise.resolve(f)===f,nn=()=>document.body.querySelector(".".concat(P.container)),Ts=f=>{const p=nn();return p?p.querySelector(f):null},_n=f=>Ts(".".concat(f)),Me=()=>_n(P.popup),vo=()=>_n(P.icon),ut=()=>_n(P.title),ma=()=>_n(P["html-container"]),Cl=()=>_n(P.image),El=()=>_n(P["progress-steps"]),bo=()=>_n(P["validation-message"]),ge=()=>Ts(".".concat(P.actions," .").concat(P.confirm)),Ss=()=>Ts(".".concat(P.actions," .").concat(P.cancel)),Ot=()=>Ts(".".concat(P.actions," .").concat(P.deny)),gt=()=>Ts(".".concat(P.loader)),Qe=()=>_n(P.actions),Dl=()=>_n(P.footer),$e=()=>_n(P["timer-progress-bar"]),_a=()=>_n(P.close),Qr=()=>{const f=Me();if(!f)return[];const p=f.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),_=Array.from(p).sort((ae,de)=>{const St=parseInt(ae.getAttribute("tabindex")||"0"),Se=parseInt(de.getAttribute("tabindex")||"0");return St>Se?1:St<Se?-1:0}),v=f.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),N=Array.from(v).filter(ae=>"-1"!==ae.getAttribute("tabindex"));return[...new Set(_.concat(N))].filter(ae=>Ke(ae))},wo=()=>k(document.body,P.shown)&&!k(document.body,P["toast-shown"])&&!k(document.body,P["no-backdrop"]),Co=()=>{const f=Me();return!!f&&k(f,P.toast)},T=(f,p)=>{if(f.textContent="",p){const v=(new DOMParser).parseFromString(p,"text/html"),N=v.querySelector("head");N&&Array.from(N.childNodes).forEach(de=>{f.appendChild(de)});const ae=v.querySelector("body");ae&&Array.from(ae.childNodes).forEach(de=>{de instanceof HTMLVideoElement||de instanceof HTMLAudioElement?f.appendChild(de.cloneNode(!0)):f.appendChild(de)})}},k=(f,p)=>{if(!p)return!1;const _=p.split(/\s+/);for(let v=0;v<_.length;v++)if(!f.classList.contains(_[v]))return!1;return!0},W=(f,p,_)=>{if(((f,p)=>{Array.from(f.classList).forEach(_=>{!Object.values(P).includes(_)&&!Object.values(Sr).includes(_)&&!Object.values(p.showClass||{}).includes(_)&&f.classList.remove(_)})})(f,p),p.customClass&&p.customClass[_]){if("string"!=typeof p.customClass[_]&&!p.customClass[_].forEach)return void Qt("Invalid type of customClass.".concat(_,'! Expected string or iterable object, got "').concat(typeof p.customClass[_],'"'));re(f,p.customClass[_])}},te=(f,p)=>{if(!p)return null;switch(p){case"select":case"textarea":case"file":return f.querySelector(".".concat(P.popup," > .").concat(P[p]));case"checkbox":return f.querySelector(".".concat(P.popup," > .").concat(P.checkbox," input"));case"radio":return f.querySelector(".".concat(P.popup," > .").concat(P.radio," input:checked"))||f.querySelector(".".concat(P.popup," > .").concat(P.radio," input:first-child"));case"range":return f.querySelector(".".concat(P.popup," > .").concat(P.range," input"));default:return f.querySelector(".".concat(P.popup," > .").concat(P.input))}},Bt=f=>{if(f.focus(),"file"!==f.type){const p=f.value;f.value="",f.value=p}},at=(f,p,_)=>{!f||!p||("string"==typeof p&&(p=p.split(/\s+/).filter(Boolean)),p.forEach(v=>{Array.isArray(f)?f.forEach(N=>{_?N.classList.add(v):N.classList.remove(v)}):_?f.classList.add(v):f.classList.remove(v)}))},re=(f,p)=>{at(f,p,!0)},mt=(f,p)=>{at(f,p,!1)},yn=(f,p)=>{const _=Array.from(f.children);for(let v=0;v<_.length;v++){const N=_[v];if(N instanceof HTMLElement&&k(N,p))return N}},Xn=(f,p,_)=>{_==="".concat(parseInt(_))&&(_=parseInt(_)),_||0===parseInt(_)?f.style[p]="number"==typeof _?"".concat(_,"px"):_:f.style.removeProperty(p)},Pt=function(f){f&&(f.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Jt=f=>{f&&(f.style.display="none")},ei=(f,p,_,v)=>{const N=f.querySelector(p);N&&(N.style[_]=v)},In=function(f,p){p?Pt(f,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Jt(f)},Ke=f=>!(!f||!(f.offsetWidth||f.offsetHeight||f.getClientRects().length)),Tl=f=>f.scrollHeight>f.clientHeight,mu=f=>{const p=window.getComputedStyle(f),_=parseFloat(p.getPropertyValue("animation-duration")||"0"),v=parseFloat(p.getPropertyValue("transition-duration")||"0");return _>0||v>0},Sl=function(f){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const _=$e();_&&Ke(_)&&(p&&(_.style.transition="none",_.style.width="100%"),setTimeout(()=>{_.style.transition="width ".concat(f/1e3,"s linear"),_.style.width="0%"},10))},om=()=>typeof window>"u"||typeof document>"u",R0='\n <div aria-labelledby="'.concat(P.title,'" aria-describedby="').concat(P["html-container"],'" class="').concat(P.popup,'" tabindex="-1">\n   <button type="button" class="').concat(P.close,'"></button>\n   <ul class="').concat(P["progress-steps"],'"></ul>\n   <div class="').concat(P.icon,'"></div>\n   <img class="').concat(P.image,'" />\n   <h2 class="').concat(P.title,'" id="').concat(P.title,'"></h2>\n   <div class="').concat(P["html-container"],'" id="').concat(P["html-container"],'"></div>\n   <input class="').concat(P.input,'" id="').concat(P.input,'" />\n   <input type="file" class="').concat(P.file,'" />\n   <div class="').concat(P.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(P.select,'" id="').concat(P.select,'"></select>\n   <div class="').concat(P.radio,'"></div>\n   <label class="').concat(P.checkbox,'">\n     <input type="checkbox" id="').concat(P.checkbox,'" />\n     <span class="').concat(P.label,'"></span>\n   </label>\n   <textarea class="').concat(P.textarea,'" id="').concat(P.textarea,'"></textarea>\n   <div class="').concat(P["validation-message"],'" id="').concat(P["validation-message"],'"></div>\n   <div class="').concat(P.actions,'">\n     <div class="').concat(P.loader,'"></div>\n     <button type="button" class="').concat(P.confirm,'"></button>\n     <button type="button" class="').concat(P.deny,'"></button>\n     <button type="button" class="').concat(P.cancel,'"></button>\n   </div>\n   <div class="').concat(P.footer,'"></div>\n   <div class="').concat(P["timer-progress-bar-container"],'">\n     <div class="').concat(P["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Do=()=>{Te.currentInstance.resetValidationMessage()},kh=f=>{const p=(()=>{const f=nn();return!!f&&(f.remove(),mt([document.documentElement,document.body],[P["no-backdrop"],P["toast-shown"],P["has-column"]]),!0)})();if(om())return void Ir("SweetAlert2 requires document to initialize");const _=document.createElement("div");_.className=P.container,p&&re(_,P["no-transition"]),T(_,R0);const v=(f=>"string"==typeof f?document.querySelector(f):f)(f.target);v.appendChild(_),(f=>{const p=Me();p.setAttribute("role",f.toast?"alert":"dialog"),p.setAttribute("aria-live",f.toast?"polite":"assertive"),f.toast||p.setAttribute("aria-modal","true")})(f),(f=>{"rtl"===window.getComputedStyle(f).direction&&re(nn(),P.rtl)})(v),(()=>{const f=Me(),p=yn(f,P.input),_=yn(f,P.file),v=f.querySelector(".".concat(P.range," input")),N=f.querySelector(".".concat(P.range," output")),ae=yn(f,P.select),de=f.querySelector(".".concat(P.checkbox," input")),St=yn(f,P.textarea);p.oninput=Do,_.onchange=Do,ae.onchange=Do,de.onchange=Do,St.oninput=Do,v.oninput=()=>{Do(),N.value=v.value},v.onchange=()=>{Do(),N.value=v.value}})()},_u=(f,p)=>{f instanceof HTMLElement?p.appendChild(f):"object"==typeof f?am(f,p):f&&T(p,f)},am=(f,p)=>{f.jquery?lm(p,f):T(p,f.toString())},lm=(f,p)=>{if(f.textContent="",0 in p)for(let _=0;_ in p;_++)f.appendChild(p[_].cloneNode(!0));else f.appendChild(p.cloneNode(!0))},Is=(()=>{if(om())return!1;const f=document.createElement("div");return typeof f.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof f.style.animation<"u"&&"animationend"})(),H0=(f,p)=>{const _=Qe(),v=gt();!_||!v||(p.showConfirmButton||p.showDenyButton||p.showCancelButton?Pt(_):Jt(_),W(_,p,"actions"),function cm(f,p,_){const v=ge(),N=Ot(),ae=Ss();!v||!N||!ae||(yu(v,"confirm",_),yu(N,"deny",_),yu(ae,"cancel",_),function um(f,p,_,v){v.buttonsStyling?(re([f,p,_],P.styled),v.confirmButtonColor&&(f.style.backgroundColor=v.confirmButtonColor,re(f,P["default-outline"])),v.denyButtonColor&&(p.style.backgroundColor=v.denyButtonColor,re(p,P["default-outline"])),v.cancelButtonColor&&(_.style.backgroundColor=v.cancelButtonColor,re(_,P["default-outline"]))):mt([f,p,_],P.styled)}(v,N,ae,_),_.reverseButtons&&(_.toast?(f.insertBefore(ae,v),f.insertBefore(N,v)):(f.insertBefore(ae,p),f.insertBefore(N,p),f.insertBefore(v,p))))}(_,v,p),T(v,p.loaderHtml||""),W(v,p,"loader"))};function yu(f,p,_){const v=Ni(p);In(f,_["show".concat(v,"Button")],"inline-block"),T(f,_["".concat(p,"ButtonText")]||""),f.setAttribute("aria-label",_["".concat(p,"ButtonAriaLabel")]||""),f.className=P[p],W(f,_,"".concat(p,"Button"))}const rn=(f,p)=>{const _=nn();_&&(function $0(f,p){"string"==typeof p?f.style.background=p:p||re([document.documentElement,document.body],P["no-backdrop"])}(_,p.backdrop),function U0(f,p){p&&(p in P?re(f,P[p]):(Qt('The "position" parameter is not valid, defaulting to "center"'),re(f,P.center)))}(_,p.position),function j0(f,p){p&&re(f,P["grow-".concat(p)])}(_,p.grow),W(_,p,"container"))};const z0=["input","file","range","select","radio","checkbox","textarea"],G0=f=>{if(!f.input)return;if(!ti[f.input])return void Ir('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(f.input,'"'));const p=di(f.input),_=ti[f.input](p,f);Pt(p),f.inputAutoFocus&&setTimeout(()=>{Bt(_)})},Jr=(f,p)=>{const _=te(Me(),f);if(_){(f=>{for(let p=0;p<f.attributes.length;p++){const _=f.attributes[p].name;["id","type","value","style"].includes(_)||f.removeAttribute(_)}})(_);for(const v in p)_.setAttribute(v,p[v])}},q0=f=>{const p=di(f.input);"object"==typeof f.customClass&&re(p,f.customClass.input)},Vt=(f,p)=>{(!f.placeholder||p.inputPlaceholder)&&(f.placeholder=p.inputPlaceholder)},Ar=(f,p,_)=>{if(_.inputLabel){const v=document.createElement("label"),N=P["input-label"];v.setAttribute("for",f.id),v.className=N,"object"==typeof _.customClass&&re(v,_.customClass.inputLabel),v.innerText=_.inputLabel,p.insertAdjacentElement("beforebegin",v)}},di=f=>yn(Me(),P[f]||P.input),Ph=(f,p)=>{["string","number"].includes(typeof p)?f.value="".concat(p):wl(p)||Qt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof p,'"'))},ti={};ti.text=ti.email=ti.password=ti.number=ti.tel=ti.url=(f,p)=>(Ph(f,p.inputValue),Ar(f,f,p),Vt(f,p),f.type=p.input,f),ti.file=(f,p)=>(Ar(f,f,p),Vt(f,p),f),ti.range=(f,p)=>{const _=f.querySelector("input"),v=f.querySelector("output");return Ph(_,p.inputValue),_.type=p.input,Ph(v,p.inputValue),Ar(_,f,p),f},ti.select=(f,p)=>{if(f.textContent="",p.inputPlaceholder){const _=document.createElement("option");T(_,p.inputPlaceholder),_.value="",_.disabled=!0,_.selected=!0,f.appendChild(_)}return Ar(f,f,p),f},ti.radio=f=>(f.textContent="",f),ti.checkbox=(f,p)=>{const _=te(Me(),"checkbox");_.value="1",_.checked=!!p.inputValue;const v=f.querySelector("span");return T(v,p.inputPlaceholder),_},ti.textarea=(f,p)=>{Ph(f,p.inputValue),Vt(f,p),Ar(f,f,p);return setTimeout(()=>{if("MutationObserver"in window){const v=parseInt(window.getComputedStyle(Me()).width);new MutationObserver(()=>{if(!document.body.contains(f))return;const ae=f.offsetWidth+(v=>parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight))(f);ae>v?Me().style.width="".concat(ae,"px"):Xn(Me(),"width",p.width)}).observe(f,{attributes:!0,attributeFilter:["style"]})}}),f};const fm=(f,p)=>{const _=ma();_&&(W(_,p,"htmlContainer"),p.html?(_u(p.html,_),Pt(_,"block")):p.text?(_.textContent=p.text,Pt(_,"block")):Jt(_),((f,p)=>{const _=Me();if(!_)return;const v=ze.innerParams.get(f),N=!v||p.input!==v.input;z0.forEach(ae=>{const de=yn(_,P[ae]);de&&(Jr(ae,p.inputAttributes),de.className=P[ae],N&&Jt(de))}),p.input&&(N&&G0(p),q0(p))})(f,p))},ya=(f,p)=>{for(const[_,v]of Object.entries(Sr))p.icon!==_&&mt(f,v);re(f,p.icon&&Sr[p.icon]),Y0(f,p),K0(),W(f,p,"icon")},K0=()=>{const f=Me();if(!f)return;const p=window.getComputedStyle(f).getPropertyValue("background-color"),_=f.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let v=0;v<_.length;v++)_[v].style.backgroundColor=p},mm=(f,p)=>{if(!p.icon&&!p.iconHtml)return;let _=f.innerHTML,v="";p.iconHtml?v=_m(p.iconHtml):"success"===p.icon?(v='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',_=_.replace(/ style=".*?"/g,"")):"error"===p.icon?v='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':p.icon&&(v=_m({question:"?",warning:"!",info:"i"}[p.icon])),_.trim()!==v.trim()&&T(f,v)},Y0=(f,p)=>{if(p.iconColor){f.style.color=p.iconColor,f.style.borderColor=p.iconColor;for(const _ of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])ei(f,_,"backgroundColor",p.iconColor);ei(f,".swal2-success-ring","borderColor",p.iconColor)}},_m=f=>'<div class="'.concat(P["icon-content"],'">').concat(f,"</div>"),J0=(f,p)=>{const _=p.showClass||{};f.className="".concat(P.popup," ").concat(Ke(f)?_.popup:""),p.toast?(re([document.documentElement,document.body],P["toast-shown"]),re(f,P.toast)):re(f,P.modal),W(f,p,"popup"),"string"==typeof p.customClass&&re(f,p.customClass),p.icon&&re(f,P["icon-".concat(p.icon)])},hn=f=>{const p=document.createElement("li");return re(p,P["progress-step"]),T(p,f),p},vm=f=>{const p=document.createElement("li");return re(p,P["progress-step-line"]),f.progressStepsDistance&&Xn(p,"width",f.progressStepsDistance),p},Fh=(f,p)=>{((f,p)=>{const _=nn(),v=Me();if(_&&v){if(p.toast){Xn(_,"width",p.width),v.style.width="100%";const N=gt();N&&v.insertBefore(N,vo())}else Xn(v,"width",p.width);Xn(v,"padding",p.padding),p.color&&(v.style.color=p.color),p.background&&(v.style.background=p.background),Jt(bo()),J0(v,p)}})(0,p),rn(0,p),((f,p)=>{const _=El();if(!_)return;const{progressSteps:v,currentProgressStep:N}=p;v&&0!==v.length&&void 0!==N?(Pt(_),_.textContent="",N>=v.length&&Qt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),v.forEach((ae,de)=>{const St=hn(ae);if(_.appendChild(St),de===N&&re(St,P["active-progress-step"]),de!==v.length-1){const Se=vm(p);_.appendChild(Se)}})):Jt(_)})(0,p),((f,p)=>{const _=ze.innerParams.get(f),v=vo();if(v){if(_&&p.icon===_.icon)return mm(v,p),void ya(v,p);if(!p.icon&&!p.iconHtml)return void Jt(v);if(p.icon&&-1===Object.keys(Sr).indexOf(p.icon))return Ir('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(p.icon,'"')),void Jt(v);Pt(v),mm(v,p),ya(v,p),re(v,p.showClass&&p.showClass.icon)}})(f,p),((f,p)=>{const _=Cl();if(_){if(!p.imageUrl)return void Jt(_);Pt(_,""),_.setAttribute("src",p.imageUrl),_.setAttribute("alt",p.imageAlt||""),Xn(_,"width",p.imageWidth),Xn(_,"height",p.imageHeight),_.className=P.image,W(_,p,"image")}})(0,p),((f,p)=>{const _=ut();_&&(In(_,p.title||p.titleText,"block"),p.title&&_u(p.title,_),p.titleText&&(_.innerText=p.titleText),W(_,p,"title"))})(0,p),((f,p)=>{const _=_a();_&&(T(_,p.closeButtonHtml||""),W(_,p,"closeButton"),In(_,p.showCloseButton),_.setAttribute("aria-label",p.closeButtonAriaLabel||""))})(0,p),fm(f,p),H0(0,p),((f,p)=>{const _=Dl();_&&(In(_,p.footer,"block"),p.footer&&_u(p.footer,_),W(_,p,"footer"))})(0,p);const _=Me();"function"==typeof p.didRender&&_&&p.didRender(_)},Pi=()=>{var f;return null===(f=ge())||void 0===f?void 0:f.click()},qe=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Il=f=>{f.keydownTarget&&f.keydownHandlerAdded&&(f.keydownTarget.removeEventListener("keydown",f.keydownHandler,{capture:f.keydownListenerCapture}),f.keydownHandlerAdded=!1)},Al=(f,p)=>{const _=Qr();if(_.length)return(f+=p)===_.length?f=0:-1===f&&(f=_.length-1),void _[f].focus();Me().focus()},wm=["ArrowRight","ArrowDown"],we=["ArrowLeft","ArrowUp"],me=(f,p,_)=>{const v=ze.innerParams.get(f);v&&(p.isComposing||229===p.keyCode||(v.stopKeydownPropagation&&p.stopPropagation(),"Enter"===p.key?Bh(f,p,v):"Tab"===p.key?Vh(p):[...wm,...we].includes(p.key)?XO(p.key):"Escape"===p.key&&Cm(p,v,_)))},Bh=(f,p,_)=>{if(yo(_.allowEnterKey)&&p.target&&f.getInput()&&p.target instanceof HTMLElement&&p.target.outerHTML===f.getInput().outerHTML){if(["textarea","file"].includes(_.input))return;Pi(),p.preventDefault()}},Vh=f=>{const p=f.target,_=Qr();let v=-1;for(let N=0;N<_.length;N++)if(p===_[N]){v=N;break}Al(v,f.shiftKey?-1:1),f.stopPropagation(),f.preventDefault()},XO=f=>{const p=ge(),_=Ot(),v=Ss();if(document.activeElement instanceof HTMLElement&&![p,_,v].includes(document.activeElement))return;const ae=wm.includes(f)?"nextElementSibling":"previousElementSibling";let de=document.activeElement;for(let St=0;St<Qe().children.length;St++){if(de=de[ae],!de)return;if(de instanceof HTMLButtonElement&&Ke(de))break}de instanceof HTMLButtonElement&&de.focus()},Cm=(f,p,_)=>{yo(p.allowEscapeKey)&&(f.preventDefault(),_(qe.esc))};var O={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const _e=()=>{Array.from(document.body.children).forEach(p=>{p.hasAttribute("data-previous-aria-hidden")?(p.setAttribute("aria-hidden",p.getAttribute("data-previous-aria-hidden")||""),p.removeAttribute("data-previous-aria-hidden")):p.removeAttribute("aria-hidden")})},tt=typeof window<"u"&&!!window.GestureEvent,ek=()=>{const f=nn();if(!f)return;let p;f.ontouchstart=_=>{p=tw(_)},f.ontouchmove=_=>{p&&(_.preventDefault(),_.stopPropagation())}},tw=f=>{const p=f.target,_=nn(),v=ma();return!(!_||!v||Hh(f)||hi(f)||p!==_&&(Tl(_)||!(p instanceof HTMLElement)||"INPUT"===p.tagName||"TEXTAREA"===p.tagName||Tl(v)&&v.contains(p)))},Hh=f=>f.touches&&f.touches.length&&"stylus"===f.touches[0].touchType,hi=f=>f.touches&&f.touches.length>1;let Ml=null;const To=f=>{null===Ml&&(document.body.scrollHeight>window.innerHeight||"scroll"===f)&&(Ml=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Ml+(()=>{const f=document.createElement("div");f.className=P["scrollbar-measure"],document.body.appendChild(f);const p=f.getBoundingClientRect().width-f.clientWidth;return document.body.removeChild(f),p})(),"px"))};function iw(f,p,_,v){Co()?ow(f,v):(Kr(_).then(()=>ow(f,v)),Il(Te)),tt?(p.setAttribute("style","display:none !important"),p.removeAttribute("class"),p.innerHTML=""):p.remove(),wo()&&(null!==Ml&&(document.body.style.paddingRight="".concat(Ml,"px"),Ml=null),(()=>{if(k(document.body,P.iosfix)){const f=parseInt(document.body.style.top,10);mt(document.body,P.iosfix),document.body.style.top="",document.body.scrollTop=-1*f}})(),_e()),function ik(){mt([document.documentElement,document.body],[P.shown,P["height-auto"],P["no-backdrop"],P["toast-shown"]])}()}function So(f){f=rk(f);const p=O.swalPromiseResolve.get(this),_=rw(this);this.isAwaitingPromise?f.isDismissed||(xl(this),p(f)):_&&p(f)}const rw=f=>{const p=Me();if(!p)return!1;const _=ze.innerParams.get(f);if(!_||k(p,_.hideClass.popup))return!1;mt(p,_.showClass.popup),re(p,_.hideClass.popup);const v=nn();return mt(v,_.showClass.backdrop),re(v,_.hideClass.backdrop),Ri(f,p,_),!0};function sw(f){const p=O.swalPromiseReject.get(this);xl(this),p&&p(f)}const xl=f=>{f.isAwaitingPromise&&(delete f.isAwaitingPromise,ze.innerParams.get(f)||f._destroy())},rk=f=>typeof f>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},f),Ri=(f,p,_)=>{const v=nn(),N=Is&&mu(p);"function"==typeof _.willClose&&_.willClose(p),N?pe(f,p,v,_.returnFocus,_.didClose):iw(f,v,_.returnFocus,_.didClose)},pe=(f,p,_,v,N)=>{Is&&(Te.swalCloseEventFinishedCallback=iw.bind(null,f,_,v,N),p.addEventListener(Is,function(ae){ae.target===p&&(Te.swalCloseEventFinishedCallback(),delete Te.swalCloseEventFinishedCallback)}))},ow=(f,p)=>{setTimeout(()=>{"function"==typeof p&&p.bind(f.params)(),f._destroy&&f._destroy()})},Nl=f=>{let p=Me();if(p||new Nu,p=Me(),!p)return;const _=gt();Co()?Jt(vo()):sk(p,f),Pt(_),p.setAttribute("data-loading","true"),p.setAttribute("aria-busy","true"),p.focus()},sk=(f,p)=>{const _=Qe(),v=gt();!_||!v||(!p&&Ke(ge())&&(p=ge()),Pt(_),p&&(Jt(p),v.setAttribute("data-button-to-replace",p.className),_.insertBefore(v,p)),re([f,_],P.loading))},Oe=f=>f.checked?1:0,wu=f=>f.checked?f.value:null,aw=f=>f.files&&f.files.length?null!==f.getAttribute("multiple")?f.files:f.files[0]:null,Em=(f,p)=>{const _=Me();if(!_)return;const v=N=>{"select"===p.input?function Cu(f,p,_){const v=yn(f,P.select);if(!v)return;const N=(ae,de,St)=>{const Se=document.createElement("option");Se.value=St,T(Se,de),Se.selected=$h(St,_.inputValue),ae.appendChild(Se)};p.forEach(ae=>{const de=ae[0],St=ae[1];if(Array.isArray(St)){const Se=document.createElement("optgroup");Se.label=de,Se.disabled=!1,v.appendChild(Se),St.forEach(pi=>N(Se,pi[1],pi[0]))}else N(v,St,de)}),v.focus()}(_,va(N),p):"radio"===p.input&&function Eu(f,p,_){const v=yn(f,P.radio);if(!v)return;p.forEach(ae=>{const de=ae[0],St=ae[1],Se=document.createElement("input"),pi=document.createElement("label");Se.type="radio",Se.name=P.radio,Se.value=de,$h(de,_.inputValue)&&(Se.checked=!0);const Ms=document.createElement("span");T(Ms,St),Ms.className=P.label,pi.appendChild(Se),pi.appendChild(Ms),v.appendChild(pi)});const N=v.querySelectorAll("input");N.length&&N[0].focus()}(_,va(N),p)};Yr(p.inputOptions)||wl(p.inputOptions)?(Nl(ge()),ki(p.inputOptions).then(N=>{f.hideLoading(),v(N)})):"object"==typeof p.inputOptions?v(p.inputOptions):Ir("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof p.inputOptions))},lw=(f,p)=>{const _=f.getInput();_&&(Jt(_),ki(p.inputValue).then(v=>{_.value="".concat("number"===p.input?parseFloat(v)||0:v),Pt(_),_.focus(),f.hideLoading()}).catch(v=>{Ir("Error in inputValue promise: ".concat(v)),_.value="",Pt(_),_.focus(),f.hideLoading()}))};const va=f=>{const p=[];return f instanceof Map?f.forEach((_,v)=>{let N=_;"object"==typeof N&&(N=va(N)),p.push([v,N])}):Object.keys(f).forEach(_=>{let v=f[_];"object"==typeof v&&(v=va(v)),p.push([_,v])}),p},$h=(f,p)=>!!p&&p.toString()===f.toString(),jh=(f,p)=>{const _=ze.innerParams.get(f);if(!_.input)return void Ir('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Ni(p)));const v=f.getInput(),N=((f,p)=>{const _=f.getInput();if(!_)return null;switch(p.input){case"checkbox":return Oe(_);case"radio":return wu(_);case"file":return aw(_);default:return p.inputAutoTrim?_.value.trim():_.value}})(f,_);_.inputValidator?ni(f,N,p):v&&!v.checkValidity()?(f.enableButtons(),f.showValidationMessage(_.validationMessage)):"deny"===p?Du(f,N):Dm(f,N)},ni=(f,p,_)=>{const v=ze.innerParams.get(f);f.disableInput(),Promise.resolve().then(()=>ki(v.inputValidator(p,v.validationMessage))).then(ae=>{f.enableButtons(),f.enableInput(),ae?f.showValidationMessage(ae):"deny"===_?Du(f,p):Dm(f,p)})},Du=(f,p)=>{const _=ze.innerParams.get(f||void 0);_.showLoaderOnDeny&&Nl(Ot()),_.preDeny?(f.isAwaitingPromise=!0,Promise.resolve().then(()=>ki(_.preDeny(p,_.validationMessage))).then(N=>{!1===N?(f.hideLoading(),xl(f)):f.close({isDenied:!0,value:typeof N>"u"?p:N})}).catch(N=>dt(f||void 0,N))):f.close({isDenied:!0,value:p})},uw=(f,p)=>{f.close({isConfirmed:!0,value:p})},dt=(f,p)=>{f.rejectPromise(p)},Dm=(f,p)=>{const _=ze.innerParams.get(f||void 0);_.showLoaderOnConfirm&&Nl(),_.preConfirm?(f.resetValidationMessage(),f.isAwaitingPromise=!0,Promise.resolve().then(()=>ki(_.preConfirm(p,_.validationMessage))).then(N=>{Ke(bo())||!1===N?(f.hideLoading(),xl(f)):uw(f,typeof N>"u"?p:N)}).catch(N=>dt(f||void 0,N))):uw(f,p)};function zh(){const f=ze.innerParams.get(this);if(!f)return;const p=ze.domCache.get(this);Jt(p.loader),Co()?f.icon&&Pt(vo()):Gh(p),mt([p.popup,p.actions],P.loading),p.popup.removeAttribute("aria-busy"),p.popup.removeAttribute("data-loading"),p.confirmButton.disabled=!1,p.denyButton.disabled=!1,p.cancelButton.disabled=!1}const Gh=f=>{const p=f.popup.getElementsByClassName(f.loader.getAttribute("data-button-to-replace"));p.length?Pt(p[0],"inline-block"):!Ke(ge())&&!Ke(Ot())&&!Ke(Ss())&&Jt(f.actions)};function Tu(){const f=ze.innerParams.get(this),p=ze.domCache.get(this);return p?te(p.popup,f.input):null}function Wh(f,p,_){const v=ze.domCache.get(f);p.forEach(N=>{v[N].disabled=_})}function Su(f,p){const _=Me();if(_&&f)if("radio"===f.type){const v=_.querySelectorAll('[name="'.concat(P.radio,'"]'));for(let N=0;N<v.length;N++)v[N].disabled=p}else f.disabled=p}function Tm(){Wh(this,["confirmButton","denyButton","cancelButton"],!1)}function Iu(){Wh(this,["confirmButton","denyButton","cancelButton"],!0)}function dw(){Su(this.getInput(),!1)}function hw(){Su(this.getInput(),!0)}function fw(f){const p=ze.domCache.get(this),_=ze.innerParams.get(this);T(p.validationMessage,f),p.validationMessage.className=P["validation-message"],_.customClass&&_.customClass.validationMessage&&re(p.validationMessage,_.customClass.validationMessage),Pt(p.validationMessage);const v=this.getInput();v&&(v.setAttribute("aria-invalid",!0),v.setAttribute("aria-describedby",P["validation-message"]),Bt(v),re(v,P.inputerror))}function pw(){const f=ze.domCache.get(this);f.validationMessage&&Jt(f.validationMessage);const p=this.getInput();p&&(p.removeAttribute("aria-invalid"),p.removeAttribute("aria-describedby"),mt(p,P.inputerror))}const Ol={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},kl=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],qh={},Au=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Sm=f=>Object.prototype.hasOwnProperty.call(Ol,f),Im=f=>-1!==kl.indexOf(f),Am=f=>qh[f],Mm=f=>{Sm(f)||Qt('Unknown parameter "'.concat(f,'"'))},ba=f=>{Au.includes(f)&&Qt('The parameter "'.concat(f,'" is incompatible with toasts'))},gw=f=>{const p=Am(f);p&&Oi(f,p)};function xm(f){const p=Me(),_=ze.innerParams.get(this);if(!p||k(p,_.hideClass.popup))return void Qt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const v=$(f),N=Object.assign({},_,v);Fh(this,N),ze.innerParams.set(this,N),Object.defineProperties(this,{params:{value:Object.assign({},this.params,f),writable:!1,enumerable:!0}})}const $=f=>{const p={};return Object.keys(f).forEach(_=>{Im(_)?p[_]=f[_]:Qt("Invalid parameter to update: ".concat(_))}),p};function Kh(){const f=ze.domCache.get(this),p=ze.innerParams.get(this);p?(f.popup&&Te.swalCloseEventFinishedCallback&&(Te.swalCloseEventFinishedCallback(),delete Te.swalCloseEventFinishedCallback),"function"==typeof p.didDestroy&&p.didDestroy(),J(this)):Pl(this)}const J=f=>{Pl(f),delete f.params,delete Te.keydownHandler,delete Te.keydownTarget,delete Te.currentInstance},Pl=f=>{f.isAwaitingPromise?(Rl(ze,f),f.isAwaitingPromise=!0):(Rl(O,f),Rl(ze,f),delete f.isAwaitingPromise,delete f.disableButtons,delete f.enableButtons,delete f.getInput,delete f.disableInput,delete f.enableInput,delete f.hideLoading,delete f.disableLoading,delete f.showValidationMessage,delete f.resetValidationMessage,delete f.close,delete f.closePopup,delete f.closeModal,delete f.closeToast,delete f.rejectPromise,delete f.update,delete f._destroy)},Rl=(f,p)=>{for(const _ in f)f[_].delete(p)};var Fl=Object.freeze({__proto__:null,_destroy:Kh,close:So,closeModal:So,closePopup:So,closeToast:So,disableButtons:Iu,disableInput:hw,disableLoading:zh,enableButtons:Tm,enableInput:dw,getInput:Tu,handleAwaitingPromise:xl,hideLoading:zh,rejectPromise:sw,resetValidationMessage:pw,showValidationMessage:fw,update:xm});const _w=(f,p,_)=>{p.popup.onclick=()=>{const v=ze.innerParams.get(f);v&&(yw(v)||v.timer||v.input)||_(qe.close)}},yw=f=>f.showConfirmButton||f.showDenyButton||f.showCancelButton||f.showCloseButton;let Fi=!1;const Mu=f=>{f.popup.onmousedown=()=>{f.container.onmouseup=function(p){f.container.onmouseup=void 0,p.target===f.container&&(Fi=!0)}}},Li=f=>{f.container.onmousedown=()=>{f.popup.onmouseup=function(p){f.popup.onmouseup=void 0,(p.target===f.popup||f.popup.contains(p.target))&&(Fi=!0)}}},Mr=(f,p,_)=>{p.container.onclick=v=>{const N=ze.innerParams.get(f);Fi?Fi=!1:v.target===p.container&&yo(N.allowOutsideClick)&&_(qe.backdrop)}},Ll=f=>f instanceof Element||(f=>"object"==typeof f&&f.jquery)(f);const wa=()=>{if(Te.timeout)return(()=>{const f=$e();if(!f)return;const p=parseInt(window.getComputedStyle(f).width);f.style.removeProperty("transition"),f.style.width="100%";const _=parseInt(window.getComputedStyle(f).width);f.style.width="".concat(p/_*100,"%")})(),Te.timeout.stop()},Jh=()=>{if(Te.timeout){const f=Te.timeout.start();return Sl(f),f}};let Xh=!1;const Io={};const Rm=f=>{for(let p=f.target;p&&p!==document;p=p.parentNode)for(const _ in Io){const v=p.getAttribute(_);if(v)return void Io[_].fire({template:v})}};var vw=Object.freeze({__proto__:null,argsToParams:f=>{const p={};return"object"!=typeof f[0]||Ll(f[0])?["title","html","icon"].forEach((_,v)=>{const N=f[v];"string"==typeof N||Ll(N)?p[_]=N:void 0!==N&&Ir("Unexpected type of ".concat(_,'! Expected "string" or "Element", got ').concat(typeof N))}):Object.assign(p,f[0]),p},bindClickHandler:function Pm(){Io[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Xh||(document.body.addEventListener("click",Rm),Xh=!0)},clickCancel:()=>{var f;return null===(f=Ss())||void 0===f?void 0:f.click()},clickConfirm:Pi,clickDeny:()=>{var f;return null===(f=Ot())||void 0===f?void 0:f.click()},enableLoading:Nl,fire:function Qh(){for(var p=arguments.length,_=new Array(p),v=0;v<p;v++)_[v]=arguments[v];return new this(..._)},getActions:Qe,getCancelButton:Ss,getCloseButton:_a,getConfirmButton:ge,getContainer:nn,getDenyButton:Ot,getFocusableElements:Qr,getFooter:Dl,getHtmlContainer:ma,getIcon:vo,getIconContent:()=>_n(P["icon-content"]),getImage:Cl,getInputLabel:()=>_n(P["input-label"]),getLoader:gt,getPopup:Me,getProgressSteps:El,getTimerLeft:()=>Te.timeout&&Te.timeout.getTimerLeft(),getTimerProgressBar:$e,getTitle:ut,getValidationMessage:bo,increaseTimer:f=>{if(Te.timeout){const p=Te.timeout.increase(f);return Sl(p,!0),p}},isDeprecatedParameter:Am,isLoading:()=>{const f=Me();return!!f&&f.hasAttribute("data-loading")},isTimerRunning:()=>!(!Te.timeout||!Te.timeout.isRunning()),isUpdatableParameter:Im,isValidParameter:Sm,isVisible:()=>Ke(Me()),mixin:function Nm(f){return class p extends(this){_main(v,N){return super._main(v,Object.assign({},f,N))}}},resumeTimer:Jh,showLoading:Nl,stopTimer:wa,toggleTimer:()=>{const f=Te.timeout;return f&&(f.running?wa():Jh())}});class Fm{constructor(p,_){this.callback=p,this.remaining=_,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(p){const _=this.running;return _&&this.stop(),this.remaining+=p,_&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Lm=["swal-title","swal-html","swal-footer"],rr=f=>{const p={};return Array.from(f.querySelectorAll("swal-param")).forEach(v=>{Ao(v,["name","value"]);const N=v.getAttribute("name"),ae=v.getAttribute("value");p[N]="boolean"==typeof Ol[N]?"false"!==ae:"object"==typeof Ol[N]?JSON.parse(ae):ae}),p},ww=f=>{const p={};return Array.from(f.querySelectorAll("swal-function-param")).forEach(v=>{const N=v.getAttribute("name"),ae=v.getAttribute("value");p[N]=new Function("return ".concat(ae))()}),p},Bm=f=>{const p={};return Array.from(f.querySelectorAll("swal-button")).forEach(v=>{Ao(v,["type","color","aria-label"]);const N=v.getAttribute("type");p["".concat(N,"ButtonText")]=v.innerHTML,p["show".concat(Ni(N),"Button")]=!0,v.hasAttribute("color")&&(p["".concat(N,"ButtonColor")]=v.getAttribute("color")),v.hasAttribute("aria-label")&&(p["".concat(N,"ButtonAriaLabel")]=v.getAttribute("aria-label"))}),p},Cw=f=>{const p={},_=f.querySelector("swal-image");return _&&(Ao(_,["src","width","height","alt"]),_.hasAttribute("src")&&(p.imageUrl=_.getAttribute("src")),_.hasAttribute("width")&&(p.imageWidth=_.getAttribute("width")),_.hasAttribute("height")&&(p.imageHeight=_.getAttribute("height")),_.hasAttribute("alt")&&(p.imageAlt=_.getAttribute("alt"))),p},Ew=f=>{const p={},_=f.querySelector("swal-icon");return _&&(Ao(_,["type","color"]),_.hasAttribute("type")&&(p.icon=_.getAttribute("type")),_.hasAttribute("color")&&(p.iconColor=_.getAttribute("color")),p.iconHtml=_.innerHTML),p},Dw=f=>{const p={},_=f.querySelector("swal-input");_&&(Ao(_,["type","label","placeholder","value"]),p.input=_.getAttribute("type")||"text",_.hasAttribute("label")&&(p.inputLabel=_.getAttribute("label")),_.hasAttribute("placeholder")&&(p.inputPlaceholder=_.getAttribute("placeholder")),_.hasAttribute("value")&&(p.inputValue=_.getAttribute("value")));const v=Array.from(f.querySelectorAll("swal-input-option"));return v.length&&(p.inputOptions={},v.forEach(N=>{Ao(N,["value"]);const ae=N.getAttribute("value");p.inputOptions[ae]=N.innerHTML})),p},Tw=(f,p)=>{const _={};for(const v in p){const N=p[v],ae=f.querySelector(N);ae&&(Ao(ae,[]),_[N.replace(/^swal-/,"")]=ae.innerHTML.trim())}return _},Vm=f=>{const p=Lm.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(f.children).forEach(_=>{const v=_.tagName.toLowerCase();p.includes(v)||Qt("Unrecognized element <".concat(v,">"))})},Ao=(f,p)=>{Array.from(f.attributes).forEach(_=>{-1===p.indexOf(_.name)&&Qt(['Unrecognized attribute "'.concat(_.name,'" on <').concat(f.tagName.toLowerCase(),">."),"".concat(p.length?"Allowed attributes are: ".concat(p.join(", ")):"To set the value, use HTML within the element.")])})},Sw=f=>{const p=nn(),_=Me();"function"==typeof f.willOpen&&f.willOpen(_);const N=window.getComputedStyle(document.body).overflowY;Mw(p,_,f),setTimeout(()=>{Iw(p,_)},10),wo()&&(Aw(p,f.scrollbarPadding,N),Array.from(document.body.children).forEach(p=>{p===nn()||p.contains(nn())||(p.hasAttribute("aria-hidden")&&p.setAttribute("data-previous-aria-hidden",p.getAttribute("aria-hidden")||""),p.setAttribute("aria-hidden","true"))})),!Co()&&!Te.previousActiveElement&&(Te.previousActiveElement=document.activeElement),"function"==typeof f.didOpen&&setTimeout(()=>f.didOpen(_)),mt(p,P["no-transition"])},Ze=f=>{const p=Me();if(f.target!==p||!Is)return;const _=nn();p.removeEventListener(Is,Ze),_.style.overflowY="auto"},Iw=(f,p)=>{Is&&mu(p)?(f.style.overflowY="hidden",p.addEventListener(Is,Ze)):f.style.overflowY="auto"},Aw=(f,p,_)=>{(()=>{if(tt&&!k(document.body,P.iosfix)){const f=document.body.scrollTop;document.body.style.top="".concat(-1*f,"px"),re(document.body,P.iosfix),ek()}})(),p&&"hidden"!==_&&To(_),setTimeout(()=>{f.scrollTop=0})},Mw=(f,p,_)=>{re(f,_.showClass.backdrop),p.style.setProperty("opacity","0","important"),Pt(p,"grid"),setTimeout(()=>{re(p,_.showClass.popup),p.style.removeProperty("opacity")},10),re([document.documentElement,document.body],P.shown),_.heightAuto&&_.backdrop&&!_.toast&&re([document.documentElement,document.body],P["height-auto"])};var ke={email:(f,p)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid email address"),url:(f,p)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(f)?Promise.resolve():Promise.resolve(p||"Invalid URL")};function K(f){(function xw(f){f.inputValidator||("email"===f.input&&(f.inputValidator=ke.email),"url"===f.input&&(f.inputValidator=ke.url))})(f),f.showLoaderOnConfirm&&!f.preConfirm&&Qt("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function $m(f){(!f.target||"string"==typeof f.target&&!document.querySelector(f.target)||"string"!=typeof f.target&&!f.target.appendChild)&&(Qt('Target parameter is not valid, defaulting to "body"'),f.target="body")}(f),"string"==typeof f.title&&(f.title=f.title.split("\n").join("<br />")),kh(f)}let Tt;var Le=new WeakMap;class Be{constructor(){if(dn(this,Le,{writable:!0,value:void 0}),typeof window>"u")return;Tt=this;for(var p=arguments.length,_=new Array(p),v=0;v<p;v++)_[v]=arguments[v];const N=Object.freeze(this.constructor.argsToParams(_));this.params=N,this.isAwaitingPromise=!1,xi(this,Le,this._main(Tt.params))}_main(p){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(f=>{!1===f.backdrop&&f.allowOutsideClick&&Qt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const p in f)Mm(p),f.toast&&ba(p),gw(p)})(Object.assign({},_,p)),Te.currentInstance&&(Te.currentInstance._destroy(),wo()&&_e()),Te.currentInstance=Tt;const v=Ca(p,_);K(v),Object.freeze(v),Te.timeout&&(Te.timeout.stop(),delete Te.timeout),clearTimeout(Te.restoreFocusTimeout);const N=fi(Tt);return Fh(Tt,v),ze.innerParams.set(Tt,v),Bn(Tt,N,v)}then(p){return Tr(this,Le).then(p)}finally(p){return Tr(this,Le).finally(p)}}const Bn=(f,p,_)=>new Promise((v,N)=>{const ae=de=>{f.close({isDismissed:!0,dismiss:de})};O.swalPromiseResolve.set(f,v),O.swalPromiseReject.set(f,N),p.confirmButton.onclick=()=>{(f=>{const p=ze.innerParams.get(f);f.disableButtons(),p.input?jh(f,"confirm"):Dm(f,!0)})(f)},p.denyButton.onclick=()=>{(f=>{const p=ze.innerParams.get(f);f.disableButtons(),p.returnInputValueOnDeny?jh(f,"deny"):Du(f,!1)})(f)},p.cancelButton.onclick=()=>{((f,p)=>{f.disableButtons(),p(qe.cancel)})(f,ae)},p.closeButton.onclick=()=>{ae(qe.close)},((f,p,_)=>{ze.innerParams.get(f).toast?_w(f,p,_):(Mu(p),Li(p),Mr(f,p,_))})(f,p,ae),((f,p,_,v)=>{Il(p),_.toast||(p.keydownHandler=N=>me(f,N,v),p.keydownTarget=_.keydownListenerCapture?window:Me(),p.keydownListenerCapture=_.keydownListenerCapture,p.keydownTarget.addEventListener("keydown",p.keydownHandler,{capture:p.keydownListenerCapture}),p.keydownHandlerAdded=!0)})(f,Te,_,ae),((f,p)=>{"select"===p.input||"radio"===p.input?Em(f,p):["text","email","number","tel","textarea"].some(_=>_===p.input)&&(Yr(p.inputValue)||wl(p.inputValue))&&(Nl(ge()),lw(f,p))})(f,_),Sw(_),Um(Te,_,ae),jm(p,_),setTimeout(()=>{p.container.scrollTop=0})}),Ca=(f,p)=>{const _=(f=>{const p="string"==typeof f.template?document.querySelector(f.template):f.template;if(!p)return{};const _=p.content;return Vm(_),Object.assign(rr(_),ww(_),Bm(_),Cw(_),Ew(_),Dw(_),Tw(_,Lm))})(f),v=Object.assign({},Ol,p,_,f);return v.showClass=Object.assign({},Ol.showClass,v.showClass),v.hideClass=Object.assign({},Ol.hideClass,v.hideClass),v},fi=f=>{const p={popup:Me(),container:nn(),actions:Qe(),confirmButton:ge(),denyButton:Ot(),cancelButton:Ss(),loader:gt(),closeButton:_a(),validationMessage:bo(),progressSteps:El()};return ze.domCache.set(f,p),p},Um=(f,p,_)=>{const v=$e();Jt(v),p.timer&&(f.timeout=new Fm(()=>{_("timer"),delete f.timeout},p.timer),p.timerProgressBar&&(Pt(v),W(v,p,"timerProgressBar"),setTimeout(()=>{f.timeout&&f.timeout.running&&Sl(p.timer)})))},jm=(f,p)=>{if(!p.toast){if(!yo(p.allowEnterKey))return void Nw();xu(f,p)||Al(-1,1)}},xu=(f,p)=>p.focusDeny&&Ke(f.denyButton)?(f.denyButton.focus(),!0):p.focusCancel&&Ke(f.cancelButton)?(f.cancelButton.focus(),!0):!(!p.focusConfirm||!Ke(f.confirmButton)||(f.confirmButton.focus(),0)),Nw=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const f=new Date,p=localStorage.getItem("swal-initiation");p?(f.getTime()-Date.parse(p))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const _=document.createElement("audio");_.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",_.loop=!0,document.body.appendChild(_),setTimeout(()=>{_.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation","".concat(f))}Be.prototype.disableButtons=Iu,Be.prototype.enableButtons=Tm,Be.prototype.getInput=Tu,Be.prototype.disableInput=hw,Be.prototype.enableInput=dw,Be.prototype.hideLoading=zh,Be.prototype.disableLoading=zh,Be.prototype.showValidationMessage=fw,Be.prototype.resetValidationMessage=pw,Be.prototype.close=So,Be.prototype.closePopup=So,Be.prototype.closeModal=So,Be.prototype.closeToast=So,Be.prototype.rejectPromise=sw,Be.prototype.update=xm,Be.prototype._destroy=Kh,Object.assign(Be,vw),Object.keys(Fl).forEach(f=>{Be[f]=function(){return Tt&&Tt[f]?Tt[f](...arguments):null}}),Be.DismissReason=qe,Be.version="11.7.27";const Nu=Be;return Nu.default=Nu,Nu}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Tr,xi){var be=Tr.createElement("style");if(Tr.getElementsByTagName("head")[0].appendChild(be),be.styleSheet)be.styleSheet.disabled||(be.styleSheet.cssText=xi);else try{be.innerHTML=xi}catch{be.innerText=xi}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},614:()=>{"use strict";const mo=":";const Qr=function(S,...T){if(Qr.translate){const H=Qr.translate(S,T);S=H[0],T=H[1]}let k=Co(S[0],S.raw[0]);for(let H=1;H<S.length;H++)k+=T[H-1]+Co(S[H],S.raw[H]);return k},wo=":";function Co(S,T){return T.charAt(0)===wo?S.substring(function bo(S,T){for(let k=1,H=1;k<S.length;k++,H++)if("\\"===T[H])H++;else if(S[k]===mo)return k;throw new Error(`Unterminated $localize metadata block in "${T}".`)}(S,T)+1):S}globalThis.$localize=Qr}},mo=>{var Tr=be=>mo(mo.s=be);Tr(614),Tr(776)}]);